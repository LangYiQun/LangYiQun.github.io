<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Gem5æ¨¡æ‹Ÿå™¨å­¦ä¹ ï¼ˆä¹ï¼‰</title>
      <link href="/2023/12/14/Gem5%E6%A8%A1%E6%8B%9F%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B9%9D%EF%BC%89/"/>
      <url>/2023/12/14/Gem5%E6%A8%A1%E6%8B%9F%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B9%9D%EF%BC%89/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Garnet</title>
      <link href="/2023/12/11/Garnet/"/>
      <url>/2023/12/11/Garnet/</url>
      
        <content type="html"><![CDATA[<p>GEM5 Garnetå®˜æ–¹æ•™ç¨‹ï¼šä¹”æ²»äºšç†å·¥è¯¾ç¨‹<a href="https://tusharkrishna.ece.gatech.edu/teaching/icn_s17/">https://tusharkrishna.ece.gatech.edu/teaching/icn_s17/</a></p><p>é…å¥—å®éªŒç½‘ç«™<a href="https://tusharkrishna.ece.gatech.edu/teaching/garnet_gt/">https://tusharkrishna.ece.gatech.edu/teaching/garnet_gt/</a></p><p><a href="https://synergy.ece.gatech.edu/tools/garnet/">https://synergy.ece.gatech.edu/tools/garnet/</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>æ–‡çŒ®é˜…è¯»</title>
      <link href="/2023/11/30/%E6%96%87%E7%8C%AE%E9%98%85%E8%AF%BB/"/>
      <url>/2023/11/30/%E6%96%87%E7%8C%AE%E9%98%85%E8%AF%BB/</url>
      
        <content type="html"><![CDATA[<h1 id="æ‹‰ä¸æ–‡ç¼©å†™"><a href="#æ‹‰ä¸æ–‡ç¼©å†™" class="headerlink" title="æ‹‰ä¸æ–‡ç¼©å†™"></a>æ‹‰ä¸æ–‡ç¼©å†™</h1><h2 id="i-e-ä¹Ÿå°±æ˜¯è¯´"><a href="#i-e-ä¹Ÿå°±æ˜¯è¯´" class="headerlink" title="i.e. ä¹Ÿå°±æ˜¯è¯´"></a>i.e. ä¹Ÿå°±æ˜¯è¯´</h2><p><strong>id est</strong>ï¼ˆâ€œthat isâ€ , â€œin other wordsâ€ã€‚è¿›ä¸€æ­¥è§£é‡Šç”¨ï¼Œæ„ä¸ºï¼šä¹Ÿå°±æ˜¯ï¼‰çš„ç¼©å†™ã€‚ç›®çš„æ˜¯ç”¨æ¥è¿›ä¸€æ­¥è§£é‡Šå‰é¢æ‰€è¯´çš„è§‚ç‚¹ï¼ˆä¸åƒåæ–‡çš„e.g.é‚£æ ·å¼•å…¥å®ä¾‹æ¥å½¢è±¡åŒ–ï¼‰ï¼Œæ„æ€æ˜¯â€œé‚£å°±æ˜¯è¯´ï¼Œæ¢å¥è¯è¯´â€ã€‚</p><blockquote><p>ä¾‹å¥1ï¼šEach of these items are actionable, <strong>i.e</strong>. you can actually do them.</p></blockquote><h2 id="e-g-ä¾‹å¦‚"><a href="#e-g-ä¾‹å¦‚" class="headerlink" title="e.g. ä¾‹å¦‚"></a>e.g. ä¾‹å¦‚</h2><p><strong>e.g.<strong>æ˜¯</strong>exempli gratia</strong>ï¼ˆâ€for example; for instance;such asâ€ã€‚ä¸¾ä¾‹ç”¨ï¼Œæ„ä¸ºï¼šä¾‹å¦‚ï¼‰çš„ç¼©å†™ï¼Œå…¶ç›®çš„ç”¨è‹¥å¹²ä¾‹å­æ¥è®©å‰é¢è¯´æ³•æ›´å…·ä½“ï¼Œæ›´æ˜“æ„ŸçŸ¥ã€‚</p><blockquote><p>ä¾‹å¥1: I like sports, <strong>e.g.</strong>, football.</p></blockquote><h2 id="etc-ç­‰ç­‰"><a href="#etc-ç­‰ç­‰" class="headerlink" title="etc. ç­‰ç­‰"></a>etc. ç­‰ç­‰</h2><p><strong>etc.<strong>æ˜¯</strong>et cetera</strong>(â€œand so forth; and the others; and other things; and the rest; and so onâ€ã€‚ä¸¾ä¾‹ç”¨ï¼Œæ„ä¸ºï¼šç­‰ç­‰)çš„ç¼©å†™ã€‚å®ƒæ”¾åœ¨åˆ—è¡¨çš„æœ€åï¼Œè¡¨ç¤ºå‰é¢çš„ä¾‹å­è¿˜æ²¡åˆ—ä¸¾å®Œï¼Œæœ€ååŠ ä¸ªè¯â€œç­‰ç­‰â€ã€‚</p><blockquote><p>ä¾‹å¥1: I need to go to the store and buy some pie, milk, cheese, <strong>etc.</strong></p></blockquote><blockquote><p>ä¾‹å¥1ï¼šI like to eat boardwalk food, <strong>i.e.</strong>, funnel cake and french fries.<br>ä¾‹å¥2ï¼šI like to eat boardwalk food, <strong>e.g.</strong>, funnel cake and french fries.</p></blockquote><p>ä¾‹å¥1è¡¨ç¤ºåªæœ‰ funnel cake and french friesè¿™ä¸¤ç§boardwalké£Ÿç‰©ï¼Œè€Œä¸”è¿™ä¸¤ç§æˆ‘éƒ½å–œæ¬¢ã€‚ä¾‹å¥2è¡¨ç¤ºæˆ‘å–œæ¬¢boardwalké£Ÿç‰©ï¼Œæ¯”å¦‚ funnel cake and french friesï¼›ä½†æ˜¯è¯¸å¦‚snow cones and corn dogsç­‰å…¶ä»–ç±»å‹ï¼Œæˆ‘ä¹Ÿå¯èƒ½å–œæ¬¢ã€‚</p><h2 id="viz-å³"><a href="#viz-å³" class="headerlink" title="viz. å³"></a>viz. å³</h2><p><strong>viz.<strong>æ˜¯</strong>videlicet</strong>ï¼ˆ â€œnamelyâ€, â€œtowitâ€, â€œpreciselyâ€, â€œthat is to sayâ€ã€‚è¿›ä¸€æ­¥è§£é‡Šç”¨ï¼Œæ„ä¸ºï¼šå³ï¼‰çš„ç¼©å†™ï¼Œä¸e.g.ä¸åŒï¼Œ<strong>vizä½äºåŒä½åˆ—è¡¨ä¹‹å‰ï¼Œè¦æŠŠå®ƒå‰é¢å•è¯æ‰€åŒ…å«çš„é¡¹ç›®å…¨éƒ¨åˆ—å‡ºã€‚</strong>ï¼ˆä¸å¸¸ç”¨ï¼Œæ¸æ¸è¢«i.e.å–ä»£ï¼‰</p><blockquote><p>ä¾‹å¥1ï¼šThe school offers two modules in Teaching English as a Foreign Language, <strong>viz.</strong> Principles and Methods of Language Teaching and Applied Linguistics.ï¼ˆè¯¥æ ¡æä¾›ä¸¤ä¸ªæ¨¡å—ç”¨äºè‹±è¯­ä½œä¸ºå¤–è¯­çš„æ•™å­¦ï¼Œå³è¯­è¨€æ•™å­¦çš„åŸç†æ–¹æ³•å’Œåº”ç”¨è¯­è¨€å­¦ã€‚ï¼‰<br>ä¾‹å¥2: In this paper, a new TDNN architecture with two input variable, <strong>viz.</strong> wave form and its phase difference, is developed to reduce the grain noise.ï¼ˆæœ¬æ–‡æå‡ºäº†ä¸€ç§æ–°çš„TDNNç»“æ„ç”¨äºé™ä½ç²—æ™¶ææ–™ç»“æ„å™ªå£°ï¼Œè¯¥ç»“æ„å…·æœ‰æ³¢å½¢åŠå…¶ç›¸ä½å·®ç»„æˆçš„åŒå˜é‡è¾“å…¥ã€‚ï¼‰</p></blockquote><h2 id="et-al-ç­‰å…¶ä»–äºº"><a href="#et-al-ç­‰å…¶ä»–äºº" class="headerlink" title="et al. ç­‰å…¶ä»–äºº"></a>et al. ç­‰å…¶ä»–äºº</h2><p><strong>et al.<strong>æ˜¯</strong>et alia</strong>ï¼ˆâ€and others; and co-workersâ€ã€‚åœ¨å¼•ç”¨æ–‡çŒ®ä½œè€…æ—¶ç”¨ï¼Œæ„ä¸º:ç­‰å…¶ä»–äººï¼‰çš„ç¼©å†™ã€‚å®ƒå‡ ä¹éƒ½æ˜¯åœ¨åˆ—æ–‡çŒ®ä½œè€…æ—¶ä½¿ç”¨ï¼Œå³æŠŠä¸»è¦ä½œè€…åˆ—å‡ºåï¼Œå…¶å®ƒä½œè€…å…¨æ”¾åœ¨et al. é‡Œé¢ã€‚</p><p><strong>äººçš„åœºåˆç”¨et alï¼Œè€Œæ— ç”Ÿå‘½çš„åœºåˆç”¨etc.(et cetera)ã€‚</strong></p><blockquote><p>ä¾‹å¥1: These results agree with the ones published by Pelon <strong>et al</strong>. (2002).<br>ä¾‹å¥2: Clegg <strong>et al.</strong> (1995) explain that in the electronics industry linear-programming models can be used to analyse the viability of the recovered parts in remanufacturing.ï¼ˆå…‹è±æ ¼ç­‰äººï¼ˆ1995ï¼‰è§£é‡Šè¯´ï¼Œç”µå­è¡Œä¸šçš„çº¿æ€§è§„åˆ’æ¨¡å‹å¯ä»¥ç”¨æ¥åˆ†æåœ¨å†åˆ¶é€ è¿‡ç¨‹ä¸­å›æ”¶é›¶éƒ¨ä»¶çš„å¯è¡Œæ€§ã€‚ï¼‰</p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>äº’è”ç½‘ç»œ</title>
      <link href="/2023/11/29/%E4%BA%92%E8%81%94%E7%BD%91%E7%BB%9C/"/>
      <url>/2023/11/29/%E4%BA%92%E8%81%94%E7%BD%91%E7%BB%9C/</url>
      
        <content type="html"><![CDATA[<h1 id="ç‰‡ä¸Šç½‘ç»œï¼ˆNoCï¼‰"><a href="#ç‰‡ä¸Šç½‘ç»œï¼ˆNoCï¼‰" class="headerlink" title="ç‰‡ä¸Šç½‘ç»œï¼ˆNoCï¼‰"></a>ç‰‡ä¸Šç½‘ç»œï¼ˆNoCï¼‰</h1><p>å•èŠ¯ç‰‡å¤šå¤„ç†å™¨ç³»ç»Ÿï¼ˆChip Multiprocessorï¼ŒCMPï¼‰é€šè¿‡åœ¨å•æ¬¾èŠ¯ç‰‡ä¸Šé›†æˆå¤šä¸ªå¤„ç†å™¨å’Œä»¥æŒ–æ˜çº¿ç¨‹çº§å¹¶è¡Œå’Œä»»åŠ¡çº§å¹¶è¡Œã€‚</p><p>ç„¶è€Œï¼Œä¼ ç»Ÿçš„æ€»çº¿å’Œäº¤å‰å¼€å…³ç­‰ç‰‡ä¸Šäº’è”ç»“æ„çš„<strong>å¯æ‰©å±•æ€§è¾ƒå·®</strong>ï¼Œå®ƒä»¬åªèƒ½æ»¡è¶³è¾ƒå°‘é‡çš„è®¡ç®—æ ¸çš„é€šä¿¡éœ€æ±‚ã€‚å› æ­¤ï¼Œäººä»¬å°†â€œæŠ¥æ–‡äº¤æ¢â€çš„æ€æƒ³å¼•å…¥ç‰‡ä¸Šäº’è”ç»“æ„ä¸­ï¼Œæå‡ºäº†â€œç‰‡ä¸Šç½‘ç»œâ€ï¼ˆNetwork on Chipï¼ŒNoCï¼‰çš„æ¦‚å¿µã€‚</p><h2 id="ç»“æ„"><a href="#ç»“æ„" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h2><p>ç½‘ç»œçš„æ¯ä¸ªèŠ‚ç‚¹åŒ…å«ä¸€ä¸ªå¤„ç†å™¨æ ¸å’Œä¸€ä¸ªè·¯ç”±å™¨ã€‚å¤„ç†å™¨æ ¸é€šè¿‡ç½‘ç»œæ¥å£å°†æŠ¥æ–‡æ³¨å…¥ç½‘ç»œï¼Œæˆ–è€…ä»ç½‘ç»œæ¥æ”¶æŠ¥æ–‡ï¼Œè·¯ç”±å™¨é€šè¿‡ç‰©ç†é“¾è·¯åœ¨ç½‘ç»œèŠ‚ç‚¹é—´è½¬å‘æŠ¥æ–‡ã€‚</p><h2 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h2><p>ä¸ä¼ ç»Ÿçš„æ€»çº¿å’Œäº¤å‰å¼€å…³ç­‰ç‰‡ä¸Šäº’è”ç»“æ„ç›¸æ¯”ï¼Œç‰‡ä¸Šç½‘ç»œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹å’Œä¼˜åŠ¿:</p><ol><li><strong>æ›´é«˜çš„å¯æ‰©å±•æ€§å’Œå¯é‡ç”¨æ€§</strong>ã€‚å½“å¢åŠ å¤„ç†å™¨æ ¸æ•°æ—¶ï¼Œåªéœ€è¦åœ¨ç‰‡ä¸Šç½‘ç»œä¸­å¢åŠ ç›¸åº”æ•°é‡çš„è·¯ç”±å™¨å’Œç½‘ç»œæ¥å£ï¼Œä¸éœ€è¦é‡æ–°è®¾è®¡æ•´ä¸ªç½‘ç»œã€‚ç‰‡ä¸Šç½‘ç»œçš„å¼€é”€ä¸ç½‘ç»œèŠ‚ç‚¹æ•°ç›®æˆçº¿æ€§å…³ç³»ï¼Œæ˜“äºæ‰©å±•ã€‚æ–°å¢è·¯ç”±å™¨ä¸ç°æœ‰è·¯ç”±å™¨çš„ç»“æ„åŸºæœ¬ç›¸åŒï¼Œå¯ä»¥å¤ç”¨è·¯ç”±å™¨è®¾è®¡ã€‚</li><li>é€šè¿‡è·¯ç”±å™¨<strong>å°†èŠ¯ç‰‡é•¿è¿çº¿åˆ‡åˆ†æˆå¤šæ¡çŸ­è¿çº¿</strong>ï¼Œä»è€Œå¯ä»¥æ§åˆ¶é€šä¿¡å»¶è¿Ÿå’ŒåŠŸè€—ã€‚</li><li><strong>é‡‡ç”¨åˆ†å¸ƒå¼æ§åˆ¶ç­–ç•¥</strong>ï¼Œæ¯”é‡‡ç”¨é›†ä¸­å¼æ§åˆ¶ç­–ç•¥çš„æ€»çº¿æ”¯æŒæ›´é«˜çš„äº‹åŠ¡å¹¶å‘æ€§ã€‚</li><li>ç”±äºç‰‡ä¸Šç½‘ç»œæ—¶ç›¸äº’ç‹¬ç«‹çš„ï¼Œå®ƒå¯ä»¥é‡‡ç”¨å…¨å±€å¼‚æ­¥å±€éƒ¨åŒæ­¥ï¼ˆGlobal Asynchronous Local Synchronousï¼ŒGALSï¼‰çš„æ—¶é’Ÿç­–ç•¥ï¼Œ<strong>å°†ç½‘ç»œåˆ’åˆ†æˆå¤šä¸ªç»†ç²’åº¦æ—¶é’ŸåŸŸ</strong>ï¼Œç‹¬ç«‹æ§åˆ¶æ¯ä¸ªæ—¶é’ŸåŸŸçš„ç”µå‹å’Œé¢‘ç‡ï¼Œçµæ´»ç®¡ç†åŠŸè€—ã€‚</li></ol><h2 id="ç‰‡ä¸Šç½‘ç»œä¸ç‰‡å¤–ç½‘ç»œçš„å·®å¼‚"><a href="#ç‰‡ä¸Šç½‘ç»œä¸ç‰‡å¤–ç½‘ç»œçš„å·®å¼‚" class="headerlink" title="ç‰‡ä¸Šç½‘ç»œä¸ç‰‡å¤–ç½‘ç»œçš„å·®å¼‚"></a>ç‰‡ä¸Šç½‘ç»œä¸ç‰‡å¤–ç½‘ç»œçš„å·®å¼‚</h2><p>ç‰‡ä¸Šç½‘ç»œä¸ç‰‡å¤–ç½‘ç»œéƒ½é‡‡ç”¨äº†â€œæŠ¥æ–‡äº¤æ¢â€çš„æ€æƒ³ï¼Œä½†æœ‰è®¸å¤šå·®å¼‚ï¼š</p><ol><li>ç‰‡ä¸Šç½‘ç»œäº’è”çš„æ˜¯å•ä¸ªèŠ¯ç‰‡ä¸Šçš„å¤šä¸ªå¤„ç†å™¨ï¼›è€Œç‰‡å¤–ç½‘ç»œæ˜¯ç”¨äºè¶…çº§è®¡ç®—æœºå’Œé›†ç¾¤ç³»ç»Ÿçš„ã€‚</li><li><strong>é“¾è·¯èµ„æºå·®å¼‚</strong>ã€‚ç°ä»£é›†æˆç”µè·¯çš„å¤šå±‚äº’è”é‡‘å±å±‚ä¸ºç‰‡ä¸Šç½‘ç»œæä¾›äº†ä¸°å¯Œçš„è¿çº¿èµ„æºï¼Œå…è®¸ç›¸é‚»è·¯ç”±å™¨é—´çš„é“¾è·¯å¸¦å®½è¾¾åˆ°<u>æ•°ç™¾ä½</u>ï¼›ç„¶è€Œå¯¹äºç‰‡å¤–ç½‘ç»œï¼Œå—é™äºèŠ¯ç‰‡å¼•è„šæ•°ç›®é™åˆ¶ï¼Œç‰‡å¤–ç½‘ç»œçš„é“¾è·¯å¸¦å®½ä»…ä¸ºæ•°åä½ã€‚</li><li><strong>å»¶è¿Ÿæ„æˆå·®å¼‚</strong>ã€‚ç‰‡ä¸Šç½‘ç»œç›¸é‚»è·¯ç”±å™¨ä¹‹é—´è·ç¦»è¾ƒçŸ­ï¼Œä¸€èˆ¬å¯ä»¥åœ¨ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸå†…å®Œæˆé“¾è·¯ä¼ è¾“ï¼›ç‰‡å¤–ç½‘ç»œç›¸é‚»è·¯ç”±å™¨ä¹‹é—´è·ç¦»è¾ƒå¤§ï¼Œé“¾è·¯ä¼ è¾“éœ€è¦å¤šä¸ªæ—¶é’Ÿå‘¨æœŸã€‚ç„¶è€Œè¾ƒå°çš„ç‰‡ä¸Šç½‘ç»œé“¾è·¯å»¶è¿Ÿå¢åŠ äº†è·¯ç”±å™¨å»¶è¿Ÿå¯¹æ–°èƒ½çš„å½±å“ã€‚</li><li><strong>ä¸²è¡Œæ€»çº¿Vså¹¶è¡Œæ€»çº¿</strong>ã€‚ç‰‡ä¸Šç½‘ç»œä¸»è¦é‡‡ç”¨å¹¶è¡Œæ€»çº¿ï¼Œä½†ç”±äºç‰‡å¤–å¹¶è¡Œæ€»çº¿çš„ä¸²æ‰°éš¾ä»¥æ§åˆ¶ï¼Œç‰‡å¤–ç½‘è·¯å¤§å¤šé‡‡ç”¨ä¸²è¡Œæ€»çº¿ã€‚</li><li><strong>é¢ç§¯å’ŒåŠŸè€—èµ„æº</strong>ã€‚ç‰‡ä¸Šç½‘ç»œä¸å¤„ç†å™¨æ ¸ç«äº‰èŠ¯ç‰‡æœ‰é™çš„é¢ç§¯å’ŒåŠŸè€—èµ„æºï¼Œä¸é‡‡ç”¨ç‹¬ç«‹èŠ¯ç‰‡å®ç°çš„ç‰‡å¤–ç½‘ç»œè·¯ç”±å™¨ç›¸æ¯”ï¼Œç‰‡ä¸Šç½‘ç»œè·¯ç”±å™¨é¢ä¸´ç€æ›´ä¸ºä¸¥æ ¼çš„é¢ç§¯å’ŒåŠŸè€—é™åˆ¶ã€‚</li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> äº’è”ç½‘ç»œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gem5æ¨¡æ‹Ÿå™¨å­¦ä¹ ï¼ˆå…«ï¼‰â€”â€”â€”â€”é€šè¿‡Rubyå®ç°ç¼“å­˜ä¸€è‡´æ€§åè®®</title>
      <link href="/2023/11/25/Gem5%E6%A8%A1%E6%8B%9F%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E5%85%AB%EF%BC%89/"/>
      <url>/2023/11/25/Gem5%E6%A8%A1%E6%8B%9F%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E5%85%AB%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="Ruby"><a href="#Ruby" class="headerlink" title="Ruby"></a>Ruby</h1><p>Rubyæ˜¯ä¸€ä¸ªè¯¦ç»†çš„å†…å­˜å­ç³»ç»Ÿçš„æ¨¡æ‹Ÿæ¨¡å‹ã€‚å¯ä»¥é€šè¿‡å„ç§æ›¿æ¢ç­–ç•¥ã€ä¸€è‡´æ€§åè®®å®ç°ã€äº’è¿ç½‘ç»œã€DMAå’Œå†…å­˜æ§åˆ¶å™¨ã€å‘èµ·å†…å­˜è¯·æ±‚å’Œå¤„ç†å“åº”çš„å„ç§å®šåºå™¨æ¥å»ºæ¨¡åŒ…å«ï¼ˆinclusiveï¼‰&#x2F;ç‹¬å ï¼ˆexclusiveï¼‰ç¼“å­˜å±‚æ¬¡ç»“æ„ã€‚è¿™äº›æ¨¡å‹æ˜¯æ¨¡å—åŒ–çš„ã€çµæ´»çš„å’Œé«˜åº¦å¯é…ç½®çš„ã€‚</p><p>Rubyæœ‰ä»¥ä¸‹ä¸‰ä¸ªç‰¹ç‚¹ï¼š</p><ul><li><strong>å…³æ³¨ç‚¹åˆ†ç¦»</strong>ã€‚å°†å†…å­˜ç³»ç»Ÿçš„å„ä¸ªæ¨¡å‹æ¨¡å—åŒ–ï¼Œä¾‹å¦‚ï¼Œä¸€è‡´æ€§åè®®è§„èŒƒä¸æ›¿æ¢ç­–ç•¥å’Œç¼“å­˜ç´¢å¼•æ˜ å°„æ˜¯åˆ†å¼€çš„ï¼Œç½‘ç»œæ‹“æ‰‘ç»“æ„ä¸å®ç°ä¹Ÿæ˜¯åˆ†å¼€æŒ‡å®šçš„ã€‚</li><li><strong>ä¸°å¯Œçš„å¯é…ç½®æ€§</strong>ã€‚å‡ ä¹æ‰€æœ‰å½±å“å†…å­˜å±‚æ¬¡ç»“æ„çš„åŠŸèƒ½å’Œæ—¶åºéƒ½å¯ä»¥æ§åˆ¶ã€‚</li><li><strong>å¿«é€Ÿçš„åŸå‹è®¾è®¡</strong>ã€‚ä½¿ç”¨ä¸€ç§é«˜çº§è§„èŒƒè¯­è¨€SLICCæ¥æŒ‡å®šå„ç§æ§åˆ¶å™¨çš„åŠŸèƒ½ã€‚</li></ul><p><strong>SLICC + ä¸€è‡´æ€§åè®®</strong></p><p>SLICCï¼šSpecification Language for Implementing Cache Coherenceï¼Œæ˜¯ä¸€ç§ç‰¹å®šé¢†åŸŸçš„è¯­è¨€ï¼Œç”¨äºæŒ‡å®šç¼“å­˜ä¸€è‡´æ€§åè®®ã€‚</p><p>ç¼“å­˜ä¸€è‡´æ€§åè®®ä»¥çŠ¶æ€æœºçš„æ–¹å¼å·¥ä½œï¼Œè€ŒSLICCç”¨äºæŒ‡å®šçŠ¶æ€æœºçš„è¡Œä¸ºã€‚SLICCæ–‡ä»¶ä»¥â€œ.smâ€ç»“å°¾ï¼Œå®ƒä»¬æ˜¯çŠ¶æ€æœºæ–‡ä»¶ã€‚æ¯ä¸ªæ–‡ä»¶æè¿°çŠ¶æ€ã€æŸäº›äº‹ä»¶ä»å¼€å§‹çŠ¶æ€åˆ°ç»“æŸçŠ¶æ€çš„è½¬æ¢ï¼Œä»¥åŠåœ¨è½¬æ¢è¿‡ç¨‹ä¸­è¦é‡‡å–çš„æ“ä½œã€‚</p><p>æ¯ä¸ªä¸€è‡´æ€§åè®®éƒ½ç”±å¤šä¸ªSLICCçŠ¶æ€æœºæ–‡ä»¶ç»„æˆã€‚è¿™äº›æ–‡ä»¶æ˜¯ç”¨SLCCç¼–è¯‘å™¨ç¼–è¯‘çš„ï¼Œè¯¥ç¼–è¯‘å™¨æ˜¯ç”¨Pythonç¼–å†™çš„ï¼Œä¹Ÿæ˜¯gem5æºä»£ç çš„ä¸€éƒ¨åˆ†ã€‚SLICç¼–è¯‘å™¨<u>è·å–çŠ¶æ€æœºæ–‡ä»¶</u>å¹¶<u>è¾“å‡ºä¸€ç»„C++æ–‡ä»¶</u>ï¼Œè¿™äº›æ–‡ä»¶ä¸gem5çš„æ‰€æœ‰å…¶ä»–æ–‡ä»¶ä¸€èµ·ç¼–è¯‘ã€‚è¿™äº›æ–‡ä»¶åŒ…æ‹¬SimObjectå£°æ˜æ–‡ä»¶ä»¥åŠSimObjectså’Œå…¶ä»–C++å¯¹è±¡çš„å®ç°æ–‡ä»¶ã€‚</p><h1 id="å®ç°ä¸€è‡´æ€§åè®®çš„æ­¥éª¤"><a href="#å®ç°ä¸€è‡´æ€§åè®®çš„æ­¥éª¤" class="headerlink" title="å®ç°ä¸€è‡´æ€§åè®®çš„æ­¥éª¤"></a>å®ç°ä¸€è‡´æ€§åè®®çš„æ­¥éª¤</h1><p>ä»¥ä¸‹æ˜¯å¯¹å®˜ç½‘æ•™ç¨‹<a href="https://www.gem5.org/documentation/learning_gem5/part3/MSIintro/">gem5: Introduction to Ruby</a>çš„å†…å®¹æ•´ç†ï¼Œæ•™ç¨‹çš„ç›®æ ‡æ˜¯å®ç°MSIåè®®ï¼Œåè®®çš„å…·ä½“å†…å®¹å¯ä»¥åœ¨ã€ŠA Primer on Memory Consistency and Cache Coherenceã€‹ä¹¦çš„ç¬¬8.2èŠ‚æ‰¾åˆ° (pages 141-149)</p><h2 id="1-æ³¨å†ŒçŠ¶æ€æœº"><a href="#1-æ³¨å†ŒçŠ¶æ€æœº" class="headerlink" title="1. æ³¨å†ŒçŠ¶æ€æœº"></a>1. æ³¨å†ŒçŠ¶æ€æœº</h2><p>MSIåè®®æ˜¯é€šè¿‡SLICCè¯­è¨€ç¼–å†™çš„çŠ¶æ€æœºæ–‡ä»¶å®ç°çš„ï¼Œè¿™äº›çŠ¶æ€æœºæ–‡ä»¶æ˜¯ç”¨SLCCç¼–è¯‘å™¨ç¼–è¯‘çš„ï¼Œä¼šé€šè¿‡sconsä¸gem5å…¶ä»–æ–‡ä»¶ä¸€èµ·ç¼–è¯‘ï¼Œå› æ­¤éœ€è¦ä¸ºSConsåˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œä»¥ä¾¿çŸ¥é“è¦ç¼–è¯‘ä»€ä¹ˆã€‚è¿™é‡Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª<code>Sconsopts</code>æ–‡ä»¶ï¼Œè€Œä¸æ˜¯<code>Sconscript</code>æ–‡ä»¶ï¼Œè¿™æ˜¯å› ä¸º<code>Sconsopts</code>ä¼šåœ¨<code>Sconscript</code>ä¹‹å‰æ‰§è¡Œï¼Œè€Œæˆ‘ä»¬ä¹Ÿéœ€è¦åœ¨ç¼–è¯‘gem5ä¹‹å‰ç¼–è¯‘çŠ¶æ€æœºæ–‡ä»¶ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Import(&#x27;*&#x27;)</span><br><span class="line"># æ³¨å†Œåè®®åâ€˜MSIâ€™ï¼ŒSconså°†å‡å®šä¸€ä¸ªåä¸ºMSI.sliccçš„æ–‡ä»¶</span><br><span class="line">main.Append(ALL_PROTOCOLS=[&#x27;MSI&#x27;])</span><br><span class="line"># å‘Šè¯‰SConsåœ¨å½“å‰ç›®å½•ä¸­æŸ¥æ‰¾è¦ä¼ é€’ç»™SLCCç¼–è¯‘å™¨çš„æ–‡ä»¶ã€‚</span><br><span class="line">main.Append(PROTOCOL_DIRS=[Dir(&#x27;.&#x27;)])</span><br></pre></td></tr></table></figure><h2 id="2-ç¼–å†™çŠ¶æ€æœºæ–‡ä»¶"><a href="#2-ç¼–å†™çŠ¶æ€æœºæ–‡ä»¶" class="headerlink" title="2.ç¼–å†™çŠ¶æ€æœºæ–‡ä»¶"></a>2.ç¼–å†™çŠ¶æ€æœºæ–‡ä»¶</h2><p>ç¼–å†™çŠ¶æ€æœºæ–‡ä»¶æ˜¯å®ç°ä¸€è‡´æ€§åè®®çš„æœ€ä¸»è¦å·¥ä½œï¼ŒçŠ¶æ€æœºæ–‡ä»¶é€šå¸¸åŒ…å«ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š</p><ul><li><p>Parameters</p><p>These are the parameters for the SimObject that will be generated from the SLICC code.</p></li><li><p>Declaring required structures and functions</p><p>This section declares the states, events, and many other required structures for the state machine.</p></li><li><p>In port code blocks</p><p>Contain code that looks at incoming messages from the (<code>in_port</code>) message buffers and determines what events to trigger.</p></li><li><p>Actions</p><p>These are simple one-effect code blocks (e.g., send a message) that are executed when going through a transition.</p></li><li><p>Transitions</p><p>Specify actions to execute given a starting state and an event and the final state. This is the meat of the state machine definition.</p></li></ul><p>Over the next few sections we will go over how to write each of these components of the protocol.</p><h3 id="2-1-çŠ¶æ€æœºå£°æ˜"><a href="#2-1-çŠ¶æ€æœºå£°æ˜" class="headerlink" title="2.1 çŠ¶æ€æœºå£°æ˜"></a>2.1 çŠ¶æ€æœºå£°æ˜</h3><p>åˆ›å»ºä¸€ä¸ªåä¸º<code>MSI-call.sm</code>çš„æ–‡ä»¶ï¼Œå¹¶æŒ‰ä»¥ä¸‹æ ¼å¼å£°æ˜çŠ¶æ€æœº</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">machine(MachineType:L1Cache, &quot;MSI cache&quot;)</span><br><span class="line">    : &lt;parameters&gt;</span><br><span class="line">&#123;</span><br><span class="line">    &lt;All state machine code&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>MachineType:L1Cache</code>å°†çŠ¶æ€æœºå‘½åä¸º<code>L1Cache</code>ï¼ŒSLICC å°†ä½¿ç”¨è¯¥åç§°ä¸ºæˆ‘ä»¬ç”Ÿæˆè®¸å¤šä¸åŒçš„å¯¹è±¡ã€‚ä¾‹å¦‚ï¼Œä¸€æ—¦ç¼–è¯‘äº†è¿™ä¸ªæ–‡ä»¶ï¼Œå°±ä¼šæœ‰ä¸€ä¸ªæ–°çš„ SimObject: <code>L1Cache_Controller</code> ä½œä¸ºç¼“å­˜æ§åˆ¶å™¨ã€‚è¿™ä¸ªå£°æ˜ä¸­è¿˜åŒ…æ‹¬å¯¹è¿™ä¸ªçŠ¶æ€æœºçš„æè¿°: â€œ MSI cacheâ€ã€‚</p><h3 id="2-2-çŠ¶æ€æœºå‚æ•°å£°æ˜"><a href="#2-2-çŠ¶æ€æœºå‚æ•°å£°æ˜" class="headerlink" title="2.2 çŠ¶æ€æœºå‚æ•°å£°æ˜"></a>2.2 çŠ¶æ€æœºå‚æ•°å£°æ˜</h3><p>çŠ¶æ€æœºå‚æ•°çš„å£°æ˜åœ¨å†’å·ï¼ˆï¼šï¼‰ä¹‹å</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">machine(MachineType:L1Cache, &quot;MSI cache&quot;)</span><br><span class="line">: Sequencer *sequencer;</span><br><span class="line">  CacheMemory *cacheMemory;</span><br><span class="line">  bool send_evictions;</span><br><span class="line">  # â€œToâ€ buffer</span><br><span class="line">  MessageBuffer * requestToDir, network=&quot;To&quot;, virtual_network=&quot;0&quot;, vnet_type=&quot;request&quot;;</span><br><span class="line">  MessageBuffer * responseToDirOrSibling, network=&quot;To&quot;, virtual_network=&quot;2&quot;, vnet_type=&quot;response&quot;;</span><br><span class="line">  # â€œFromâ€ buffer</span><br><span class="line">  MessageBuffer * forwardFromDir, network=&quot;From&quot;, virtual_network=&quot;1&quot;, vnet_type=&quot;forward&quot;;</span><br><span class="line">  MessageBuffer * responseFromDirOrSibling, network=&quot;From&quot;, virtual_network=&quot;2&quot;, vnet_type=&quot;response&quot;;</span><br><span class="line">  # â€œToâ€ buffer</span><br><span class="line">  MessageBuffer * mandatoryQueue;</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>æ’åºå™¨ï¼ˆSequencerï¼‰</p><p>Sequenceræ˜¯ä¸€ä¸ªå¸¦æœ‰ä»ç«¯å£çš„gem5 MemObjectï¼Œå› æ­¤å®ƒå¯ä»¥æ¥å—æ¥è‡ªå…¶ä»–å¯¹è±¡çš„å†…å­˜è¯·æ±‚ã€‚Swquenceræ¥å—æ¥è‡ªCPUï¼ˆæˆ–å…¶ä»–ä¸»ç«¯å£ï¼‰çš„è¯·æ±‚ï¼Œå¹¶å°†gem5æ•°æ®åŒ…è½¬æ¢ä¸ºRubyRequestã€‚æœ€åï¼ŒRubyRequestè¢«æ¨é€åˆ°çŠ¶æ€æœºçš„å¼ºåˆ¶é˜Ÿåˆ—ï¼ˆcommandoryQueueï¼‰ä¸­ã€‚</p></li><li><p>ç¼“å­˜æ•°æ®ï¼ˆCache Memoryï¼‰</p><p>ç”¨äºä¿å­˜ç¼“å­˜æ•°æ®ï¼ˆå³ç¼“å­˜æ¡ç›®ï¼‰çš„å†…å®¹ã€‚</p></li><li><p>æ¶ˆæ¯ç¼“å†²åŒºï¼ˆMessageBufferï¼‰</p><p>æ¶ˆæ¯ç¼“å†²åŒºæ˜¯çŠ¶æ€æœºå’ŒRubyç½‘ç»œä¹‹é—´çš„æ¥å£ã€‚é€šè¿‡æ¶ˆæ¯ç¼“å†²åŒºå‘é€å’Œæ¥æ”¶æ¶ˆæ¯ã€‚å› æ­¤ï¼Œå¯¹äºæˆ‘ä»¬åè®®ä¸­çš„æ¯ä¸ªè™šæ‹Ÿé€šé“ï¼Œæˆ‘ä»¬éƒ½éœ€è¦ä¸€ä¸ªå•ç‹¬çš„æ¶ˆæ¯ç¼“å†²åŒºã€‚</p><p>è™šæ‹Ÿç½‘ç»œçš„ä½œç”¨æ˜¯é˜²æ­¢æ­»é”ã€‚MSIåè®®éœ€è¦ä¸‰ä¸ªä¸åŒçš„è™šæ‹Ÿç½‘ç»œã€‚åœ¨è¯¥åè®®ä¸­ï¼Œæœ€é«˜ä¼˜å…ˆçº§æ˜¯å“åº”Responseï¼ˆè™šæ‹Ÿç½‘ç»œ2ï¼‰ï¼Œå…¶æ¬¡æ˜¯è½¬å‘çš„è¯·æ±‚Forwarded Requestsï¼ˆè™šæ‹Ÿç½‘ç»œ1ï¼‰ï¼Œç„¶åè¯·æ±‚Requestså…·æœ‰æœ€ä½ä¼˜å…ˆçº§ï¼ˆè™šæ‹Ÿç½‘ç»œ0ï¼‰ã€‚</p><p>ä»£ç ä¸­æœ‰ä¸¤ä¸ªâ€Toâ€ bufferï¼Œä¸¤ä¸ªâ€Fromâ€ bufferå’Œä¸€ä¸ªSpecial bufferã€‚å…¶ä¸­ï¼Œâ€Toâ€ bufferç±»ä¼¼äºgem5ä¸­çš„ä¸»ç«¯å£ï¼Œæ˜¯æ­¤æ§åˆ¶å™¨ç”¨æ¥å‘ç³»ç»Ÿä¸­çš„å…¶ä»–æ§åˆ¶å™¨å‘é€æ¶ˆæ¯çš„æ¶ˆæ¯ç¼“å†²åŒºï¼›â€Fromâ€ bufferç±»ä¼¼äºgem5ä¸­çš„ä»ç«¯å£ï¼Œæ˜¯æ­¤æ§åˆ¶å™¨ç”¨æ¥æ¥æ”¶ç³»ç»Ÿä¸­å…¶ä»–æ§åˆ¶å™¨å‘é€çš„æ¶ˆæ¯çš„æ¶ˆæ¯ç¼“å†²åŒºï¼›å¯¹äºSpecial bufferï¼ŒSequencerä½¿ç”¨æ­¤æ¶ˆæ¯ç¼“å†²åŒºå°†gem5æ•°æ®åŒ…è½¬æ¢ä¸ºRubyè¯·æ±‚ã€‚ä¸å…¶ä»–æ¶ˆæ¯ç¼“å†²åŒºä¸åŒï¼ŒcommandoryQueueä¸è¿æ¥åˆ°Rubyç½‘ç»œï¼Œå¹¶ä¸”ï¼Œæ­¤æ¶ˆæ¯ç¼“å†²åŒºçš„åç§°æ˜¯ç¡¬ç¼–ç çš„ï¼Œå¿…é¡»ä¸ºâ€œcommandoryQueueâ€</p><p>ä¸¤ä¸ªâ€Toâ€ bufferä¸€ä¸ªç”¨äºä½ä¼˜å…ˆçº§è¯·æ±‚ï¼Œå¦ä¸€ä¸ªç”¨äºé«˜ä¼˜å…ˆçº§å“åº”ã€‚ä¼˜å…ˆçº§åŸºäºå…¶ä»–æ§åˆ¶å™¨æŸ¥çœ‹æ¶ˆæ¯ç¼“å†²åŒºçš„é¡ºåºã€‚ç±»ä¼¼åœ°ï¼Œä¸¤ä¸ªâ€Fromâ€ bufferä½¿è¯¥ç¼“å­˜å¯ä»¥é€šè¿‡ä¸¤ç§ä¸åŒçš„æ–¹å¼æ¥æ”¶æ¶ˆæ¯ï¼Œè¦ä¹ˆä½œä¸ºæ¥è‡ªç›®å½•çš„è½¬å‘è¯·æ±‚ï¼Œè¦ä¹ˆä½œä¸ºå¯¹è¯¥æ§åˆ¶å™¨å‘å‡ºçš„è¯·æ±‚çš„å“åº”ã€‚å“åº”çš„ä¼˜å…ˆçº§é«˜äºè½¬å‘çš„è¯·æ±‚ã€‚</p></li></ul><p>å¦‚å‰æ‰€è¿°ï¼ŒçŠ¶æ€æœºæ–‡ä»¶åœ¨ç»è¿‡SLICCç¼–è¯‘åä¼šæˆä¸ºSimobjectæ–‡ä»¶ï¼Œä»¥ä¸Šä»£ç ç¼–è¯‘åäº§ç”Ÿçš„æ–‡ä»¶ä¸º<code>L1Cache_Controller.py</code>ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">from m5.params import *</span><br><span class="line">from m5.SimObject import SimObject</span><br><span class="line">from Controller import RubyController</span><br><span class="line"></span><br><span class="line">class L1Cache_Controller(RubyController):</span><br><span class="line">    type = &#x27;L1Cache_Controller&#x27;</span><br><span class="line">    cxx_header = &#x27;mem/protocol/L1Cache_Controller.hh&#x27;</span><br><span class="line">    sequencer = Param.RubySequencer(&quot;&quot;)</span><br><span class="line">    cacheMemory = Param.RubyCache(&quot;&quot;)</span><br><span class="line">    send_evictions = Param.Bool(&quot;&quot;)</span><br><span class="line">    requestToDir = Param.MessageBuffer(&quot;&quot;)</span><br><span class="line">    responseToDirOrSibling = Param.MessageBuffer(&quot;&quot;)</span><br><span class="line">    forwardFromDir = Param.MessageBuffer(&quot;&quot;)</span><br><span class="line">    responseFromDirOrSibling = Param.MessageBuffer(&quot;&quot;)</span><br><span class="line">    mandatoryQueue = Param.MessageBuffer(&quot;&quot;)</span><br></pre></td></tr></table></figure><p>å¯¹è¿™ä¸ªæ–‡ä»¶ï¼Œ<strong>ä¸èƒ½åšä»»ä½•ä¿®æ”¹ï¼</strong></p><h3 id="2-3-çŠ¶æ€å£°æ˜"><a href="#2-3-çŠ¶æ€å£°æ˜" class="headerlink" title="2.3 çŠ¶æ€å£°æ˜"></a>2.3 çŠ¶æ€å£°æ˜</h3><p>é€šè¿‡<code>state_declaration</code>å£°æ˜çŠ¶æ€æœºçš„æ‰€æœ‰ç¨³å®šå’Œç¬æ€ã€‚å¯¹ç¬æ€çš„å‘½åéµå¾ªSorinç­‰äººçš„å‘½åçº¦å®šã€‚ä¾‹å¦‚ï¼Œç¬æ€â€œIM_ADâ€å¯¹åº”äºåœ¨ç­‰å¾…ç¡®è®¤ï¼ˆAï¼‰å’Œæ•°æ®ï¼ˆDï¼‰æ—¶ä»æ— æ•ˆï¼ˆIï¼‰ç§»åŠ¨åˆ°å·²ä¿®æ”¹ï¼ˆMï¼‰ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">state_declaration(State, desc=&quot;Cache states&quot;) &#123;</span><br><span class="line">    I,      AccessPermission:Invalid,</span><br><span class="line">                desc=&quot;Not present/Invalid&quot;;</span><br><span class="line"></span><br><span class="line">    // States moving out of I</span><br><span class="line">    IS_D,   AccessPermission:Invalid,</span><br><span class="line">                desc=&quot;Invalid, moving to S, waiting for data&quot;;</span><br><span class="line">    IM_AD,  AccessPermission:Invalid,</span><br><span class="line">                desc=&quot;Invalid, moving to M, waiting for acks and data&quot;;</span><br><span class="line">    IM_A,   AccessPermission:Busy,</span><br><span class="line">                desc=&quot;Invalid, moving to M, waiting for acks&quot;;</span><br><span class="line"></span><br><span class="line">    S,      AccessPermission:Read_Only,</span><br><span class="line">                desc=&quot;Shared. Read-only, other caches may have the block&quot;;</span><br><span class="line"></span><br><span class="line">    // States moving out of S</span><br><span class="line">    SM_AD,  AccessPermission:Read_Only,</span><br><span class="line">                desc=&quot;Shared, moving to M, waiting for acks and &#x27;data&#x27;&quot;;</span><br><span class="line">    SM_A,   AccessPermission:Read_Only,</span><br><span class="line">                desc=&quot;Shared, moving to M, waiting for acks&quot;;</span><br><span class="line"></span><br><span class="line">    M,      AccessPermission:Read_Write,</span><br><span class="line">                desc=&quot;Modified. Read &amp; write permissions. Owner of block&quot;;</span><br><span class="line"></span><br><span class="line">    // States moving to Invalid</span><br><span class="line">    MI_A,   AccessPermission:Busy,</span><br><span class="line">                desc=&quot;Was modified, moving to I, waiting for put ack&quot;;</span><br><span class="line">    SI_A,   AccessPermission:Busy,</span><br><span class="line">                desc=&quot;Was shared, moving to I, waiting for put ack&quot;;</span><br><span class="line">    II_A,   AccessPermission:Invalid,</span><br><span class="line">                desc=&quot;Sent valid data before receiving put ack. &quot;Waiting for put ack.&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¯ä¸ªçŠ¶æ€éƒ½æœ‰ä¸€ä¸ªç›¸å…³çš„è®¿é—®æƒé™<code>AccessPermission</code>ï¼ŒåŒ…æ‹¬æ— æ•ˆï¼ˆ<strong>Invalid</strong>ï¼‰ã€ä¸å­˜åœ¨ï¼ˆ<strong>NotPresent</strong>ï¼‰ã€å¿™ï¼ˆ<strong>Busy</strong>ï¼‰ã€åªè¯»ï¼ˆ<strong>Read_Only</strong>ï¼‰ã€è¯»å†™ï¼ˆ<strong>Read_Write</strong>ï¼‰ï¼Œè®¿é—®æƒé™ç”¨äºå¯¹ç¼“å­˜è¿›è¡ŒåŠŸèƒ½è®¿é—®<em>functional accesses</em>ã€‚å¯¹äºåŠŸèƒ½è®¿é—®ï¼Œå°†æ£€æŸ¥æ‰€æœ‰ç¼“å­˜ï¼Œçœ‹å®ƒä»¬æ˜¯å¦æœ‰å…·æœ‰åŒ¹é…åœ°å€çš„ç›¸åº”å—ã€‚</p><h3 id="2-4-äº‹ä»¶å£°æ˜"><a href="#2-4-äº‹ä»¶å£°æ˜" class="headerlink" title="2.4 äº‹ä»¶å£°æ˜"></a>2.4 äº‹ä»¶å£°æ˜</h3><p>å£°æ˜ç”±è¯¥ç¼“å­˜æ§åˆ¶å™¨çš„ä¼ å…¥æ¶ˆæ¯è§¦å‘çš„æ‰€æœ‰äº‹ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">enumeration(Event, desc=&quot;Cache events&quot;) &#123;</span><br><span class="line">    // From the processor/sequencer/mandatory queue</span><br><span class="line">    Load,           desc=&quot;Load from processor&quot;;</span><br><span class="line">    Store,          desc=&quot;Store from processor&quot;;</span><br><span class="line"></span><br><span class="line">    // Internal event (only triggered from processor requests)</span><br><span class="line">    Replacement,    desc=&quot;Triggered when block is chosen as victim&quot;;</span><br><span class="line"></span><br><span class="line">    // Forwarded request from other cache via dir on the forward network</span><br><span class="line">    FwdGetS,        desc=&quot;Directory sent us a request to satisfy GetS. We must have the block in M to respond to this.&quot;;</span><br><span class="line">    FwdGetM,        desc=&quot;Directory sent us a request to satisfy GetM. We must have the block in M to respond to this.&quot;;</span><br><span class="line">    Inv,            desc=&quot;Invalidate from the directory.&quot;;</span><br><span class="line">    PutAck,         desc=&quot;Response from directory after we issue a put. This must be on the fwd network to avoid deadlock.&quot;;</span><br><span class="line"></span><br><span class="line">    // Responses from directory</span><br><span class="line">    DataDirNoAcks,  desc=&quot;Data from directory (acks = 0)&quot;;</span><br><span class="line">    DataDirAcks,    desc=&quot;Data from directory (acks &gt; 0)&quot;;</span><br><span class="line"></span><br><span class="line">    // Responses from other caches</span><br><span class="line">    DataOwner,      desc=&quot;Data from owner&quot;;</span><br><span class="line">    InvAck,         desc=&quot;Invalidation ack from other cache after Inv&quot;;</span><br><span class="line"></span><br><span class="line">    // Special event to simplify implementation</span><br><span class="line">    LastInvAck,     desc=&quot;Triggered after the last ack is received&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>çŠ¶æ€å’Œäº‹ä»¶å¯ä»¥å‚è€ƒè¡¨8.3çš„ç¼“å­˜æ§åˆ¶å™¨è½¬æ¢è¡¨</p><p><img src="/Gem5%E6%A8%A1%E6%8B%9F%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E5%85%AB%EF%BC%89/image-20231204190803198.png" alt="image-20231204190803198"></p><h3 id="2-5-ç”¨æˆ·å®šä¹‰ç»“æ„ä½“"><a href="#2-5-ç”¨æˆ·å®šä¹‰ç»“æ„ä½“" class="headerlink" title="2.5 ç”¨æˆ·å®šä¹‰ç»“æ„ä½“"></a>2.5 ç”¨æˆ·å®šä¹‰ç»“æ„ä½“</h3><p>ä¸‹é¢å®šä¹‰çš„æ˜¯åœ¨è¿™ä¸ªæ§åˆ¶å™¨çš„å…¶ä»–åœ°æ–¹ç”¨åˆ°çš„ç»“æ„ä½“</p><h4 id="Entry"><a href="#Entry" class="headerlink" title="Entry"></a>Entry</h4><p>è¿™æ˜¯å­˜å‚¨åœ¨CacheMemoryä¸­çš„ç»“æ„ã€‚å®ƒåªéœ€è¦åŒ…å«æ•°æ®å’ŒçŠ¶æ€</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">structure(Entry, desc=&quot;Cache entry&quot;, interface=&quot;AbstractCacheEntry&quot;) &#123;</span><br><span class="line">    State CacheState,        desc=&quot;cache state&quot;;</span><br><span class="line">    DataBlock DataBlk,       desc=&quot;Data in the block&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="TBE"><a href="#TBE" class="headerlink" title="TBE"></a>TBE</h4><p>TBEæ˜¯â€œäº‹åŠ¡ç¼“å†²åŒºæ¡ç›®â€ã€‚è¿™å­˜å‚¨äº†ç¬æ€æœŸé—´æ‰€éœ€çš„ä¿¡æ¯ã€‚è¿™å°±åƒMSHRã€‚å®ƒåœ¨è¯¥åè®®ä¸­èµ·MSHRçš„ä½œç”¨ï¼Œä½†è¯¥æ¡ç›®ä¹Ÿè¢«åˆ†é…ç”¨äºå…¶ä»–ç”¨é€”ã€‚åœ¨è¯¥åè®®ä¸­ï¼Œå®ƒå°†å­˜å‚¨çŠ¶æ€ï¼ˆé€šå¸¸éœ€è¦ï¼‰ã€æ•°æ®ï¼ˆé€šå¸¸ä¹Ÿéœ€è¦ï¼‰ä»¥åŠè¯¥å—å½“å‰æ­£åœ¨ç­‰å¾…çš„ackæ•°ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">structure(TBE, desc=&quot;Entry for transient requests&quot;) &#123;</span><br><span class="line">    State TBEState,         desc=&quot;State of block&quot;;</span><br><span class="line">    DataBlock DataBlk,      desc=&quot;Data for the block. Needed for MI_A&quot;;</span><br><span class="line">    int AcksOutstanding, default=0, desc=&quot;Number of acks left to receive.&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="TBETable"><a href="#TBETable" class="headerlink" title="TBETable"></a>TBETable</h4><p>è¿˜éœ€è¦ä¸€ä¸ªå­˜æ”¾æ‰€æœ‰TBEçš„åœ°æ–¹ã€‚å…¶ä¸­<code>external=&quot;yes&quot;</code>è¡¨æ˜è¿™æ˜¯ä¸€ä¸ªå¤–éƒ¨å®šä¹‰çš„ç±»ï¼›å®ƒæ˜¯åœ¨SLICCä¹‹å¤–çš„C++ä¸­å®šä¹‰çš„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦å£°æ˜æˆ‘ä»¬å°†è¦ä½¿ç”¨å®ƒï¼Œå¹¶å£°æ˜æˆ‘ä»¬å°†å¯¹å…¶è°ƒç”¨çš„ä»»ä½•å‡½æ•°ã€‚æ‚¨å¯ä»¥åœ¨src&#x2F;mem&#x2F;ruby&#x2F;structures&#x2F;TBETable.hhä¸­æ‰¾åˆ°TBETableçš„ä»£ç ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">structure(TBETable, external=&quot;yes&quot;) &#123;</span><br><span class="line">  TBE lookup(Addr);</span><br><span class="line">  void allocate(Addr);</span><br><span class="line">  void deallocate(Addr);</span><br><span class="line">  bool isPresent(Addr);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å¤–éƒ¨å‡½æ•°å£°æ˜"><a href="#å¤–éƒ¨å‡½æ•°å£°æ˜" class="headerlink" title="å¤–éƒ¨å‡½æ•°å£°æ˜"></a>å¤–éƒ¨å‡½æ•°å£°æ˜</h4><p>å¦‚æœæˆ‘ä»¬è¦åœ¨æ–‡ä»¶çš„å…¶ä½™éƒ¨åˆ†ä¸­ä½¿ç”¨AbstractControllerä¸­çš„ä»»ä½•å‡½æ•°ï¼Œéƒ½éœ€è¦å£°æ˜å®ƒä»¬ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Tick clockEdge();</span><br><span class="line">void set_cache_entry(AbstractCacheEntry a);</span><br><span class="line">void unset_cache_entry();</span><br><span class="line">void set_tbe(TBE b);</span><br><span class="line">void unset_tbe();</span><br></pre></td></tr></table></figure><h4 id="æ ·æ¿ä»£ç "><a href="#æ ·æ¿ä»£ç " class="headerlink" title="æ ·æ¿ä»£ç "></a>æ ·æ¿ä»£ç </h4><p>ä¸‹é¢è¿™ä¸€ç»„æ ·æ¿å·¥å…·ä»£ç å¾ˆå°‘åœ¨ä¸åŒçš„åè®®ä¹‹é—´å‘ç”Ÿå˜åŒ–ã€‚åœ¨AbstractControllerä¸­ï¼Œæˆ‘ä»¬å¿…é¡»å®ç°ä¸€ç»„çº¯è™šæ‹Ÿçš„å‡½æ•°ã€‚</p><ul><li>getState</li></ul><p>Given a TBE, cache entry, and address return the state of the block. This is called on the block to decide which transition to execute when an event is triggered. Usually, you return the state in the TBE or cache entry, whichever is valid.</p><p>ç»™å®šIBEï¼Œentryå’Œåœ°å€ï¼Œè¿”å›åœ°å€æ‰€åœ¨ç¼“å­˜å—çš„çŠ¶æ€</p><ul><li>setState</li></ul><p>Given a TBE, cache entry, and address make sure the state is set correctly on the block. This is called at the end of the transition to set the final state on the block.</p><ul><li>getAccessPermission</li></ul><p>Get the access permission of a block. This is used during functional access to decide whether or not to functionally access the block. It is similar to <code>getState</code>, get the information from the TBE if valid, cache entry, if valid, or the block is not present.</p><ul><li>setAccessPermission</li></ul><p>Like <code>getAccessPermission</code>, but sets the permission.</p><ul><li>functionalRead</li></ul><p>Functionally read the data. It is possible the TBE has more up-to-date information, so check that first. Note: testAndRead&#x2F;Write defined in src&#x2F;mem&#x2F;ruby&#x2F;slicc_interface&#x2F;Util.hh</p><ul><li>functionalWrite</li></ul><p>Functionally write the data. Similarly, you may need to update the data in both the TBE and the cache entry.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">State getState(TBE tbe, Entry cache_entry, Addr addr) &#123;</span><br><span class="line">    // The TBE state will override the state in cache memory, if valid</span><br><span class="line">    if (is_valid(tbe)) &#123; return tbe.TBEState; &#125;</span><br><span class="line">    // Next, if the cache entry is valid, it holds the state</span><br><span class="line">    else if (is_valid(cache_entry)) &#123; return cache_entry.CacheState; &#125;</span><br><span class="line">    // If the block isn&#x27;t present, then it&#x27;s state must be I.</span><br><span class="line">    else &#123; return State:I; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void setState(TBE tbe, Entry cache_entry, Addr addr, State state) &#123;</span><br><span class="line">  if (is_valid(tbe)) &#123; tbe.TBEState := state; &#125;</span><br><span class="line">  if (is_valid(cache_entry)) &#123; cache_entry.CacheState := state; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">AccessPermission getAccessPermission(Addr addr) &#123;</span><br><span class="line">    TBE tbe := TBEs[addr];</span><br><span class="line">    if(is_valid(tbe)) &#123;</span><br><span class="line">        return L1Cache_State_to_permission(tbe.TBEState);</span><br><span class="line">    &#125;</span><br><span class="line">    Entry cache_entry := getCacheEntry(addr);</span><br><span class="line">    if(is_valid(cache_entry)) &#123;</span><br><span class="line">        return L1Cache_State_to_permission(cache_entry.CacheState);</span><br><span class="line">    &#125;</span><br><span class="line">    return AccessPermission:NotPresent;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void setAccessPermission(Entry cache_entry, Addr addr, State state) &#123;</span><br><span class="line">    if (is_valid(cache_entry)) &#123;</span><br><span class="line">        cache_entry.changePermission(L1Cache_State_to_permission(state));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void functionalRead(Addr addr, Packet *pkt) &#123;</span><br><span class="line">    TBE tbe := TBEs[addr];</span><br><span class="line">    if(is_valid(tbe)) &#123;</span><br><span class="line">        testAndRead(addr, tbe.DataBlk, pkt);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        testAndRead(addr, getCacheEntry(addr).DataBlk, pkt);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int functionalWrite(Addr addr, Packet *pkt) &#123;</span><br><span class="line">    int num_functional_writes := 0;</span><br><span class="line">    TBE tbe := TBEs[addr];</span><br><span class="line">    if(is_valid(tbe)) &#123;</span><br><span class="line">        num_functional_writes := num_functional_writes +</span><br><span class="line">            testAndWrite(addr, tbe.DataBlk, pkt);</span><br><span class="line">        return num_functional_writes;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹æ˜¯å¯¹è¿™äº›çŠ¶æ€å’Œè½¬æ¢çš„é«˜å±‚æ¬¡æè¿°ï¼š</p><p><img src="/Gem5%E6%A8%A1%E6%8B%9F%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E5%85%AB%EF%BC%89/v2-c033b43df7af58f9468432e564c4266f_720w.png" alt="img"></p><h3 id="2-6-è¾“å…¥è¾“å‡ºç«¯å£"><a href="#2-6-è¾“å…¥è¾“å‡ºç«¯å£" class="headerlink" title="2.6 è¾“å…¥è¾“å‡ºç«¯å£"></a>2.6 è¾“å…¥è¾“å‡ºç«¯å£</h3><p>å‚è€ƒé“¾æ¥ğŸ”—</p><p><a href="https://zhuanlan.zhihu.com/p/539342291">gem5æ¨¡æ‹Ÿå™¨å…¥é—¨ï¼ˆå››ï¼‰ - çŸ¥ä¹ (zhihu.com)</a></p><p><a href="https://blog.csdn.net/qq_34898487/article/details/134252221">EM5å®˜æ–¹æ•™ç¨‹å…¨æµç¨‹ï¼š part 3 RUBY-CSDNåšå®¢</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Ruby </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2023/11/25/Cache%E4%B8%80%E8%87%B4%E6%80%A7%E5%8D%8F%E8%AE%AE/"/>
      <url>/2023/11/25/Cache%E4%B8%80%E8%87%B4%E6%80%A7%E5%8D%8F%E8%AE%AE/</url>
      
        <content type="html"><![CDATA[<p>å¯¹ç§°å¼å…±äº«å­˜å‚¨å™¨ç³»ç»Ÿæ”¯æŒå…±äº«æ•°æ®å’Œç§æœ‰æ•°æ®çš„ç¼“å­˜ã€‚</p><ul><li><p><strong>ç§æœ‰æ•°æ®è¢«å•ä¸ªå¤„ç†å™¨ä½¿ç”¨ã€‚</strong></p><p>å¥½å¤„ï¼šæŠŠä¸€ä¸ªç§æœ‰æ•°æ®ä»å­˜å‚¨å™¨ç¼“å­˜åˆ°Cacheä¹‹åï¼Œå¯¹è¯¥æ•°æ®çš„è®¿é—®å°±å¯ä»¥åœ¨Cacheä¸­è¿›è¡Œï¼Œå› æ­¤å‡å°‘äº†å¹³å‡è®¿å­˜æ—¶é—´å’Œå¯¹å­˜å‚¨å™¨å¸¦å®½çš„è¦æ±‚ã€‚</p><p>åŒæ—¶å› ä¸ºæ²¡æœ‰å…¶ä»–å¤„ç†å™¨ä½¿ç”¨è¿™äº›æ•°æ®ï¼Œç¨‹åºçš„è¡Œä¸ºä¸å•å¤„ç†å™¨ç³»ç»Ÿç›¸åŒã€‚</p></li><li><p><strong>å…±äº«æ•°æ®è¢«å¤šä¸ªå¤„ç†å™¨æ‰€ä½¿ç”¨ã€‚</strong></p><p>é€šè¿‡è¯»å†™å…±äº«æ•°æ®å®Œæˆå¤„ç†å™¨ä¹‹é—´çš„é€šä¿¡ã€‚</p><p>å¥½å¤„ï¼šå…±äº«æ•°æ®è£…è½½åˆ°Cacheä¸­æ—¶ï¼Œä¼šåœ¨å¤šä¸ªCacheä¸­å½¢æˆå‰¯æœ¬ï¼Œè¿™æ ·1. ä¸€æ–¹é¢ä¼šå‡å°‘è®¿é—®æ—¶é—´å¹¶é™ä½å¯¹å­˜å‚¨å™¨å¸¦å®½çš„è¦æ±‚ï¼Œ2. è¿˜å¯ä»¥å‡å°‘å¤šä¸ªå¤„ç†å™¨åŒæ—¶è¯»å…±äº«æ•°æ®æ—¶æ‰€äº§ç”Ÿçš„å†²çªã€‚</p><p>ä½†æ˜¯ï¼Œå…±äº«æ•°æ®è¿›å…¥Cacheä¹Ÿäº§ç”Ÿäº†ä¸€ä¸ªæ–°é—®é¢˜â€”â€”Cacheçš„ä¸€è‡´æ€§é—®é¢˜ã€‚</p></li></ul><h1 id="ä¸€ã€ä»€ä¹ˆæ˜¯å¤šå¤„ç†å™¨çš„Cacheä¸€è‡´æ€§ï¼Ÿ"><a href="#ä¸€ã€ä»€ä¹ˆæ˜¯å¤šå¤„ç†å™¨çš„Cacheä¸€è‡´æ€§ï¼Ÿ" class="headerlink" title="ä¸€ã€ä»€ä¹ˆæ˜¯å¤šå¤„ç†å™¨çš„Cacheä¸€è‡´æ€§ï¼Ÿ"></a>ä¸€ã€ä»€ä¹ˆæ˜¯å¤šå¤„ç†å™¨çš„Cacheä¸€è‡´æ€§ï¼Ÿ</h1><h2 id="å­˜å‚¨å™¨ä¸€è‡´æ€§å®šä¹‰ä¸€"><a href="#å­˜å‚¨å™¨ä¸€è‡´æ€§å®šä¹‰ä¸€" class="headerlink" title="å­˜å‚¨å™¨ä¸€è‡´æ€§å®šä¹‰ä¸€"></a>å­˜å‚¨å™¨ä¸€è‡´æ€§å®šä¹‰ä¸€</h2><p>ä¸€ä¸ªæ¨¡ç³Šä¸”ç®€å•çš„å®šä¹‰ï¼šå¦‚æœåœ¨ä¸€ä¸ªå­˜å‚¨å™¨ç³»ç»Ÿä¸­è¯»å–ä»»ä½•ä¸€ä¸ªæ•°æ®é¡¹çš„è¿”å›ç»“æœæ€»æ˜¯æœ€è¿‘å†™å…¥çš„æ•°å€¼ï¼Œé‚£ä¹ˆå°±å¯ä»¥è®¤ä¸ºè¯¥å­˜å‚¨å™¨å…·æœ‰ä¸€è‡´æ€§ã€‚ï¼ˆå®šä¹‰ä¸€ï¼‰</p><p>è¿™ä¸ªå®šä¹‰åŒ…å«äº†ä¸¤ä¸ªæ–¹é¢ï¼šä¸€æ–¹é¢æ˜¯<strong>ä¸€è‡´</strong>ï¼ˆcoherenceï¼‰ï¼Œå®ƒå®šä¹‰äº†è¯»æ“ä½œå¯ä»¥è¿”å›ä»€ä¹ˆæ ·çš„æ•°å€¼ã€whatã€‘ï¼›å¦ä¸€æ–¹é¢æ˜¯<strong>è¿è´¯</strong>ï¼ˆconsistencyï¼‰ï¼Œå®ƒå®šä¹‰äº†å†™å…¥çš„æ•°å€¼ä»€ä¹ˆæ—¶å€™æ‰èƒ½è¢«è¯»æ“ä½œè¿”å›ã€whenã€‘ã€‚</p><p>ä¸€è‡´å®šä¹‰äº†å¯¹åŒä¸€ä¸ªå­˜å‚¨å™¨åœ°å€è¿›è¡Œçš„è¯»å†™æ“ä½œè¡Œä¸ºï¼›è¿è´¯å®šä¹‰äº†å…³äºè®¿é—®å…¶ä»–å­˜å‚¨å™¨åœ°å€çš„è¯»å†™æ“ä½œã€‚</p><h2 id="å­˜å‚¨å™¨ä¸€è‡´æ€§å®šä¹‰äºŒ"><a href="#å­˜å‚¨å™¨ä¸€è‡´æ€§å®šä¹‰äºŒ" class="headerlink" title="å­˜å‚¨å™¨ä¸€è‡´æ€§å®šä¹‰äºŒ"></a>å­˜å‚¨å™¨ä¸€è‡´æ€§å®šä¹‰äºŒ</h2><p>å¦‚æœä¸€ä¸ªå­˜å‚¨å™¨ç³»ç»Ÿæ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼Œé‚£ä¹ˆè®¤ä¸ºè¯¥å­˜å‚¨å™¨ç³»ç»Ÿæ˜¯ä¸€è‡´çš„ï¼šï¼ˆå®šä¹‰äºŒï¼‰</p><ol><li><p>å¤„ç†å™¨På¯¹åœ°å€Xçš„å†™æ“ä½œåé¢ç´§è·Ÿç€å¤„ç†å™¨På¯¹Xçš„è¯»æ“ä½œï¼Œè€Œä¸”åœ¨è¿™æ¬¡è¯»æ“ä½œå’Œå†™æ“ä½œä¹‹é—´æ²¡æœ‰å…¶ä»–å¤„ç†å™¨å¯¹Xè¿›è¡Œå†™æ“ä½œï¼Œè¿™æ—¶è¯»æ“ä½œæ€»æ˜¯è¿”å›På†™å…¥çš„æ•°å€¼ã€‚</p><blockquote><p>è¿™ä¸ªæ€§è´¨ä¿è¯äº†ç¨‹åºçš„é¡ºåºï¼Œå³ä½¿åœ¨å•å¤„ç†å™¨ä¸­ä¹Ÿè¦ä¿è¯è¿™ä¸ªæ€§è´¨ã€‚</p></blockquote></li><li><p>åœ¨å…¶ä»–å¤„ç†å™¨å¯¹Xçš„å†™æ“ä½œåï¼Œå¤„ç†å™¨På¯¹Xæ‰§è¡Œè¯»æ“ä½œï¼Œè¿™ä¸¤ä¸ªæ“ä½œä¹‹é—´æœ‰<u>è¶³å¤Ÿçš„é—´éš”</u>å¹¶ä¸”æ²¡æœ‰å…¶ä»–å¤„ç†å™¨å¯¹Xè¿›è¡Œå†™æ“ä½œï¼Œè¿™æ˜¯ï¼Œè¯»æ“ä½œè¿”å›çš„æ˜¯å†™å…¥çš„æ•°å€¼ã€‚</p><blockquote><p>è¿™ä¸ªæ€§è´¨ç»™å‡ºäº†ä¸€è‡´æ€§çš„æ¦‚å¿µï¼Œå¦‚æœä¸€ä¸ªå¤„ç†å™¨å¯¹æŸä¸ªæ•°æ®æ‰§è¡Œè¯»æ“ä½œæ—¶ï¼Œæ€»æ˜¯çš„è¯»å…¥æ—§çš„æ•°æ®ï¼Œé‚£ä¹ˆè¯¥å­˜å‚¨å™¨æ˜¯éä¸€è‡´çš„ã€‚</p></blockquote></li><li><p>å¯¹åŒä¸€åœ°å€çš„å†™æ“ä½œæ˜¯ä¸²è¡Œæ‰§è¡Œçš„ï¼›ä¹Ÿå°±æ˜¯è¯´ï¼Œä»»ä½•ä¸¤ä¸ªå¤„ç†å™¨å¯¹åŒä¸€åœ°å€çš„ä¸¤ä¸ªå†™æ“ä½œåœ¨æ‰€æœ‰å¤„ç†å™¨çœ‹æ¥éƒ½æœ‰ç›¸åŒçš„é¡ºåºã€‚ä¾‹å¦‚ï¼Œå¯¹åŒä¸€åœ°å€å…ˆåå†™å…¥æ•°å€¼1å’Œæ•°å€¼2ï¼Œå¤„ç†å™¨ç»ä¸ä¼šä»è¯¥åœ°å€ä¸­å…ˆè¯»å‡º2å†è¯»å‡º1ã€‚</p></li></ol><blockquote><p>è¿™ä¸ªæ€§è´¨ç§°ä¸º<strong>å†™ä¸²è¡ŒåŒ–</strong>ï¼Œä¿è¯åŒä¸€åœ°å€æ‰€å†™çš„é¡ºåºå¯¹ä»»ä½•å¤„ç†å™¨æ¥è¯´éƒ½æ˜¯ç›¸åŒçš„ã€‚</p></blockquote><p>åœ¨ä¸‰ä¸ªæ¡ä»¶ä¹‹å¤–ï¼Œè¿˜åˆä¸¤ä¸ªå‡è®¾ï¼š</p><p>å‡è®¾ï¼š</p><ol><li>ç›´åˆ°æ‰€æœ‰å¤„ç†å™¨éƒ½çœ‹åˆ°äº†å†™æ“ä½œä¹‹åä¸€ä¸ªå†™æ“ä½œæ‰ç®—å®Œæˆï¼Œå¹¶ä¸”åç»­çš„å†™æ“ä½œæ‰èƒ½å¼€å§‹ã€‚</li><li>å¤„ç†å™¨ä¸ä¼šå› ä¸ºå…¶ä»–å­˜å‚¨æ“ä½œè€Œæ”¹å˜å†™æ“ä½œçš„é¡ºåºã€‚</li></ol><p>è¿™ä¸¤ä¸ªå‡è®¾æ„å‘³ç€å¦‚æœå¤„ç†å™¨å‘åœ°å€Aå†™å…¥ååˆå‘åœ°å€Bå†™å…¥ï¼Œæ‰€æœ‰èƒ½çœ‹åˆ°Bä¸­æ–°å€¼çš„å¤„ç†å™¨å¿…é¡»ä¹Ÿèƒ½çœ‹åˆ°Açš„æ–°å€¼ã€‚</p><h2 id="å®šä¹‰ä¸€å’Œå®šä¹‰äºŒçš„è”ç³»"><a href="#å®šä¹‰ä¸€å’Œå®šä¹‰äºŒçš„è”ç³»" class="headerlink" title="å®šä¹‰ä¸€å’Œå®šä¹‰äºŒçš„è”ç³»"></a>å®šä¹‰ä¸€å’Œå®šä¹‰äºŒçš„è”ç³»</h2><p>å®šä¹‰äºŒçš„ä¸‰ä¸ªæ¡ä»¶å·²ç»ä½“ç°äº†å®šä¹‰ä¸€çš„ä¸€è‡´æ–¹é¢ã€whatã€‘ï¼Œå®šä¹‰ä¸€çš„è¿è´¯æ–¹é¢ï¼Œå³ä»€ä¹ˆæ—¶å€™æ‰èƒ½è·å¾—å†™è¿›å»çš„å€¼ã€whenã€‘ï¼Œåˆ™ä½“ç°åœ¨æ¡ä»¶2çš„<u>è¯»å†™æ“ä½œä¹‹é—´æœ‰è¶³å¤Ÿçš„æ—¶é—´é—´éš”</u>ä¸Šé¢ã€‚</p><p>é€šå¸¸ä¸å¯èƒ½è¦æ±‚åœ¨ä¸€ä¸ªå¤„ç†å™¨å†™å…¥Xçš„æ•°å€¼åï¼Œå…¶ä»–å¤„ç†å™¨å°±èƒ½å³åˆ»åœ¨Xä¸Šè¯»å‡ºè¿™ä¸€å€¼ã€‚å› æ­¤ï¼Œå¦‚æœä¸€ä¸ªå¤„ç†å™¨å¯¹Xè¿›è¡Œå†™åï¼Œå¾ˆçŸ­æ—¶é—´å†…å¦ä¸€å¤„ç†å™¨å¯¹Xè¿›è¡Œè¯»ï¼Œé‚£ä¹ˆæ— æ³•ä¿è¯è¯¥è¯»æ“ä½œèƒ½è¿”å›å†™å…¥çš„æ•°å€¼ï¼Œå› ä¸ºè¿™ä¸€åˆ»å†™å…¥çš„æ•°æ®æ˜¯æ€çŸ¥å¯èƒ½è¿˜æ²¡è¢«å¤„ç†å™¨å‘é€å‡ºå»ã€‚</p><p>æ€»çš„æ¥è¯´ï¼Œç¼“å­˜ä¸€è‡´æ€§æœºåˆ¶éœ€è¦è§£å†³çš„é—®é¢˜å°±æ˜¯ 2 ç‚¹ï¼š</p><ul><li><strong>ç‰¹æ€§ 1 - å†™ä¼ æ’­ï¼ˆWrite Propagationï¼‰ï¼š</strong> æ¯ä¸ª CPU æ ¸å¿ƒçš„å†™å…¥æ“ä½œï¼Œéœ€è¦ä¼ æ’­åˆ°å…¶ä»– CPU æ ¸å¿ƒï¼›</li><li><strong>ç‰¹æ€§ 2 - å†™äº‹åŠ¡ä¸²è¡ŒåŒ–ï¼ˆTransaction Serializationï¼‰ï¼š</strong> å„ä¸ª CPU æ ¸å¿ƒæ‰€æœ‰å†™å…¥æ“ä½œçš„é¡ºåºï¼Œåœ¨æ‰€æœ‰ CPU æ ¸å¿ƒçœ‹èµ·æ¥æ˜¯ä¸€è‡´ã€‚</li></ul><p>å¦‚æœæ²¡æœ‰å†™ä¸²è¡ŒåŒ–ï¼Œä¸¾ä¸ªä¾‹å­ï¼šå‡å¦‚ CPU æœ‰ 4 ä¸ªæ ¸å¿ƒï¼ŒCore 1 å°†å…±äº«æ•°æ®ä¿®æ”¹ä¸º 1000ï¼Œéšå Core 2 å°†å…±äº«æ•°æ®ä¿®æ”¹ä¸º 2000ã€‚åœ¨å†™ä¼ æ’­ä¸‹ï¼Œâ€œä¿®æ”¹ä¸º 1000â€ å’Œ â€œä¿®æ”¹ä¸º 2000â€ ä¸¤ä¸ªäº‹åŠ¡ä¼šåŒæ­¥åˆ° Core 3 å’Œ Core 4ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ²¡æœ‰äº‹åŠ¡ä¸²è¡ŒåŒ–ï¼Œä¸åŒæ ¸å¿ƒæ”¶åˆ°çš„äº‹åŠ¡é¡ºåºå¯èƒ½æ˜¯ä¸åŒçš„ï¼Œæœ€ç»ˆæ•°æ®è¿˜æ˜¯ä¸ä¸€è‡´ã€‚</p><h1 id="äºŒã€å®ç°ä¸€è‡´æ€§çš„æ–¹æ¡ˆ"><a href="#äºŒã€å®ç°ä¸€è‡´æ€§çš„æ–¹æ¡ˆ" class="headerlink" title="äºŒã€å®ç°ä¸€è‡´æ€§çš„æ–¹æ¡ˆ"></a>äºŒã€å®ç°ä¸€è‡´æ€§çš„æ–¹æ¡ˆ</h1><p>åœ¨ä¸€è‡´çš„å¤šå¤„ç†æœºä¸­ï¼ŒCacheæä¾›äº†å…±äº«æ•°æ®çš„è¿ç§»å’Œå¤åˆ¶åŠŸèƒ½ã€‚</p><p>å…±äº«æ•°æ®çš„<strong>è¿ç§»</strong>æ˜¯æŠŠè¿œç¨‹çš„å…±äº«æ•°æ®é¡¹å¤‡ä»½æ”¾åœ¨æœ¬å¤„ç†å™¨å±€éƒ¨çš„Cacheä¸­ä½¿ç”¨ï¼Œä»è€Œé™ä½äº†å¯¹è¿œç¨‹å…±äº«æ•°æ®çš„è®¿é—®å»¶è¿Ÿã€‚</p><p>å…±äº«æ•°æ®çš„<strong>å¤åˆ¶</strong>æ˜¯æŠŠå¤šä¸ªå¤„ç†å™¨éœ€è¦åŒæ—¶è¯»å–çš„å…±äº«æ•°æ®é¡¹çš„å¤‡ä»½æ”¾åœ¨å„è‡ªçš„å±€éƒ¨Cacheä¸­ä½¿ç”¨ã€‚</p><p>å¯¹å¤šä¸ªå¤„ç†å™¨ç»´æŠ¤ä¸€è‡´æ€§çš„åè®®ç§°ä¸ºCacheä¸€è‡´æ€§åè®®ï¼ˆCache-coherent Protocalï¼‰</p><h2 id="ç›®å½•åè®®ä¸ç›‘å¬åè®®"><a href="#ç›®å½•åè®®ä¸ç›‘å¬åè®®" class="headerlink" title="ç›®å½•åè®®ä¸ç›‘å¬åè®®"></a>ç›®å½•åè®®ä¸ç›‘å¬åè®®</h2><p>ï¼ˆ1ï¼‰ç›‘å¬ï¼ˆSnoopingï¼‰â€”â€”æ¯ä¸ªCacheé™¤äº†åŒ…å«ç‰©ç†å­˜å‚¨å™¨ä¸­å—çš„æ•°æ®å¤‡ä»½ä¹‹å¤–ï¼Œä¹Ÿä¿å­˜ç€æ¯ä¸ªå—çš„å…±äº«çŠ¶æ€ä¿¡æ¯ã€‚Cacheé€šå¸¸è¿åœ¨å…±äº«å­˜å‚¨å™¨çš„æ€»çº¿ä¸Šï¼Œå„ä¸ªCacheæ§åˆ¶å™¨é€šè¿‡ç›‘å¬æ€»çº¿æ¥åˆ¤æ–­ä»–ä»¬æ˜¯å¦æœ‰æ€»çº¿ä¸Šè¯·æ±‚çš„æ•°æ®å—ã€‚ã€æ¯ä¸ªæ•°æ®å—çŠ¶æ€æ˜¯åˆ†æ•£åœ¨å„ä¸ªCacheä¸­çš„ã€‘</p><p>å¯¹äºç›‘å¬åè®®ï¼Œå¸¸ç”¨äºé›†ä¸­å¼å…±äº«å­˜å‚¨å™¨ä½“ç³»ç»“æ„ï¼Œå› ä¸ºå¯ä»¥åˆ©ç”¨å·²æœ‰çš„ç‰©ç†è¿æ¥ï¼ˆæ€»çº¿ï¼‰æ¥è¿›è¡Œå¹¿æ’­ï¼Œä½†å› ä¸ºå¹¿æ’­å¸¦æ¥çš„å¸¦å®½å‹åŠ›å¤§ï¼Œæ‰€ä»¥ç›‘å¬åè®®çš„å¯æ‰©å±•æ€§è¾ƒå·®ã€‚</p><p>ï¼ˆ2ï¼‰ç›®å½•ï¼ˆDirectoryï¼‰â€”â€”ç‰©ç†å­˜å‚¨å™¨ä¸­å…±äº«æ•°æ®å—çš„çŠ¶æ€åŠç›¸å…³ä¿¡æ¯å‡è¢«ä¿å­˜é›†ä¸­åœ°åœ¨ä¸€ä¸ªç§°ä¸ºç›®å½•çš„åœ°æ–¹ã€‚ã€æ¯ä¸ªæ•°æ®å—çŠ¶æ€æ˜¯é›†ä¸­åœ¨ç›®å½•ä¸­çš„ã€‘</p><p>å¯¹äºç›®å½•åè®®ï¼Œå¸¸ç”¨äºåˆ†å¸ƒå¼å…±äº«å­˜å‚¨å™¨ä½“ç³»ç»“æ„ï¼Œé€šè¿‡ç›®å½•é¿å…äº†å¹¿æ’­æ“ä½œï¼Œå‡å°äº†å¸¦å®½è´Ÿæ‹…ï¼Œå¯æ‰©å±•æ€§å¥½ã€‚</p><p>å®ç°Cacheä¸€è‡´æ€§åè®®çš„å…³é”®æ˜¯è·Ÿè¸ªå…±äº«æ•°æ®å—çš„çŠ¶æ€ã€‚ç›®å‰æœ‰ä¸¤ç±»åè®®ï¼Œé‡‡ç”¨äº†ä¸åŒçš„å…±äº«æ•°æ®çŠ¶æ€è·Ÿè¸ªæŠ€æœ¯ï¼š</p><h2 id="å†™ä½œåºŸåè®®ä¸å†™æ›´æ–°åè®®"><a href="#å†™ä½œåºŸåè®®ä¸å†™æ›´æ–°åè®®" class="headerlink" title="å†™ä½œåºŸåè®®ä¸å†™æ›´æ–°åè®®"></a>å†™ä½œåºŸåè®®ä¸å†™æ›´æ–°åè®®</h2><p>å¯é€šè¿‡ä¸¤ç§æ–¹æ³•æ¥ç»´æŒä¸€è‡´æ€§è¦æ±‚ï¼š</p><p>ï¼ˆ1ï¼‰å†™ä½œåºŸåè®®ï¼ˆWrite Invalidateï¼‰â€”â€”åœ¨ä¸€ä¸ªå¤„ç†å™¨å†™æŸä¸ªæ•°æ®é¡¹ä¹‹å‰ä¿è¯å®ƒå¯¹è¯¥æ•°æ®é¡¹æœ‰å”¯ä¸€çš„è®¿é—®æƒï¼Œå”¯ä¸€çš„è®¿é—®æƒä¿è¯äº†åœ¨è¿›è¡Œå†™åä¸å­˜åœ¨å…¶ä»–å¯è¯»æˆ–å¯å†™çš„å¤‡ä»½ï¼Œå› ä¸ºåˆ«çš„å¤‡ä»½éƒ½ä½œåºŸäº†ã€‚åˆå«å†™æ— æ•ˆã€‚</p><p>ï¼ˆ2ï¼‰å†™æ›´æ–°åè®®ï¼ˆWrite Updateï¼‰â€”â€”å½“ä¸€ä¸ªå¤„ç†å™¨å†™æŸæ•°æ®é¡¹æ—¶ã€‚é€šè¿‡å¹¿æ’­ä½¿å…¶ä»–Cacheä¸­æ‰€æœ‰å¯¹åº”çš„è¯¥æ•°æ®é¡¹å¤‡ä»½è¿›è¡Œæ›´æ–°ã€‚åˆå«å†™å¹¿æ’­ã€‚</p><p>ç”±äºå†™æ›´æ–°åè®®å¿…é¡»å°†æ‰€æœ‰å†™æ“ä½œå¹¿æ’­ç»™å…±äº«Cacheï¼Œéœ€è¦æ›´å¤§çš„å¸¦å®½ï¼Œæ‰€ä»¥å¤§å¤šå¤„ç†å™¨éƒ½é€‰æ‹©å†™ä½œåºŸåè®®ã€‚</p><h1 id="ä¸‰ã€ç›‘å¬åè®®"><a href="#ä¸‰ã€ç›‘å¬åè®®" class="headerlink" title="ä¸‰ã€ç›‘å¬åè®®"></a>ä¸‰ã€ç›‘å¬åè®®</h1><p>ç”±äºç›‘å¬åè®®éœ€è¦å¹¿æ’­ï¼Œå¯¹æ€»çº¿å¸¦å®½çš„éœ€æ±‚å¤§ï¼Œå› æ­¤ä»…é€‚ç”¨äº<strong>å°è§„æ¨¡çš„å¤šå¤„ç†æœº</strong>ï¼Œå³é›†ä¸­å¼å…±äº«å­˜å‚¨å™¨ç³»ç»Ÿã€‚</p><p>ç›‘å¬åè®®çš„å…³é”®æ˜¯åˆ©ç”¨æ€»çº¿æˆ–å…¶ä»–å¹¿æ’­åª’ä»‹è¿›è¡Œä½œåºŸæ“ä½œã€‚å½“æŸä¸ªå¤„ç†å™¨è¿›è¡Œå†™æ•°æ®æ—¶ï¼Œå¿…é¡»å…ˆè·å¾—æ€»çº¿çš„æ§åˆ¶æƒï¼Œç„¶åå°†è¦ä½œåºŸçš„æ•°æ®å—çš„åœ°å€æ”¾åœ¨æ€»çº¿ä¸Šã€‚å…¶ä»–å¤„ç†å™¨ä¸€è‡´ç›‘å¬æ€»çº¿ï¼Œä»–ä»¬æ£€æµ‹åœ°å€æ‰€å¯¹åº”çš„æ•°æ®æ˜¯å¦åœ¨å®ƒä»¬çš„Cacheä¸­ï¼Œè‹¥åœ¨ï¼Œåˆ™ä½œåºŸç›¸åº”æ•°æ®å—ã€‚</p><p>å½“å†™Cacheæœªå‘½ä¸­æ—¶ï¼Œé™¤äº†ä½œåºŸå…¶ä»–å¤„ç†å™¨ä¸Šç›¸åº”çš„Cacheæ•°æ®å—ä»¥å¤–ï¼Œè¿˜è¦ä»å­˜å‚¨å™¨å–å‡ºè¯¥æ•°æ®å—ã€‚</p><ul><li><p>å¯¹äº<strong>å†™ç›´è¾¾Cache</strong>ï¼Œå› ä¸ºæ‰€æœ‰å†™çš„æ•°æ®åŒæ—¶è¢«å†™å›ä¸»å­˜ï¼Œåˆ™ä»ä¸»å­˜ä¸­æ€»å¯ä»¥å–åˆ°æœ€æ–°çš„æ•°æ®å€¼ã€‚</p></li><li><p>å¯¹äº<strong>å†™å›Cache</strong>ï¼Œå› ä¸ºæœ€æ–°ä¹‹å¯èƒ½åœ¨æŸä¸ªå¤„ç†å™¨çš„Cacheä¸­ï¼Œä¹Ÿå¯èƒ½åœ¨ä¸»å­˜ä¸­ï¼Œæ‰€ä»¥å¾—åˆ°æ•°æ®çš„æœ€æ–°å€¼ä¼šå›°éš¾ä¸€äº›ã€‚åœ¨å†™å›Cacheå¤±æ•ˆæ—¶å¯ä½¿ç”¨ç›¸åŒçš„ç›‘å¬æœºåˆ¶ï¼š1. å½“è¯·æ±‚å¤„ç†å™¨çš„Cacheå‘ç”Ÿå†™å¤±æ•ˆåï¼Œå¹¿æ’­è¯¥æ•°æ®å—çš„åœ°å€ã€‚2. å…¶ä»–å¤„ç†å™¨éƒ½ç›‘å¬æ”¾åœ¨æ€»çº¿ä¸Šçš„åœ°å€ï¼Œå¦‚æœæŸä¸ªå¤„ç†å™¨å‘ç°å®ƒå«æœ‰è¢«è¯·æ±‚æ•°æ®å—çš„ä¸€ä¸ªå·²ç»ä¿®æ”¹è¿‡çš„å¤‡ä»½ï¼ˆå³ä¿®æ”¹è¿‡äº†è¯¥æ•°æ®å—ä½†è¿˜æœªå†™å›å†…å­˜ï¼‰ï¼Œå®ƒä¹æ±Ÿè¿™ä¸ªæ•°æ®å—é€ç»™å‘å‡ºè¯»è¯·æ±‚çš„å¤„ç†å™¨ï¼Œå¹¶åœæ­¢å…¶å¯¹ä¸»å­˜çš„è®¿é—®è¯·æ±‚ã€‚</p></li></ul><p>ç›¸æ¯”äºå†™ç›´è¾¾Cacheï¼Œå†™å›Cacheå®ç°ä¸€è‡´æ€§æœ‰ä¸¤ä¸ªç¼ºç‚¹ï¼š</p><blockquote><ol><li>å®ç°å¤æ‚åº¦æ˜¾ç„¶æ›´é«˜</li><li>å†™å›Cacheä»å¤„ç†å™¨Cacheä¸­é‡æ–°æ‰¾å›æ•°æ®å—çš„æ—¶é—´é€šå¸¸æ¯”å†™ç›´è¾¾Cacheä»å…±äº«å­˜å‚¨å™¨ä¸­æ‰¾å›æ•°æ®å—çš„æ—¶é—´é•¿</li></ol></blockquote><p>ä½†å†™å›Cacheæ‰€éœ€çš„<strong>å­˜å‚¨å™¨å¸¦å®½è¾ƒä½</strong>çš„ç‰¹ç‚¹ä½¿å¾—å…¶åœ¨å¤šå¤„ç†æœºå®ç°ä¸Šå¾ˆå—æ¬¢è¿ã€‚</p><h2 id="å†™å›Cacheæ¡ä»¶ä¸‹çš„ç›‘å¬åè®®å®ç°"><a href="#å†™å›Cacheæ¡ä»¶ä¸‹çš„ç›‘å¬åè®®å®ç°" class="headerlink" title="å†™å›Cacheæ¡ä»¶ä¸‹çš„ç›‘å¬åè®®å®ç°"></a>å†™å›Cacheæ¡ä»¶ä¸‹çš„ç›‘å¬åè®®å®ç°</h2><p>åˆ©ç”¨æ€»çº¿å®ç°å†™ä¼ æ’­å’Œå†™äº‹åŠ¡ä¸²è¡ŒåŒ–ï¼š</p><ul><li><strong>å†™ä¼ æ’­ - æ€»çº¿å—…æ¢ï¼š</strong> æ€»çº¿é™¤äº†èƒ½åœ¨ä¸€ä¸ªä¸»æ¨¡å—å’Œä¸€ä¸ªä»æ¨¡å—ä¹‹é—´ä¼ è¾“æ•°æ®ï¼Œè¿˜æ”¯æŒä¸€ä¸ªä¸»æ¨¡å—å¯¹å¤šä¸ªä»æ¨¡å—å†™å…¥æ•°æ®ï¼Œè¿™ç§æ“ä½œå°±æ˜¯å¹¿æ’­ã€‚è¦å®ç°å†™ä¼ æ’­ï¼Œå…¶å®å°±æ˜¯å°†æ‰€æœ‰çš„è¯»å†™æ“ä½œå¹¿æ’­åˆ°æ‰€æœ‰ CPU æ ¸å¿ƒï¼Œè€Œå…¶å®ƒ CPU æ ¸å¿ƒæ—¶åˆ»ç›‘å¬æ€»çº¿ä¸Šçš„å¹¿æ’­ï¼Œå†ä¿®æ”¹æœ¬åœ°çš„æ•°æ®ï¼›</li><li><strong>äº‹åŠ¡ä¸²è¡ŒåŒ– - æ€»çº¿ä»²è£ï¼š</strong> æ€»çº¿çš„ç‹¬å æ€§è¦æ±‚åŒä¸€æ—¶åˆ»æœ€å¤šåªæœ‰ä¸€ä¸ªä¸»æ¨¡å—å ç”¨æ€»çº¿ï¼Œå¤©ç„¶åœ°ä¼šå°†æ‰€æœ‰æ ¸å¿ƒå¯¹å†…å­˜çš„è¯»å†™æ“ä½œä¸²è¡ŒåŒ–ã€‚å¦‚æœå¤šä¸ªæ ¸å¿ƒåŒæ—¶å‘èµ·æ€»çº¿äº‹åŠ¡ï¼Œæ­¤æ—¶æ€»çº¿ä»²è£å•å…ƒä¼šå¯¹ç«äº‰åšå‡ºä»²è£ï¼Œæœªè·èƒœçš„äº‹åŠ¡åªèƒ½ç­‰å¾…è·èƒœçš„äº‹åŠ¡å¤„ç†å®Œæˆåæ‰èƒ½æ‰§è¡Œã€‚</li></ul><p>ä½¿ç”¨çš„è¾…åŠ©ç»“æ„</p><ul><li><p>æœ‰æ•ˆä½</p><p>åœ¨å†™å›Cacheçš„æ•°æ®å—ä¸­ï¼Œæœ‰æ•ˆä½è¢«ç”¨äºæŒ‡ç¤ºè¯¥å—æ˜¯å¦æœ‰æ•ˆã€‚åˆ©ç”¨æœ‰æ•ˆä½ï¼Œå¯ä»¥ä½¿ä½œåºŸçš„å¤„ç†å¾ˆç®€å•ï¼Œåªéœ€è¦å°†è¯¥ä½ç½®ä¸ºæ— æ•ˆå³å¯ã€‚</p></li><li><p>çŠ¶æ€ä½</p><p>ä¸ºäº†åˆ†è¾¨æŸä¸ªæ•°æ®å—æ‰€å¤„çš„çŠ¶æ€ï¼Œè¿˜è¦ç»™æ¯ä¸ªå—å¢åŠ ä¸€ä¸ªç‰¹æ®Šçš„çŠ¶æ€ä½ã€‚</p></li><li><p>é™ä½å†²çª</p><p>å› ä¸ºæ¯æ¬¡æ€»çº¿ä»»åŠ¡å‡è¦æ£€æŸ¥Cacheçš„åœ°å€ä½ï¼Œè¿™å¯èƒ½ä¸CPUå¯¹Cacheçš„è®¿é—®å†²çªï¼Œå¯é€šè¿‡ä»¥ä¸‹ä¸¤ç§æŠ€æœ¯ä¹‹ä¸€é™ä½å†²çªï¼š</p><ol><li>å¤åˆ¶æ ‡å¿—ä½ï¼šå°†Cacheçš„æ ‡å¿—ä½å¤åˆ¶ä¸€ä»½ï¼Œä¸€ä»½æ­£å¸¸ç”¨äºCacheè®¿é—®ï¼Œå¦ä¸€ä»½ç”¨äºç›‘å¬ï¼Œä¸¤ä¸ªä»»åŠ¡å¯ä»¥å¹¶è¡Œå¯¹æ ‡å¿—ä½è¿›è¡Œè¯»ã€‚ä½†ä»£ä»·å°±æ˜¯ä¿®æ”¹æ ‡å¿—ä½çš„æ—¶å€™ä¹Ÿå¿…é¡»åŒæ—¶ä¿®æ”¹ä¸¤ä»½ï¼ŒåŒæ—¶å¦‚æœä¸¤ä¸ªä»»åŠ¡ä¿®æ”¹æ ‡å¿—ä½å†²çªï¼Œåˆ™éæŠ¢å…ˆè€…å°†è¢«æŒ‚èµ·ã€‚</li><li>å¤šçº§åŒ…å«Cacheï¼šé‡‡ç”¨å¤šçº§Cacheï¼Œé€šå¸¸ä¸ºä¸¤çº§ï¼Œé è¿‘CPUçš„ç¬¬ä¸€çº§Cacheæ˜¯è¾ƒè¿œçš„ç¬¬äºŒçº§Cacheçš„ä¸€ä¸ªå­é›†ã€‚äºæ˜¯ï¼Œç›‘å¬å¯é’ˆå¯¹ç¬¬äºŒçº§Cacheè¿›è¡Œï¼Œè€Œå¤„ç†å™¨çš„å¤§å¤šæ•°è®¿é—®é’ˆå¯¹ç¬¬ä¸€å­£Cacheï¼Œæå¤§åœ°é¿å…äº†å†²çªã€‚ä½†æ˜¯ï¼Œå¦‚æœç›‘å¬å‘½ä¸­ç¬¬äºŒçº§Cacheï¼Œå®ƒå¿…é¡»å„æ–­å¯¹å„çº§Cacheçš„è®¿é—®ï¼Œæ›´æ–°å—çŠ¶æ€å¹¶å¯èƒ½å†™å›æ•°æ®ï¼Œè¿™é€šå¸¸è¦æŒ‚èµ·å¤„ç†å™¨å¯¹Cacheçš„è®¿é—®ã€‚</li></ol><p>å¯é‡‡ç”¨å°†ç¬¬äºŒçº§Cacheä¸­çš„æ ‡å¿—ä½å¤åˆ¶ï¼Œä¼šæ›´æœ‰æ•ˆåœ°å‡å°‘CPUå’Œç›‘å¬ä¹‹é—´çš„å†²çªã€‚</p><p>åˆ¤æ–­æ•°æ®å—æ˜¯å¦å…±äº«ï¼Œå¯ä»¥å¸®åŠ©å†™æ“ä½œåˆ¤æ–­æ˜¯å¦éœ€è¦å‘é€ä½œåºŸæ“ä½œâ€”â€”å½“å¯¹<u>å…±äº«æ•°æ®å—</u>è¿›è¡Œå†™æ“ä½œæ—¶ï¼ŒCacheä¼šåœ¨æ€»çº¿ä¸Šå‘é€ä¸€ä¸ªä½œåºŸæ“ä½œï¼Œå¹¶æŠŠè¯¥å—æ ‡è®°ä¸ºä¸“æœ‰ï¼ˆéå…±äº«ï¼‰ï¼›å½“å¯¹<u>ä¸“æœ‰æ•°æ®å—</u>è¿›è¡Œå†™æ“ä½œæ—¶ï¼Œç”±äºåªæœ‰è¯¥Cacheæœ‰æ•°æ®å—çš„å”¯ä¸€å‰¯æœ¬ï¼Œæ‰€ä»¥ä¸ç”¨å‘é€ä½œåºŸæ“ä½œåˆ°æ€»çº¿ä¸Šäº†ã€‚è¿™æ ·é¿å…äº†å‘é€ä½œåºŸæ“ä½œï¼Œå¯ä»¥èŠ‚çœæ—¶é—´å’Œå¸¦å®½ã€‚</p></li></ul><p>ä¸€è‡´æ€§åè®®æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªçŠ¶æ€æœºï¼Œå…·æœ‰è‹¥å¹²çŠ¶æ€ã€‚ä¸åŒçš„åè®®å…·æœ‰ä¸åŒçš„çŠ¶æ€ç»„åˆå’Œè½¬æ¢ç­–ç•¥ã€‚</p><p>å¯¹äºæ•°æ®å—çŠ¶æ€çš„æè¿°ï¼Œå¯ä»¥ç”¨ä»¥ä¸‹å››ä¸ªç‰¹å¾æ¥ç¼–ç ï¼š</p><ul><li><strong>æœ‰æ•ˆæ€§ï¼ˆValidityï¼‰</strong>ï¼šæœ‰æ•ˆçš„å—å«æœ‰æ•°æ®çš„æœ€æ–°å€¼ï¼Œå¯ä»¥è¢«è¯»ã€‚</li><li><strong>è‚®è„æ€§ï¼ˆDirtinessï¼‰</strong>ï¼šå¦‚æœä¸€ä¸ªCacheä¸­çš„å—ä¸åœ¨å†…å­˜ä¸­å¯¹åº”çš„å—æ˜¯ä¸åŒçš„ï¼Œé‚£ä¹ˆæ„å‘³ç€Cacheä¸­çš„å—æ˜¯è¢«ä¿®æ”¹è¿‡çš„ã€æœ€æ–°çš„ã€æœ‰æ•ˆçš„ï¼Œè¿˜æœªè¢«å†™å…¥å†…å­˜ï¼Œè€Œå†…å­˜ä¸­çš„å¯¹åº”å—æ˜¯æ—§çš„ã€æ— æ•ˆçš„ã€‚å› ä¸ºCacheä¸­çš„å—è¢«ä¿®æ”¹äº†ï¼Œæ‰€ä»¥ç§°å…¶ä¸ºâ€œè„â€çš„ã€‚</li><li><strong>ç‹¬å æ€§ï¼ˆExclusivityï¼‰</strong>ï¼šå¦‚æœç¼“å­˜å—æ˜¯ç³»ç»Ÿä¸­è¯¥å—çš„å”¯ä¸€ç§æœ‰ç¼“å­˜å‰¯æœ¬ï¼Œåˆ™è¯¥ç¼“å­˜å—æ˜¯ç‹¬å çš„ã€‚ï¼ˆå®ƒä¹Ÿå¯èƒ½å‡ºç°åœ¨å†…å­˜ä¸­ï¼Œä½†ä¸å¯èƒ½å‡ºç°åœ¨å…¶ä»–Cacheä¸­ï¼‰ã€‚</li><li><strong>æ‰€æœ‰æƒï¼ˆOwnershipï¼‰</strong>ï¼šå¦‚æœç¼“å­˜æ§åˆ¶å™¨ï¼ˆæˆ–å†…å­˜æ§åˆ¶å™¨ï¼‰è´Ÿè´£å“åº”å¯¹è¯¥å—çš„ä¸€è‡´æ€§è¯·æ±‚ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯è¯¥å—çš„æ‰€æœ‰è€…ã€‚</li></ul><p><strong>ç¨³æ€</strong></p><p>ä¸€è‡´æ€§åè®®å¸¸è§ç¨³å®šçŠ¶æ€ï¼š</p><ul><li>å…±äº«çŠ¶æ€ï¼ˆSï¼‰æ˜¯æŒ‡å—æ˜¯åŒäºä¸»å­˜çš„ï¼Œè¯¥å—å¯èƒ½è¿˜åœ¨å…¶ä»–Cacheä¸­ï¼Œä¹Ÿå¯èƒ½ä»…åœ¨è¯¥Cacheä¸­</li><li>ç‹¬å çŠ¶æ€ï¼ˆEï¼‰æ˜¯æŒ‡å—æ˜¯åŒäºä¸»å­˜çš„ï¼Œä»…åœ¨è¯¥Cacheä¸­</li><li>ä¿®æ”¹çŠ¶æ€ï¼ˆMï¼‰æ˜¯æŒ‡å—æ˜¯ä¸åŒä¸ä¸»å­˜çš„ï¼Œå³åœ¨Cacheä¸­å·²ç»è¢«æ›´æ–°ï¼›ä¿®æ”¹çŠ¶æ€æš—ç¤ºäº†æ­¤æ—¶çš„å—å·²ç»è¢«ç‹¬å ï¼Œå³ä»…åœ¨è¯¥Cacheä¸­</li><li>æ— æ•ˆçŠ¶æ€ï¼ˆIï¼‰æ˜¯æŒ‡å—é‡Œçš„æ•°æ®æ˜¯æ—§çš„ï¼Œå·²ç»å¤±æ•ˆäº†</li></ul><blockquote><p>NBï¼š</p><p>â€œåŒäºä¸»å­˜â€æ˜¯æŒ‡åœ¨Cacheä¸­çš„å—ä¸åœ¨å†…å­˜ä¸­å¯¹åº”çš„å—æ˜¯ç›¸åŒçš„ã€‚æœ‰æ—¶ä¹Ÿç§°æ˜¯â€œå¹²å‡€â€çš„</p><p>â€œä¸åŒäºä¸»å­˜â€æ˜¯æŒ‡åœ¨Cacheä¸­çš„å—ä¸åœ¨å†…å­˜ä¸­å¯¹åº”çš„å—æ˜¯ä¸åŒçš„ï¼Œå†…å­˜ä¸­çš„å—æ˜¯æ—§çš„ã€æ— æ•ˆçš„ã€‚æœ‰æ—¶ä¹Ÿç§°æ˜¯â€œè„â€çš„</p></blockquote><p><strong>M (Modified)ï¼š</strong>è¯¥å—æ˜¯æœ‰æ•ˆçš„ã€æ’ä»–çš„ã€æ‹¥æœ‰çš„ï¼Œå¹¶ä¸”å¯èƒ½æ˜¯è„çš„ã€‚ è¯¥å—å¯ä»¥è¢«è¯»å–æˆ–å†™å…¥ã€‚ ç¼“å­˜å…·æœ‰å—çš„å”¯ä¸€æœ‰æ•ˆå‰¯æœ¬ï¼Œç¼“å­˜å¿…é¡»å“åº”å¯¹å—çš„è¯·æ±‚ï¼Œå¹¶ä¸” LLC&#x2F;å†…å­˜ä¸­çš„å—å‰¯æœ¬å¯èƒ½æ˜¯é™ˆæ—§çš„ã€‚</p><p><strong>S (Shared)ï¼š</strong>è¯¥å—æœ‰æ•ˆä½†ä¸æ’ä»–ï¼Œä¸è„ï¼Œä¸æ‹¥æœ‰ã€‚ç¼“å­˜å…·æœ‰å—çš„åªè¯»å‰¯æœ¬ã€‚å…¶ä»–ç¼“å­˜å¯èƒ½å…·æœ‰è¯¥å—çš„æœ‰æ•ˆåªè¯»å‰¯æœ¬ã€‚</p><p><strong>I (Invalid)ï¼š</strong>å—æ— æ•ˆã€‚ç¼“å­˜è¦ä¹ˆä¸åŒ…å«å—ï¼Œè¦ä¹ˆåŒ…å«å¯èƒ½æ— æ³•è¯»å–æˆ–å†™å…¥çš„é™ˆæ—§å‰¯æœ¬ã€‚åœ¨æœ¬å…¥é—¨ä¹¦ä¸­ï¼Œæˆ‘ä»¬ä¸åŒºåˆ†è¿™ä¸¤ç§æƒ…å†µï¼Œå°½ç®¡æœ‰æ—¶å‰ä¸€ç§æƒ…å†µå¯ä»¥è¡¨ç¤ºä¸ºâ€œä¸å­˜åœ¨â€çŠ¶æ€ã€‚</p><p><strong>O (Owned)ï¼š</strong>è¯¥å—æ˜¯æœ‰æ•ˆçš„ï¼Œæ‹¥æœ‰çš„ï¼Œå¹¶ä¸”å¯èƒ½æ˜¯è„çš„ï¼Œä½†ä¸æ˜¯ç‹¬å çš„ã€‚ ç¼“å­˜å…·æœ‰å—çš„åªè¯»å‰¯æœ¬ï¼Œå¹¶ä¸”å¿…é¡»å“åº”å¯¹è¯¥å—çš„è¯·æ±‚ã€‚ å…¶ä»–ç¼“å­˜å¯èƒ½å…·æœ‰è¯¥å—çš„åªè¯»å‰¯æœ¬ï¼Œä½†å®ƒä»¬ä¸æ˜¯æ‰€æœ‰è€…ã€‚LLC&#x2F;å†…å­˜ä¸­çš„å—å‰¯æœ¬å¯èƒ½å·²è¿‡æ—¶ã€‚</p><p><strong>E (Exclusive)ï¼š</strong>è¯¥å—æ˜¯æœ‰æ•ˆçš„ã€æ’ä»–çš„å’Œå¹²å‡€çš„ã€‚ç¼“å­˜å…·æœ‰å—çš„åªè¯»å‰¯æœ¬ã€‚æ²¡æœ‰å…¶ä»–ç¼“å­˜æ‹¥æœ‰è¯¥å—çš„æœ‰æ•ˆå‰¯æœ¬ï¼Œå¹¶ä¸” LLC&#x2F;å†…å­˜ä¸­çš„å—å‰¯æœ¬æ˜¯æœ€æ–°çš„ã€‚åœ¨æœ¬å…¥é—¨ä¹¦ä¸­ï¼Œæˆ‘ä»¬è®¤ä¸ºå½“åŒºå—å¤„äºç‹¬å çŠ¶æ€æ—¶ï¼Œå®ƒæ˜¯æ‹¥æœ‰çš„ï¼Œå°½ç®¡åœ¨æŸäº›åè®®ä¸­ç‹¬å çŠ¶æ€ä¸è¢«è§†ä¸ºæ‰€æœ‰æƒçŠ¶æ€ã€‚å½“æˆ‘ä»¬åœ¨åé¢çš„ç« èŠ‚ä¸­ä»‹ç» MESI ç›‘å¬å’Œç›®å½•åè®®æ—¶ï¼Œæˆ‘ä»¬å°†è®¨è®ºæ˜¯å¦æŠŠç‹¬å å—è§†ä¸ºæ‰€æœ‰è€…çš„é—®é¢˜ã€‚</p><p>ç›‘å¬ä¸€è‡´æ€§åè®®ä¸€èˆ¬é€šè¿‡æ¯ä¸ªèŠ‚ç‚¹çš„æœ‰æ•ˆçŠ¶æ€æ§åˆ¶å™¨æ¥å®ç°ï¼Œæ§åˆ¶å™¨å¯¹æ¯ä¸ªæ¥è‡ª<strong>å¤„ç†å™¨</strong>å’Œ<strong>æ€»çº¿</strong>çš„è¯·æ±‚åšå‡ºå“åº”ï¼Œç„¶åæ”¹å˜å“åº”Cacheå—çš„çŠ¶æ€</p><h3 id="MSIåè®®"><a href="#MSIåè®®" class="headerlink" title="MSIåè®®"></a>MSIåè®®</h3><p>MSIåè®®æ˜¯æœ€åŸºç¡€çš„ç›‘å¬åè®®å®ç°ã€‚æœ‰<strong>æ— æ•ˆ</strong>ã€<strong>å…±äº«</strong>å’Œ<strong>ä¿®æ”¹</strong>ä¸‰ç§çŠ¶æ€</p><h3 id="MESIåè®®"><a href="#MESIåè®®" class="headerlink" title="MESIåè®®"></a>MESIåè®®</h3><p>MESIæ˜¯æœ€ç»å…¸çš„ç›‘å¬åè®®ã€‚æœ‰<strong>æ— æ•ˆ</strong>ã€<strong>å…±äº«</strong>ã€<strong>ç‹¬å </strong>å’Œ<strong>ä¿®æ”¹</strong>ä¸‰ç§çŠ¶æ€</p><p>ç›¸æ¯”äºMSIåè®®ï¼ŒMESIåè®®å¢åŠ äº†ç‹¬å ï¼ˆEï¼‰çŠ¶æ€ï¼Œæ˜¯ä¸€ç§æŠ•æœºæ€§ä¼˜åŒ–ï¼šå¦‚æœä¸€ä¸ªCPUæƒ³ä¿®æ”¹ä¸€ä¸ªå¤„äºSçŠ¶æ€çš„ç¼“å­˜è¡Œï¼Œæ€»çº¿äº‹åŠ¡éœ€è¦å°†æ‰€æœ‰è¯¥ç¼“å­˜è¡Œçš„copyå˜æˆinvalidçŠ¶æ€ï¼Œè€Œä¿®æ”¹EçŠ¶æ€çš„ç¼“å­˜ä¸éœ€è¦ä½¿ç”¨æ€»çº¿äº‹åŠ¡ã€‚</p><p>æ¼”ç¤ºMESIåè®®ç½‘é¡µ<a href="https://www.scss.tcd.ie/Jeremy.Jones/VivioJS/caches/MESI.htm">VivioJS MESI (tcd.ie)</a></p><h2 id="ç›‘å¬åè®®å’Œé›†ä¸­å¼å…±äº«å­˜å‚¨å™¨ä½“ç³»ç»“æ„çš„å±€é™æ€§"><a href="#ç›‘å¬åè®®å’Œé›†ä¸­å¼å…±äº«å­˜å‚¨å™¨ä½“ç³»ç»“æ„çš„å±€é™æ€§" class="headerlink" title="ç›‘å¬åè®®å’Œé›†ä¸­å¼å…±äº«å­˜å‚¨å™¨ä½“ç³»ç»“æ„çš„å±€é™æ€§"></a>ç›‘å¬åè®®å’Œé›†ä¸­å¼å…±äº«å­˜å‚¨å™¨ä½“ç³»ç»“æ„çš„å±€é™æ€§</h2><blockquote><p>éšç€å¤šå¤„ç†å™¨ä¸­å¤„ç†å™¨æ•°ç›®çš„å¢åŠ ï¼Œæˆ–è€…å¤„ç†å™¨å¯¹å­˜å‚¨å™¨å¸¦å®½çš„å¢åŠ ï¼Œç³»ç»Ÿçš„ä»»ä½•é›†ä¸­å¼èµ„æºéƒ½ä¼šæˆä¸ºâ€œç“¶é¢ˆâ€</p></blockquote><p>ä¾‹å¦‚åœ¨åŸºäºæ€»çº¿çš„å¤šå¤„ç†å™¨ä¸­ï¼Œæ€»çº¿å¿…é¡»åŒæ—¶æ”¯æŒç”±äºCacheå¯¼è‡´çš„å­˜å‚¨å™¨é€šä¿¡å’Œä¸€è‡´æ€§é€šä¿¡ã€‚å¦‚æœæ˜¯åªæœ‰ä¸€ä¸ªç‰©ç†å­˜å‚¨å™¨çš„é›†ä¸­å¼å…±äº«å­˜å‚¨å™¨ä½“ç³»ç»“æ„ï¼Œæ€»çº¿çš„å¸¦å®½ï¼ˆbandwidthï¼‰è´Ÿæ‹…ä¼šæå¤§ã€‚</p><p>ä¸ºäº†å¢åŠ å¤„ç†å™¨å’Œå­˜å‚¨å™¨ä¹‹é—´çš„é€šä¿¡å¸¦å®½ï¼Œè®¾è®¡è€…ä½¿ç”¨å¤šç§æ€»çº¿ä»¥åŠå„ç§äº’è”ç½‘ç»œï¼Œå¦‚äº¤å‰å¼€å…³å’Œå°å‹ç‚¹å¯¹ç‚¹ç½‘ç»œã€‚åœ¨è¯¥è®¾è®¡ä¸­ï¼Œå­˜å‚¨å™¨ç³»ç»Ÿå¯ä»¥è¢«é…ç½®ç§°å¤šä¸ªç‰©ç†ç»„ï¼Œæœ‰æ•ˆå¢åŠ å¸¦å®½ã€‚è¿™æ­£æ˜¯<u>é›†ä¸­å¼å…±äº«å­˜å‚¨å™¨å’Œåˆ†å¸ƒå¼å…±äº«å­˜å‚¨å™¨çš„ç»“åˆ</u>ã€‚</p><p>å›¾</p><p>ç”±ä¸Šä¾‹å¯çŸ¥ï¼Œä½¿ç”¨ç›‘å¬Cacheä¸€è‡´æ€§åè®®å¯ä»¥ä¸è¦æ±‚ä½¿ç”¨é›†ä¸­å¼æ€»çº¿è¿™æ ·çš„å¾ˆå®¹æ˜“é€ æˆå¸¦å®½ç“¶é¢ˆçš„é€šä¿¡æ–¹å¼ï¼Œä½†ä»ç„¶è¦æ±‚å®Œæˆå¹¿æ’­ã€‚ç”±äºä¸€è‡´æ€§é€šä¿¡é‡ä¸å¤„ç†å™¨é€Ÿåº¦æ²¡æœ‰å…³ç³»ï¼Œè¿™ç§ä¸€è‡´æ€§é€šä¿¡<u>é™åˆ¶äº†å¤„ç†å™¨çš„æ‰©å±•ä¸é€Ÿåº¦</u>ã€‚</p><h1 id="å››ã€ç›®å½•åè®®"><a href="#å››ã€ç›®å½•åè®®" class="headerlink" title="å››ã€ç›®å½•åè®®"></a>å››ã€ç›®å½•åè®®</h1><p>å¯¹äºç›‘å¬åè®®ï¼Œåœ¨å¤„ç†æ¯ä¸ªCacheç¼ºå¤±æ—¶ï¼Œéƒ½éœ€è¦å’Œæ‰€æœ‰çš„Cacheè¿›è¡Œé€šä¿¡ï¼Œé€ æˆå¸¦å®½ç“¶é¢ˆï¼Œé™åˆ¶äº†å¤„ç†å™¨çš„æ‰©å±•ã€‚</p><p>æ¯ä¸ªç›®å½•è´Ÿè´£è·Ÿè¸ªå…±äº«æœ¬åœ°å­˜å‚¨å™¨çš„Cacheï¼Œå­˜å‚¨å™¨çš„æ¯ä¸€å—åœ¨ç›®å½•ä¸­å¯¹åº”æœ‰ä¸€é¡¹</p><p>æ¯ä¸ªç›®å½•é¡¹ä¸»è¦æœ‰â€œçŠ¶æ€â€å’Œâ€œä½å‘é‡â€ä¸¤ç§æˆåˆ†ã€‚çŠ¶æ€æè¿°è¯¥ç›®å½•æ‰€å¯¹åº”çš„å­˜å‚¨å—çš„å½“å‰æƒ…å†µï¼›ä½å‘é‡æœ‰å¤„ç†å™¨æ•°é‡çš„ä½æ•°ï¼Œå…¶æ¯ä¸€ä½å¯¹åº”äºä¸€ä¸ªå¤„ç†å™¨çš„å±€éƒ¨Cacheï¼Œç”¨äºæŒ‡å‡ºè¯¥Cacheä¸­æœ‰æ— è¯¥å­˜å‚¨å—çš„å¤‡ä»½ã€‚</p><hr><p>æœ¬æ–‡æ˜¯å¯¹ã€Šè®¡ç®—æœºä½“ç³»ç»“æ„â€”â€”é‡åŒ–ç ”ç©¶æ–¹æ³•ï¼ˆç¬¬å››ç‰ˆï¼‰ã€‹å’Œã€Šè®¡ç®—æœºä½“ç³»ç»“æ„ï¼ˆç¬¬äºŒç‰ˆï¼‰ã€‹çš„ç›¸å…³ç« èŠ‚çš„æ•´ç†</p><p>å‚è€ƒé“¾æ¥ğŸ”—</p><p><a href="https://zhuanlan.zhihu.com/p/94811032">cacheä¹‹å¤šæ ¸ä¸€è‡´æ€§(ä¸€) - æ€»çº¿ä¸Šæ²¡æœ‰ç§˜å¯† - çŸ¥ä¹ (zhihu.com)</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Cacheä¸€è‡´æ€§åè®® </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¹¶è¡Œä½“ç³»ç»“æ„</title>
      <link href="/2023/11/24/%E5%B9%B6%E8%A1%8C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/"/>
      <url>/2023/11/24/%E5%B9%B6%E8%A1%8C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€å¹¶è¡Œä½“ç³»ç»“æ„çš„Flynnåˆ†ç±»æ³•"><a href="#ä¸€ã€å¹¶è¡Œä½“ç³»ç»“æ„çš„Flynnåˆ†ç±»æ³•" class="headerlink" title="ä¸€ã€å¹¶è¡Œä½“ç³»ç»“æ„çš„Flynnåˆ†ç±»æ³•"></a>ä¸€ã€å¹¶è¡Œä½“ç³»ç»“æ„çš„Flynnåˆ†ç±»æ³•</h1><h2 id="1-å•æŒ‡ä»¤æµï¼Œå•æ•°æ®æµï¼ˆSISDï¼‰"><a href="#1-å•æŒ‡ä»¤æµï¼Œå•æ•°æ®æµï¼ˆSISDï¼‰" class="headerlink" title="1. å•æŒ‡ä»¤æµï¼Œå•æ•°æ®æµï¼ˆSISDï¼‰"></a>1. å•æŒ‡ä»¤æµï¼Œå•æ•°æ®æµï¼ˆSISDï¼‰</h2><p>å•å¤„ç†å™¨ï¼Œå³ä¼ ç»Ÿçš„ã€ä¸²è¡Œçš„å†¯Â·è¯ºä¼Šæ›¼è®¡ç®—æœº</p><h2 id="2-å•æŒ‡ä»¤æµï¼Œå¤šæ•°æ®æµï¼ˆSIMDï¼‰"><a href="#2-å•æŒ‡ä»¤æµï¼Œå¤šæ•°æ®æµï¼ˆSIMDï¼‰" class="headerlink" title="2. å•æŒ‡ä»¤æµï¼Œå¤šæ•°æ®æµï¼ˆSIMDï¼‰"></a>2. å•æŒ‡ä»¤æµï¼Œå¤šæ•°æ®æµï¼ˆSIMDï¼‰</h2><p>åŒä¸€æ¡æŒ‡ä»¤è¢«å¤šä¸ªä½¿ç”¨ä¸åŒæ•°æ®æµçš„å¤šå¤„ç†å™¨æ‰§è¡Œï¼Œå®ç°<strong>æ•°æ®çº§å¹¶è¡Œ</strong></p><p>ä¾‹å¦‚ï¼šå‘é‡è®¡ç®—æœºã€é˜µåˆ—è®¡ç®—æœº</p><h2 id="3-å¤šæŒ‡ä»¤æµï¼Œå•æ•°æ®æµï¼ˆMISDï¼‰"><a href="#3-å¤šæŒ‡ä»¤æµï¼Œå•æ•°æ®æµï¼ˆMISDï¼‰" class="headerlink" title="3. å¤šæŒ‡ä»¤æµï¼Œå•æ•°æ®æµï¼ˆMISDï¼‰"></a>3. å¤šæŒ‡ä»¤æµï¼Œå•æ•°æ®æµï¼ˆMISDï¼‰</h2><p>å¥‡è‘©æ²¡æœ‰ç ”ç©¶ä»·å€¼</p><h2 id="4-å¤šæŒ‡ä»¤æµï¼Œå¤šæ•°æ®æµï¼ˆMIMDï¼‰"><a href="#4-å¤šæŒ‡ä»¤æµï¼Œå¤šæ•°æ®æµï¼ˆMIMDï¼‰" class="headerlink" title="4. å¤šæŒ‡ä»¤æµï¼Œå¤šæ•°æ®æµï¼ˆMIMDï¼‰"></a>4. å¤šæŒ‡ä»¤æµï¼Œå¤šæ•°æ®æµï¼ˆMIMDï¼‰</h2><p>æ¯ä¸ªå¤„ç†å™¨å–è‡ªå·±çš„æŒ‡ä»¤å¹¶å¯¹è‡ªå·±çš„æ•°æ®è¿›è¡Œæ“ä½œï¼Œå®ç°<strong>çº¿ç¨‹çº§å¹¶è¡Œ</strong></p><p>ä¾‹å¦‚ï¼šé›†ç¾¤ã€ç‰‡å†…å¤šå¤„ç†å™¨ï¼ˆå¤šæ ¸ï¼‰</p><ul><li><p>å…¶ä¸­ï¼ŒMIMDè®¡ç®—æœºæ›´åŠ å—åˆ°å­¦æœ¯å’Œå•†ä¸šä¸Šçš„å…³æ³¨ï¼Œè¿™æ˜¯å› ä¸ºä»¥ä¸‹ä¸¤ç‚¹ï¼š</p><ul><li><p><strong>çµæ´»æ€§å¼ºï¼š</strong>MIMDå¯ä»¥å®ç°çº¿ç¨‹çº§å¹¶è¡Œæœºåˆ¶ï¼Œå› æ­¤</p><p>ï¼ˆ1ï¼‰æ”¯æŒæ•°æ®çº§å¹¶è¡Œï¼šæ—¢å¯ä»¥ä½œä¸ºå•ç”¨æˆ·å¤šå¤„ç†å™¨ä¸ºå•ä¸€åº”ç”¨ç¨‹åºæä¾›é«˜æ€§èƒ½ï¼ˆä¸ºä¸€ä¸ªé«˜è´Ÿè½½ç¨‹åºæä¾›é«˜æ€§èƒ½ï¼‰</p><p>ï¼ˆ2ï¼‰æ”¯æŒä»»åŠ¡çº§å¹¶è¡Œï¼šä¹Ÿå¯ä»¥ä½œä¸ºåŒæ—¶è¿è¡Œå¤šä¸ªä»»åŠ¡çš„å¤šé“ç¨‹åºå¤šå¤„ç†å™¨ç³»ç»Ÿä½¿ç”¨ï¼ˆåŒæ—¶è¿è¡Œå¤šä¸ªç¨‹åºï¼‰</p><p>ï¼ˆ3ï¼‰ç”šè‡³å¯ä»¥æ”¯æŒæ•°æ®çº§å’Œä»»åŠ¡çº§ä¸¤ç§å¹¶è¡Œçš„åº”ç”¨ã€‚</p></li><li><p><strong>æ€§ä»·æ¯”é«˜ï¼š</strong>èƒ½å……åˆ†åˆ©ç”¨ç°æœ‰å¾®å¤„ç†å™¨çš„æ€§ä»·æ¯”ä¼˜åŠ¿ï¼Œå¤šæ ¸èŠ¯ç‰‡å¯ä»¥é€šè¿‡å¤åˆ¶çš„æ–¹å¼ï¼Œæœ‰æ•ˆé™ä½å•å¤„ç†å™¨å†…æ ¸çš„è®¾è®¡æˆæœ¬ã€‚</p></li></ul></li></ul><h1 id="äºŒã€MIMDåˆ†ç±»"><a href="#äºŒã€MIMDåˆ†ç±»" class="headerlink" title="äºŒã€MIMDåˆ†ç±»"></a>äºŒã€MIMDåˆ†ç±»</h1><p>æ ¹æ®å¤„ç†å™¨é—´é€šä¿¡æœºåˆ¶ï¼ˆä¼ é€’æ•°æ®æ‰€ç”¨çš„æ–¹æ³•ï¼‰ï¼ŒMIMDè¿˜å¯ä»¥åˆ†ä¸º<strong>å¤šå¤„ç†å™¨ç³»ç»Ÿ</strong>å’Œ<strong>å¤šè®¡ç®—æœºç³»ç»Ÿ</strong></p><h2 id="å¤šå¤„ç†å™¨ç³»ç»Ÿ"><a href="#å¤šå¤„ç†å™¨ç³»ç»Ÿ" class="headerlink" title="å¤šå¤„ç†å™¨ç³»ç»Ÿ"></a>å¤šå¤„ç†å™¨ç³»ç»Ÿ</h2><p>å¤šå¤„ç†å™¨ç³»ç»Ÿæ˜¯<strong>å…±äº«å†…å­˜</strong>çš„è®¡ç®—æœºã€‚å¤šä¸ªå¤„ç†å™¨é€šè¿‡é€»è¾‘ä¸Šå…±äº«çš„åœ°å€ç©ºé—´è¿›è¡Œé€šä¿¡ï¼Œæ¢è¨€ä¹‹ï¼ŒCPUä¸Šè¿è¡Œçš„æ“ä½œç³»ç»Ÿå¯ä»¥ç›´æ¥é€šè¿‡LOADæŒ‡ä»¤æˆ–è€…STOREæŒ‡ä»¤è®¿é—®å…¶ä»–è¿œç¨‹CPUçš„å†…å­˜å­—ã€‚</p><h2 id="å¤šè®¡ç®—æœºç³»ç»Ÿ"><a href="#å¤šè®¡ç®—æœºç³»ç»Ÿ" class="headerlink" title="å¤šè®¡ç®—æœºç³»ç»Ÿ"></a>å¤šè®¡ç®—æœºç³»ç»Ÿ</h2><p>å¤šè®¡ç®—æœºç³»ç»Ÿæ˜¯<strong>æ¶ˆæ¯ä¼ é€’</strong>çš„è®¡ç®—æœºï¼Œå¤šä¸ªå¤„ç†å™¨åœ¨é€»è¾‘ä¸Šæ²¡æœ‰å…±äº«çš„åœ°å€ç©ºé—´ï¼Œè€Œæ˜¯æœ‰å¤šä¸ªç§æœ‰çš„åœ°å€ç©ºé—´ç»„æˆï¼Œè¿™äº›åœ°å€ç©ºé—´åœ¨é€»è¾‘ä¸Šæ˜¯ç‹¬ç«‹åˆ†æ•£çš„ï¼Œæ¢è¨€ä¹‹ï¼ŒCPUåªèƒ½é€šè¿‡æ˜¾ç¤ºå‘é€æ¶ˆæ¯å¹¶ç­‰å¾…å“åº”çš„æ–¹å¼ä¸å…¶ä»–è¿œç¨‹CPUè¿›è¡Œé€šä¿¡ã€‚</p><p>å¤šå¤„ç†å™¨å’Œå¤šè®¡ç®—æœºä¸¤ç§ä½“ç³»ç»“æ„çš„å·®åˆ«</p><table><thead><tr><th></th><th>å¤šå¤„ç†å™¨</th><th>å¤šè®¡ç®—æœº</th></tr></thead><tbody><tr><td>CPUé—´é€šä¿¡æ–¹å¼</td><td>å…±äº«å†…å­˜ï¼ˆéšå¼åœ°ï¼Œé€šè¿‡loadã€storeæŒ‡ä»¤ï¼‰</td><td>æ¶ˆæ¯ä¼ é€’ï¼ˆæ˜¾å¼åœ°ï¼Œé€šè¿‡å‘é€ã€æ¥æ”¶æ¶ˆæ¯çš„å‡½æ•°ï¼‰</td></tr><tr><td>åœ°å€ç©ºé—´</td><td>æ‰€æœ‰CPUå…±äº«ä¸€ä¸ªå•ä¸€çš„ç‰©ç†åœ°å€ç©ºé—´</td><td>æ¯ä¸ªCPUéƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„ç‰©ç†åœ°å€ç©ºé—´</td></tr><tr><td>å¸¸è§ç¼–ç¨‹æ¨¡å‹</td><td>OpenMPç¼–ç¨‹æ¨¡å‹</td><td>MPIç¼–ç¨‹æ¨¡å‹</td></tr><tr><td></td><td></td><td></td></tr></tbody></table><h1 id="ä¸‰ã€å¤šå¤„ç†å™¨ç³»ç»Ÿ"><a href="#ä¸‰ã€å¤šå¤„ç†å™¨ç³»ç»Ÿ" class="headerlink" title="ä¸‰ã€å¤šå¤„ç†å™¨ç³»ç»Ÿ"></a>ä¸‰ã€å¤šå¤„ç†å™¨ç³»ç»Ÿ</h1><p>æ ¹æ®<strong>å­˜å‚¨å™¨ç»„ç»‡æ–¹å¼</strong>æˆ–è€…è¯´<strong>å…±äº«å†…å­˜çš„å®ç°æ–¹å¼</strong>ï¼Œå¯ä»¥è¿›ä¸€æ­¥æŠŠå¤šå¤„ç†å™¨ç³»ç»Ÿåˆ†ä¸ºä¸¤ç±»ï¼šé›†ä¸­å¼å…±äº«å­˜å‚¨å™¨ç³»ç»Ÿç»“æ„å’Œåˆ†å¸ƒå¼å­˜å‚¨å™¨ç³»ç»Ÿç»“æ„ã€‚</p><h2 id="é›†ä¸­å¼å…±äº«å­˜å‚¨å™¨ç³»ç»Ÿï¼ˆCentralized-Shared-Memory-CSMï¼‰"><a href="#é›†ä¸­å¼å…±äº«å­˜å‚¨å™¨ç³»ç»Ÿï¼ˆCentralized-Shared-Memory-CSMï¼‰" class="headerlink" title="é›†ä¸­å¼å…±äº«å­˜å‚¨å™¨ç³»ç»Ÿï¼ˆCentralized Shared-Memory, CSMï¼‰"></a>é›†ä¸­å¼å…±äº«å­˜å‚¨å™¨ç³»ç»Ÿï¼ˆCentralized Shared-Memory, CSMï¼‰</h2><p>å¯¹äºå¤„ç†æœºæ•°ç›®è¾ƒå°‘çš„å¤šå¤„ç†æœºï¼Œå„ä¸ªå¤„ç†æœºå¯ä»¥å…±äº«å•ä¸ªé›†ä¸­å¼å­˜å‚¨å™¨ã€‚å½“å¤„ç†æœºæ•°é‡å¾ˆå¤§æ—¶ï¼Œç”±äºè®¿é—®å†²çªä»¥åŠæ€»çº¿å¸¦å®½çš„é™åˆ¶ï¼Œè®¿é—®å»¶è¿Ÿå°±ä¼šå¾ˆå¤§ã€‚</p><ul><li><p><strong>ç»“æ„</strong>ï¼šå¤šä¸ªå¤„ç†å™¨-Cacheå­ç³»ç»Ÿå…±äº«åŒä¸€ä¸ªè¾ƒå¤§çš„ç‰©ç†å­˜å‚¨å™¨ã€‚</p></li><li><p><strong>å¦‚ä½•å®ç°å…±äº«å†…å­˜ï¼Ÿ</strong>å› ä¸ºå¤šå¤„ç†æœºç‰©ç†ä¸Šå…±äº«å•ä¸ªå­˜å‚¨å™¨ï¼Œå› æ­¤é€»è¾‘ä¸Šçš„å…±äº«æ˜¯è‡ªç„¶è€Œç„¶çš„ã€‚</p></li></ul><p>åˆ«ç§°ï¼šå› ä¸ºåªç”¨ä¸€ä¸ªå•ç‹¬çš„ä¸»å­˜ï¼Œè€Œä¸”è¿™ä¸ªä¸»å­˜å¯¹äºå„å¤„ç†å™¨çš„å…³ç³»æ˜¯å¯¹ç§°çš„ï¼Œæ‰€ä»¥å„å¤„ç†å™¨è®¿é—®è¿™ä¸ªä¸»å­˜çš„æ—¶é—´ç›¸åŒï¼Œæ‰€ä»¥è¿™ç§ç»“æ„æœ‰æ—¶è¢«ç§°ä¸º<u>å¯¹ç§°å¼å…±äº«å­˜å‚¨å™¨ç»“æ„</u>ï¼ˆSymmetric shared-memory MultiProcessor, SMPï¼‰ï¼Œæˆ–è€…<u>ä¸€è‡´æ€§å†…å­˜è®¿é—®è®¡ç®—</u>æœºï¼ˆUniform Memory Access, UMAï¼‰</p><blockquote><p>psï¼šä½¿ç”¨å¤§å®¹é‡Cache</p><p>å¯¹äºå…±äº«å­˜å‚¨å™¨ç»“æ„ï¼Œå­˜å‚¨å™¨å’Œæ€»çº¿çš„å¸¦å®½å¾€å¾€æ˜¯ç“¶é¢ˆï¼Œè€Œå¤§å®¹é‡ã€å¤šçº§Cacheå¯ä»¥å¾ˆå¤§ç¨‹åº¦åœ°é™ä½å¯¹å­˜å‚¨å™¨å’Œæ€»çº¿çš„å¸¦å®½è¦æ±‚ã€‚æ‰€ä»¥å…±äº«å­˜å‚¨å™¨ç»“æ„å¾€å¾€é‡‡ç”¨å¤§å®¹é‡Cacheã€‚</p></blockquote><h2 id="åˆ†å¸ƒå¼å…±äº«å­˜å‚¨å™¨ç³»ç»Ÿï¼ˆDistributed-Shared-Memory-DSMï¼‰"><a href="#åˆ†å¸ƒå¼å…±äº«å­˜å‚¨å™¨ç³»ç»Ÿï¼ˆDistributed-Shared-Memory-DSMï¼‰" class="headerlink" title="åˆ†å¸ƒå¼å…±äº«å­˜å‚¨å™¨ç³»ç»Ÿï¼ˆDistributed Shared-Memory, DSMï¼‰"></a>åˆ†å¸ƒå¼å…±äº«å­˜å‚¨å™¨ç³»ç»Ÿï¼ˆDistributed Shared-Memory, DSMï¼‰</h2><p>ä¸ºäº†æ”¯æŒæ›´å¤šçš„å¤„ç†æœºï¼Œå­˜å‚¨å™¨ä¸èƒ½æŒ‰ç…§é›†ä¸­å…±äº«æ–¹å¼ç»„ç»‡ï¼Œè€Œå¿…é¡»åˆ†å¸ƒäºå„ä¸ªå¤„ç†æœºã€‚</p><ul><li><p><strong>ç»“æ„</strong>ï¼šç”±å¤šä¸ªç‹¬ç«‹ç»“æ„æ„æˆï¼ˆç§°ä¸º<code>èŠ‚ç‚¹</code>ï¼‰ï¼Œæ¯ä¸ªèŠ‚ç‚¹åŒ…å«å¤„ç†å™¨ã€å­˜å‚¨å™¨ã€IOç³»ç»Ÿï¼Œå„ä¸ªèŠ‚ç‚¹é€šè¿‡äº’è”ç½‘ç»œè¿æ¥ã€‚</p></li><li><p><strong>å¦‚ä½•å®ç°å…±äº«å†…å­˜ï¼Ÿ</strong>ç‰©ç†ä¸Šåˆ†å¼€çš„å¤šä¸ªå­˜å‚¨å™¨çš„åœ°å€ç©ºé—´ç»„ç»‡æˆé€»è¾‘ä¸Šå…±äº«çš„åœ°å€ç©ºé—´ï¼Œå³åœ¨è¿™ç§æœºå™¨ä¸­ï¼Œä¸¤ä¸ªä¸åŒå¤„ç†å™¨ä¸­ç›¸åŒçš„ç‰©ç†åœ°å€æŒ‡å‘ä¸€ä¸ªå­˜å‚¨å™¨ä¸­çš„ç›¸åŒä½ç½®ã€‚å®ç°è¿™ä¸€æ•ˆæœéœ€è¦ç¡¬ä»¶æ”¯æŒå¤æ‚çš„å¤„ç†å™¨é—´æ•°æ®é€šä¿¡ï¼ŒåŒæ—¶æ—¶å»¶ä¹Ÿæ›´å¤§ã€‚</p></li></ul><p>åˆ«ç§°ï¼šç”±äºCPUå¯¹å†…å­˜å­—çš„è®¿é—®æ—¶é—´ä¾èµ–äºè¯¥å†…å­˜å­—åœ¨å­˜å‚¨å™¨ä¸­çš„å­˜æ”¾ä½ç½®ï¼Œæ‰€ä»¥ä¹Ÿè¢«ç§°ä¸º<u>éä¸€è‡´æ€§å†…å­˜è®¿é—®è®¡ç®—æœº</u>ï¼ˆNonUniform Memory Access, NUMAï¼‰</p><blockquote><p>Asideï¼šè¶…èŠ‚ç‚¹</p><p>æ¯ä¸ªèŠ‚ç‚¹è¿˜å¯èƒ½åŒ…å«è¾ƒå°‘æ•°ç›®ï¼ˆ2~8ï¼‰çš„å¤„ç†å™¨ï¼Œè¿™äº›å¤„ç†å™¨ä¹‹é—´å¯é‡‡ç”¨å¦ä¸€ç§æŠ€æœ¯ï¼ˆå¦‚æ€»çº¿ï¼‰äº’è”å½¢æˆç°‡ï¼Œè¿™æ ·çš„èŠ‚ç‚¹å«åšè¶…èŠ‚ç‚¹ã€‚è¿™å¯ä»¥è§†ä¸ºåˆ†å¸ƒå¼å…±äº«å­˜å‚¨å’Œé›†ä¸­å¼å…±äº«å­˜å‚¨çš„æ··åˆã€‚</p></blockquote><p>è¿™ç§å°†å­˜å‚¨å™¨åˆ†æ•£åˆ°å„ä¸ªèŠ‚ç‚¹çš„ç»“æ„æœ‰ä¸¤ä¸ªå¥½å¤„ï¼š</p><ol><li>å¦‚æœå¤§å¤šæ•°çš„è®¿é—®æ˜¯é’ˆå¯¹æœ¬èŠ‚ç‚¹çš„å±€éƒ¨å­˜å‚¨å™¨ï¼Œå¯é™ä½å¯¹å­˜å‚¨å™¨å’Œäº’è”ç½‘ç»œçš„å¸¦å®½è¦æ±‚ã€‚</li><li>å¯¹å±€éƒ¨å­˜å‚¨å™¨çš„è®¿é—®å»¶è¿Ÿä½</li></ol><p>ä½†ä¹Ÿæœ‰ç¼ºç‚¹ï¼š</p><ol><li>å¤„ç†å™¨ä¹‹é—´çš„é€šä¿¡è¾ƒå¤æ‚</li><li>å„å¤„ç†å™¨ä¹‹é—´è®¿é—®å»¶è¿Ÿè¾ƒå¤§</li></ol><h1 id="å››ã€å¤šè®¡ç®—æœºç³»ç»Ÿ"><a href="#å››ã€å¤šè®¡ç®—æœºç³»ç»Ÿ" class="headerlink" title="å››ã€å¤šè®¡ç®—æœºç³»ç»Ÿ"></a>å››ã€å¤šè®¡ç®—æœºç³»ç»Ÿ</h1><p>å¤šè®¡ç®—æœºç³»ç»Ÿç±»ä¼¼äºå¤šå¤„ç†å™¨ç³»ç»Ÿä¸­çš„åˆ†å¸ƒå¼å…±äº«å­˜å‚¨å™¨ç³»ç»Ÿï¼Œåªä¸è¿‡å¤šå¤„ç†å™¨çš„åœ°å€ç©ºé—´å¹¶æ²¡æœ‰ç»„ç»‡æˆé€»è¾‘ä¸Šå…±äº«çš„åœ°å€ç©ºé—´ï¼Œæˆ–è®¸å¯ä»¥ç§°ä¸º<u>åˆ†å¸ƒå¼éå…±äº«å­˜å‚¨å™¨ç³»ç»Ÿ</u>ï¼Œè¿™äº›ç§æœ‰åœ°å€ç©ºé—´åœ¨é€»è¾‘ä¸Šæ˜¯åˆ†æ•£çš„ã€‚å³åœ¨è¿™ç§æœºå™¨ä¸­ï¼Œä¸¤ä¸ªä¸åŒå¤„ç†å™¨ä¸­ç›¸åŒçš„ç‰©ç†åœ°å€åˆ†åˆ«æŒ‡å‘ä¸¤ä¸ªä¸åŒå­˜å‚¨å™¨ä¸­çš„ä¸åŒä½ç½®ã€‚</p><p>æ¯ä¸ªèŠ‚ç‚¹æœ¬è´¨ä¸Šæ˜¯ä¸€å°ç‹¬ç«‹çš„è®¡ç®—æœº</p><h1 id="äº”ã€ä¸¤ç§é€šä¿¡æœºåˆ¶"><a href="#äº”ã€ä¸¤ç§é€šä¿¡æœºåˆ¶" class="headerlink" title="äº”ã€ä¸¤ç§é€šä¿¡æœºåˆ¶"></a>äº”ã€ä¸¤ç§é€šä¿¡æœºåˆ¶</h1><p>å‰é¢æåˆ°ï¼Œå¤šå¤„ç†å™¨å’Œå¤šè®¡ç®—æœºçš„æœ€ä¸»è¦åŒºåˆ«å°±æ˜¯é€šä¿¡æœºåˆ¶çš„ä¸åŒï¼Œå¤šå¤„ç†å™¨é‡‡ç”¨å…±äº«å†…å­˜é€šä¿¡æœºåˆ¶ï¼Œå¤šè®¡ç®—æœºé‡‡ç”¨æ¶ˆæ¯ä¼ é€’é€šä¿¡æœºåˆ¶ã€‚</p><h2 id="å…±äº«å†…å­˜é€šä¿¡æœºåˆ¶"><a href="#å…±äº«å†…å­˜é€šä¿¡æœºåˆ¶" class="headerlink" title="å…±äº«å†…å­˜é€šä¿¡æœºåˆ¶"></a>å…±äº«å†…å­˜é€šä¿¡æœºåˆ¶</h2><p>ç”±äºå…±äº«åœ°å€ç©ºé—´ï¼Œå¯åˆ©ç”¨Loadå’ŒStoreæŒ‡ä»¤ä¸­çš„åœ°å€éšå«åœ°è¿›è¡Œæ•°æ®é€šä¿¡ã€‚</p><h2 id="æ¶ˆæ¯ä¼ é€’é€šä¿¡æœºåˆ¶"><a href="#æ¶ˆæ¯ä¼ é€’é€šä¿¡æœºåˆ¶" class="headerlink" title="æ¶ˆæ¯ä¼ é€’é€šä¿¡æœºåˆ¶"></a>æ¶ˆæ¯ä¼ é€’é€šä¿¡æœºåˆ¶</h2><p>ç”±äºæœ‰å¤šä¸ªåœ°å€ç©ºé—´ï¼Œæ•°æ®é€šä¿¡è¦é€šå¤„ç†å™¨é—´æ˜¾å¼åœ°ä¼ é€’æ¶ˆæ¯å®Œæˆã€‚</p><p>åŒæ­¥</p><p>å¼‚æ­¥</p>]]></content>
      
      
      
        <tags>
            
            <tag> å¹¶è¡Œä½“ç³»ç»“æ„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gem5æ¨¡æ‹Ÿå™¨å­¦ä¹ ï¼ˆä¸ƒï¼‰</title>
      <link href="/2023/11/23/Gem5%E6%A8%A1%E6%8B%9F%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%83%EF%BC%89/"/>
      <url>/2023/11/23/Gem5%E6%A8%A1%E6%8B%9F%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%83%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="gem5é™„å¸¦çš„é»˜è®¤é…ç½®è„šæœ¬"><a href="#gem5é™„å¸¦çš„é»˜è®¤é…ç½®è„šæœ¬" class="headerlink" title="gem5é™„å¸¦çš„é»˜è®¤é…ç½®è„šæœ¬"></a>gem5é™„å¸¦çš„é»˜è®¤é…ç½®è„šæœ¬</h1><p>æœ¬æ–‡æ˜¯å¯¹å®˜ç½‘æ•™ç¨‹<a href="https://www.gem5.org/documentation/learning_gem5/part1/example_configs/">gem5: Using the default configuration scripts</a>çš„æ•´ç†ï¼Œä¸»è¦ä»‹ç»äº†</p><p>gem5é™„å¸¦äº†è®¸å¤šé…ç½®è„šæœ¬ï¼Œå…è®¸ç”¨æˆ·éå¸¸å¿«é€Ÿåœ°ä½¿ç”¨gem5ã€‚</p><h2 id="1-configsæ–‡ä»¶å¤¹"><a href="#1-configsæ–‡ä»¶å¤¹" class="headerlink" title="1. configsæ–‡ä»¶å¤¹"></a>1. configsæ–‡ä»¶å¤¹</h2><p>gem5ä¸­çš„å…¨éƒ¨é…ç½®è„šæœ¬éƒ½åœ¨<code>configs</code>æ–‡ä»¶å¤¹ä¸­ï¼Œè¯¥æ–‡ä»¶å¤¹çš„ç»“æ„å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">configs/boot:</span><br><span class="line">bbench-gb.rcS  bbench-ics.rcS  hack_back_ckpt.rcS  halt.sh</span><br><span class="line"></span><br><span class="line">configs/common:</span><br><span class="line">Benchmarks.py   Caches.py  cpu2000.py    FileSystemConfig.py  GPUTLBConfig.py   HMC.py       MemConfig.py   Options.py     Simulation.py</span><br><span class="line">CacheConfig.py  cores      CpuConfig.py  FSConfig.py          GPUTLBOptions.py  __init__.py  ObjectList.py  SimpleOpts.py  SysPaths.py</span><br><span class="line"></span><br><span class="line">configs/dist:</span><br><span class="line">sw.py</span><br><span class="line"></span><br><span class="line">configs/dram:</span><br><span class="line">lat_mem_rd.py  low_power_sweep.py  sweep.py</span><br><span class="line"></span><br><span class="line">configs/example:</span><br><span class="line">apu_se.py  etrace_replay.py  garnet_synth_traffic.py  hmctest.py    hsaTopology.py  memtest.py  read_config.py  ruby_direct_test.py      ruby_mem_test.py     sc_main.py</span><br><span class="line">arm        fs.py             hmc_hello.py             hmc_tgen.cfg  memcheck.py     noc_config  riscv           ruby_gpu_random_test.py  ruby_random_test.py  se.py</span><br><span class="line"></span><br><span class="line">configs/learning_gem5:</span><br><span class="line">part1  part2  part3  README</span><br><span class="line"></span><br><span class="line">configs/network:</span><br><span class="line">__init__.py  Network.py</span><br><span class="line"></span><br><span class="line">configs/nvm:</span><br><span class="line">sweep_hybrid.py  sweep.py</span><br><span class="line"></span><br><span class="line">configs/ruby:</span><br><span class="line">AMD_Base_Constructor.py  CHI.py        Garnet_standalone.py  __init__.py              MESI_Three_Level.py  MI_example.py      MOESI_CMP_directory.py  MOESI_hammer.py</span><br><span class="line">CHI_config.py            CntrlBase.py  GPU_VIPER.py          MESI_Three_Level_HTM.py  MESI_Two_Level.py    MOESI_AMD_Base.py  MOESI_CMP_token.py      Ruby.py</span><br><span class="line"></span><br><span class="line">configs/splash2:</span><br><span class="line">cluster.py  run.py</span><br><span class="line"></span><br><span class="line">configs/topologies:</span><br><span class="line">BaseTopology.py  Cluster.py  CrossbarGarnet.py  Crossbar.py  CustomMesh.py  __init__.py  MeshDirCorners_XY.py  Mesh_westfirst.py  Mesh_XY.py  Pt2Pt.py</span><br></pre></td></tr></table></figure><h3 id="boot"><a href="#boot" class="headerlink" title="boot&#x2F;"></a>boot&#x2F;</h3><p>è¿™äº›æ˜¯åœ¨å…¨ç³»ç»Ÿæ¨¡å¼ä¸‹ä½¿ç”¨çš„rcSæ–‡ä»¶ã€‚è¿™äº›æ–‡ä»¶åœ¨Linuxå¼•å¯¼åç”±æ¨¡æ‹Ÿå™¨åŠ è½½ï¼Œå¹¶ç”±shellæ‰§è¡Œã€‚å…¶ä¸­å¤§å¤šæ•°ç”¨äºåœ¨å…¨ç³»ç»Ÿæ¨¡å¼ä¸‹è¿è¡Œæ—¶æ§åˆ¶åŸºå‡†æµ‹è¯•ã€‚æœ‰äº›æ˜¯å®ç”¨å‡½æ•°ï¼Œå¦‚hack_back_ckpt.rcSã€‚åœ¨å…¨ç³»ç»Ÿæ¨¡æ‹Ÿä¸€ç« ä¸­ï¼Œå°†æ›´æ·±å…¥åœ°ä»‹ç»è¿™äº›æ–‡ä»¶ã€‚</p><h3 id="common"><a href="#common" class="headerlink" title="common&#x2F;"></a>common&#x2F;</h3><p>commonç›®å½•åŒ…å«è®¸å¤šç”¨äºåˆ›å»ºæ¨¡æ‹Ÿç³»ç»Ÿçš„è¾…åŠ©è„šæœ¬å’Œå‡½æ•°ã€‚ä¾‹å¦‚ï¼Œ</p><p><code>Caches.py</code>ç±»ä¼¼äºå‰å‡ ç« ä¸­åˆ›å»ºçš„Caches.pyå’ŒCaches_opts.pyæ–‡ä»¶ã€‚</p><p><code>Options.py</code>åŒ…å«å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸Šè®¾ç½®çš„å„ç§é€‰é¡¹ã€‚æ¯”å¦‚CPUçš„æ•°é‡ã€ç³»ç»Ÿæ—¶é’Ÿç­‰ç­‰ã€‚è¿™æ˜¯æŸ¥çœ‹è¦æ›´æ”¹çš„é€‰é¡¹æ˜¯å¦å·²ç»æœ‰å‘½ä»¤è¡Œå‚æ•°çš„å¥½åœ°æ–¹ã€‚</p><p><code>CacheConfig.py</code>åŒ…å«ç”¨äºä¸ºç»å…¸å†…å­˜ç³»ç»Ÿè®¾ç½®ç¼“å­˜å‚æ•°çš„é€‰é¡¹å’Œå‡½æ•°ã€‚</p><p><code>MemConfig.py</code>æä¾›äº†ä¸€äº›å¸®åŠ©å‡½æ•°ï¼Œç”¨äºè®¾ç½®å†…å­˜ç³»ç»Ÿã€‚</p><p><code>FSConfig.py</code>åŒ…å«ä¸ºè®¸å¤šä¸åŒç±»å‹çš„ç³»ç»Ÿè®¾ç½®å…¨ç³»ç»Ÿä»¿çœŸæ‰€éœ€çš„åŠŸèƒ½ã€‚å…¨ç³»ç»Ÿä»¿çœŸå°†åœ¨æœ¬ç« ä¸­è¿›ä¸€æ­¥è®¨è®ºã€‚</p><p><code>Simulation.py</code>åŒ…å«è®¸å¤šç”¨äºè®¾ç½®å’Œè¿è¡Œgem5çš„è¾…åŠ©å‡½æ•°ã€‚è¯¥æ–‡ä»¶ä¸­åŒ…å«çš„è®¸å¤šä»£ç ç®¡ç†ä¿å­˜å’Œæ¢å¤æ£€æŸ¥ç‚¹ã€‚ä¸‹é¢ç¤ºä¾‹ä¸­çš„ç¤ºä¾‹é…ç½®æ–‡ä»¶ä½¿ç”¨è¯¥æ–‡ä»¶ä¸­çš„å‡½æ•°æ¥æ‰§è¡Œgem5æ¨¡æ‹Ÿã€‚è¯¥æ–‡ä»¶ç›¸å½“å¤æ‚ï¼Œä½†å®ƒä¹Ÿå…è®¸åœ¨æ¨¡æ‹Ÿè¿è¡Œæ–¹å¼ä¸Šæœ‰å¾ˆå¤§çš„çµæ´»æ€§ã€‚</p><h3 id="dram"><a href="#dram" class="headerlink" title="dram&#x2F;"></a>dram&#x2F;</h3><p>åŒ…å«æµ‹è¯•DRAMçš„è„šæœ¬ã€‚</p><h3 id="example"><a href="#example" class="headerlink" title="example&#x2F;"></a>example&#x2F;</h3><p>æ­¤ç›®å½•åŒ…å«ä¸€äº›ç¤ºä¾‹ gem5é…ç½®è„šæœ¬ï¼Œå¯ä»¥ä½¿ç”¨è¿™äº›è„šæœ¬å³å¼€å³ç”¨åœ°è¿è¡Œ gem5ã€‚å…·ä½“æ¥è¯´ï¼Œse.py å’Œ fs.py éå¸¸æœ‰ç”¨ã€‚æœ‰å…³è¿™äº›æ–‡ä»¶çš„æ›´å¤šä¿¡æ¯å¯ä»¥åœ¨ä¸‹ä¸€èŠ‚ä¸­æ‰¾åˆ°ã€‚æ­¤ç›®å½•ä¸­è¿˜æœ‰ä¸€äº›å…¶ä»–å®ç”¨ç¨‹åºé…ç½®è„šæœ¬ã€‚</p><h3 id="learning-gem5"><a href="#learning-gem5" class="headerlink" title="learning_gem5&#x2F;"></a>learning_gem5&#x2F;</h3><p>è¯¥ç›®å½•åŒ…å«learning_gem5ä¹¦ä¸­çš„æ‰€æœ‰gem5é…ç½®è„šæœ¬ã€‚</p><h3 id="network"><a href="#network" class="headerlink" title="network&#x2F;"></a>network&#x2F;</h3><p>æ­¤ç›®å½•åŒ…å«HeteroGarnetç½‘ç»œçš„é…ç½®è„šæœ¬ã€‚</p><h3 id="nvm"><a href="#nvm" class="headerlink" title="nvm&#x2F;"></a>nvm&#x2F;</h3><p>æ­¤ç›®å½•åŒ…å«ä½¿ç”¨NVMæ¥å£çš„ç¤ºä¾‹è„šæœ¬ã€‚</p><h3 id="ruby"><a href="#ruby" class="headerlink" title="ruby&#x2F;"></a>ruby&#x2F;</h3><p>è¯¥ç›®å½•åŒ…å«Rubyçš„é…ç½®è„šæœ¬åŠå…¶åŒ…å«çš„ç¼“å­˜ä¸€è‡´æ€§åè®®ã€‚</p><h3 id="splash2"><a href="#splash2" class="headerlink" title="splash2&#x2F;"></a>splash2&#x2F;</h3><p>è¯¥ç›®å½•åŒ…å«ç”¨äºè¿è¡Œsplash2åŸºå‡†æµ‹è¯•å¥—ä»¶çš„è„šæœ¬ï¼Œä»¥åŠç”¨äºé…ç½®æ¨¡æ‹Ÿç³»ç»Ÿçš„ä¸€äº›é€‰é¡¹ã€‚</p><h3 id="topologies"><a href="#topologies" class="headerlink" title="topologies&#x2F;"></a>topologies&#x2F;</h3><p>è¯¥ç›®å½•åŒ…å«åœ¨åˆ›å»ºRubyç¼“å­˜å±‚æ¬¡ç»“æ„æ—¶å¯ä»¥ä½¿ç”¨çš„æ‹“æ‰‘çš„å®ç°ã€‚</p><h2 id="2-se-py-fs-py"><a href="#2-se-py-fs-py" class="headerlink" title="2. se.py&amp;fs.py"></a>2. se.py&amp;fs.py</h2><p>SEæ¨¡å¼é»˜è®¤é…ç½®è„šæœ¬se.pyå’ŒFSæ¨¡å¼é»˜è®¤é…ç½®è„šæœ¬fs.pyå‡ä½äºç›®å½•configs&#x2F;example&#x2F;ï¼Œä¸‹é¢ä»¥se.pyä¸ºä¾‹ä»‹ç»å®ƒä»¬é€šç”¨çš„å‘½ä»¤è¡Œé€‰é¡¹ï¼š</p><ul><li><p>é€šè¿‡<code>--cmd=</code>é€‰é¡¹æŒ‡å®šäºŒè¿›åˆ¶æ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">build/X86/gem5.opt configs/example/se.py --cmd=tests/test-progs/hello/bin/x86/linux/hello</span><br></pre></td></tr></table></figure></li><li><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸¤ä¸ªé…ç½®è„šæœ¬å‡ä½¿ç”¨ atomic CPUå’Œ atomic memory accessesï¼Œå› æ­¤æ²¡æœ‰æ—¶é—´ç»Ÿè®¡æ•°æ®äº§ç”Ÿ</p><p>å¯é€šè¿‡<code>--cpu-type=CPU_TYPE</code>æŒ‡å®šCPUç±»å‹ï¼Œé€šè¿‡<code>--mem-type=MEM_TYPE</code>æŒ‡å®šå†…å­˜ç±»å‹ã€‚</p></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> é»˜è®¤é…ç½®è„šæœ¬ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pthreadå­¦ä¹ </title>
      <link href="/2023/11/20/pthread%E5%AD%A6%E4%B9%A0/"/>
      <url>/2023/11/20/pthread%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<h1 id="1-pthread-exit-å‡½æ•°ï¼šç»ˆæ­¢çº¿ç¨‹"><a href="#1-pthread-exit-å‡½æ•°ï¼šç»ˆæ­¢çº¿ç¨‹" class="headerlink" title="1. pthread_exit()å‡½æ•°ï¼šç»ˆæ­¢çº¿ç¨‹"></a>1. pthread_exit()å‡½æ•°ï¼šç»ˆæ­¢çº¿ç¨‹</h1><p><a href="https://c.biancheng.net/view/8608.html">pthread_exit()å‡½æ•°ï¼šç»ˆæ­¢çº¿ç¨‹ (biancheng.net)</a></p><p>çº¿ç¨‹å‡½æ•°é€šè¿‡pthread_exitå‡½æ•°æˆ–returnè¯­å¥è¿”å›å€¼ã€‚</p><h1 id="2-pthread-join-å‡½æ•°ï¼šç­‰å¾…çº¿ç¨‹æ‰§è¡Œç»“æŸ"><a href="#2-pthread-join-å‡½æ•°ï¼šç­‰å¾…çº¿ç¨‹æ‰§è¡Œç»“æŸ" class="headerlink" title="2. pthread_join()å‡½æ•°ï¼šç­‰å¾…çº¿ç¨‹æ‰§è¡Œç»“æŸ"></a>2. pthread_join()å‡½æ•°ï¼šç­‰å¾…çº¿ç¨‹æ‰§è¡Œç»“æŸ</h1><p><a href="https://c.biancheng.net/view/8628.html">pthread_join()å‡½æ•°ï¼šç­‰å¾…çº¿ç¨‹æ‰§è¡Œç»“æŸ (biancheng.net)</a></p><p>ä¸»å‡½æ•°é€šè¿‡pthread_joinå‡½æ•°è·å¾—è¿”å›å€¼ã€‚æ— è®ºæ˜¯é‡‡ç”¨ return è¯­å¥è¿˜æ˜¯è°ƒç”¨ pthread_exit() å‡½æ•°ï¼Œä¸»çº¿ç¨‹ä¸­çš„ pthread_join() å‡½æ•°éƒ½å¯ä»¥æ¥æ”¶åˆ°çº¿ç¨‹çš„è¿”å›å€¼ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> pthread </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxå­¦ä¹ â€”â€”é¸Ÿå“¥ç§æˆ¿èœ</title>
      <link href="/2023/11/13/Linux%E5%AD%A6%E4%B9%A0%E2%80%94%E2%80%94%E9%B8%9F%E5%93%A5%E7%A7%81%E6%88%BF%E8%8F%9C/"/>
      <url>/2023/11/13/Linux%E5%AD%A6%E4%B9%A0%E2%80%94%E2%80%94%E9%B8%9F%E5%93%A5%E7%A7%81%E6%88%BF%E8%8F%9C/</url>
      
        <content type="html"><![CDATA[<p><a href="https://wizardforcel.gitbooks.io/vbird-linux-basic-4e/content/1.html">ç›®å½•åŠæ¦‚è¿° | é¸Ÿå“¥çš„ Linux ç§æˆ¿èœï¼šåŸºç¡€å­¦ä¹ ç¯‡ ç¬¬å››ç‰ˆ (gitbooks.io)</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Python import</title>
      <link href="/2023/11/10/Python-import/"/>
      <url>/2023/11/10/Python-import/</url>
      
        <content type="html"><![CDATA[<p>æ€»ç»“ä¸‹python importçš„é›¶ç¢çŸ¥è¯†</p><h1 id="importçš„ä½œç”¨"><a href="#importçš„ä½œç”¨" class="headerlink" title="importçš„ä½œç”¨"></a>importçš„ä½œç”¨</h1><p>importè¯­å¥ç”¨æ¥å¯¼å…¥å…¶ä»–pythonæ–‡ä»¶ï¼ˆç§°ä¸ºæ¨¡å—moduleï¼‰ï¼Œä½¿ç”¨è¯¥æ¨¡å—é‡Œå®šä¹‰çš„ç±»ã€æ–¹æ³•æˆ–è€…å˜é‡ï¼Œä»è€Œè¾¾åˆ°ä»£ç å¤ç”¨çš„ç›®çš„ã€‚</p><h1 id="import-çš„åŸºæœ¬ç”¨æ³•ï¼š"><a href="#import-çš„åŸºæœ¬ç”¨æ³•ï¼š" class="headerlink" title="import çš„åŸºæœ¬ç”¨æ³•ï¼š"></a>import çš„åŸºæœ¬ç”¨æ³•ï¼š</h1><p><strong>åŸºæœ¬æ¦‚å¿µï¼š</strong></p><ul><li>æ¨¡å—ï¼ˆmoduleï¼‰ï¼šä¸€èˆ¬æ˜¯ä»¥.pyç»“å°¾çš„pythonæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ˜¯â€.pyoâ€ã€â€.pycâ€ã€â€.pydâ€ã€â€.soâ€ã€â€.dllâ€ç»“å°¾çš„æ–‡ä»¶ã€‚</li></ul><p>æ¨¡å—å¯ä»¥å®šä¹‰å‡½æ•°ã€ç±»ã€å˜é‡ï¼Œä¹Ÿèƒ½åŒ…å«å¯æ‰§è¡Œçš„ä»£ç ã€‚moduleæ¥æºæœ‰3ç§ï¼š<br>â‘ Pythonå†…ç½®çš„æ¨¡å—ï¼ˆæ ‡å‡†åº“ï¼‰ï¼›<br>â‘¡ç¬¬ä¸‰æ–¹æ¨¡å—ï¼›<br>â‘¢è‡ªå®šä¹‰æ¨¡å—ã€‚</p><ul><li>åŒ…ï¼ˆpackageï¼‰ï¼šå«æœ‰Pythonæ¨¡å—çš„æ–‡ä»¶å¤¹</li></ul><h3 id="ç”¨æ³•ä¸€ï¼šimport"><a href="#ç”¨æ³•ä¸€ï¼šimport" class="headerlink" title="ç”¨æ³•ä¸€ï¼šimport []"></a>ç”¨æ³•ä¸€ï¼šimport []</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import [module_name\package_name]</span><br></pre></td></tr></table></figure><p>Pythonä¼šåœ¨ä¸¤ä¸ªåœ°æ–¹å¯»æ‰¾è¿™ä¸ªæ¨¡å—ï¼Œ</p><p>ç¬¬ä¸€æ˜¯<strong>sys.path</strong>ï¼ˆé€šè¿‡è¿è¡Œä»£ç <code>import sys; print(sys.path)</code>æŸ¥çœ‹ï¼‰ï¼Œosè¿™ä¸ªæ¨¡å—æ‰€åœ¨çš„ç›®å½•å°±åœ¨åˆ—è¡¨sys.pathä¸­ï¼Œä¸€èˆ¬å®‰è£…çš„Pythonåº“çš„ç›®å½•éƒ½å¯ä»¥åœ¨sys.pathä¸­æ‰¾åˆ°ï¼Œæ‰€ä»¥å¯¹äºå®‰è£…å¥½çš„åº“ï¼Œæˆ‘ä»¬ç›´æ¥importå³å¯ã€‚</p><p>ç¬¬äºŒä¸ªåœ°æ–¹å°±æ˜¯<strong>è¿è¡Œæ–‡ä»¶æ‰€åœ¨çš„ç›®å½•</strong>ã€‚</p><h3 id="ç”¨æ³•äºŒï¼šfrom-import"><a href="#ç”¨æ³•äºŒï¼šfrom-import" class="headerlink" title="ç”¨æ³•äºŒï¼šfrom [] import []"></a>ç”¨æ³•äºŒï¼šfrom [] import []</h3><p>ä»åŒ…ä¸­å¼•å…¥æ¨¡å—çš„importè¯­å¥å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">from [module_name\package_name] import [module_name\package_name\method]</span><br></pre></td></tr></table></figure><p>å¯¼å…¥ä¸€ä¸ªåŒ…çš„æ—¶å€™ï¼Œå®é™…ä¸Šå°±æ˜¯å¯¼å…¥åŒ…é‡Œé¢çš„<code>__init__.py</code>ä½œä¸ºæ¨¡å—</p><h1 id="importçš„å·¥ä½œåŸç†"><a href="#importçš„å·¥ä½œåŸç†" class="headerlink" title="importçš„å·¥ä½œåŸç†"></a>importçš„å·¥ä½œåŸç†</h1><p>ä¸‹é¢è§£æä¸€ä¸‹pythonçš„å¯¼å…¥æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚å‡è®¾ä½ å¯¼å…¥äº†ä¸€ä¸ªabcæ¨¡å—ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import abc</span><br></pre></td></tr></table></figure><p>python æ˜¯å¦‚ä½•æ‰¾åˆ°è¿™ä¸ªæ¨¡å—çš„å‘¢ï¼Ÿ</p><ol><li><p>é¦–å…ˆï¼Œpythonä¼šåœ¨<code>sys.modules</code>ä¸­æŸ¥æ‰¾è¿™ä¸ªæ¨¡å—åï¼Œ<code>sys.modules</code>æ˜¯å…ˆå‰æ›¾è¢«å¯¼å…¥è¿‡çš„æ‰€æœ‰æ¨¡å—çš„ç¼“å­˜ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯ä¹‹å‰è¢«å¯¼å…¥è¿‡çš„æ¨¡å—ï¼Œéƒ½è¢«æš‚æ—¶ä¿å­˜åœ¨é‡Œé¢ã€‚</p></li><li><p>å¦‚æœåœ¨ç¼“å­˜ä¸­æ‰¾ä¸åˆ°è¿™ä¸ªæ¨¡å—ï¼Œpythonæ¥ä¸‹æ¥ä¼šåœ¨<strong>å†…ç½®çš„æ¨¡å—ï¼ˆæ ‡å‡†åº“ï¼‰</strong>ä¸­å¯»æ‰¾</p></li><li><p>å¦‚æœå†…ç½®æ¨¡å—ä¹Ÿæ‰¾ä¸åˆ°ï¼ŒPythonå°†ä¼šå»<code>sys.path</code> å®šä¹‰çš„æ–‡ä»¶å¤¹åˆ—è¡¨ä¸­æœç´¢ï¼Œsys.path ä¸­é»˜è®¤çš„è·¯å¾„ä¸ºï¼š</p><ul><li>å½“å‰ç›®å½•çš„è·¯å¾„ï¼Œè‡ªå®šä¹‰çš„æ¨¡å—å°±æ˜¯åœ¨è¿™é‡Œè¢«æ‰¾åˆ°çš„ã€‚</li><li>ç¯å¢ƒå˜é‡ PYTHONPATH ä¸­æŒ‡å®šçš„è·¯å¾„åˆ—è¡¨</li><li>Python å®‰è£…è·¯å¾„çš„ lib ç›®å½•æ‰€åœ¨è·¯å¾„</li></ul></li></ol><p>å¦‚æœä»¥ä¸Šæ­¥éª¤éƒ½æ‰¾ä¸åˆ°è¿™ä¸ªæ¨¡å—ï¼Œpythonä¼šæŠ¥é”™ModuleNotFoundError</p><p><a href="https://zhuanlan.zhihu.com/p/87238735">è¯¦è§£ Python import æœºåˆ¶ (ä¸€):import ä¸­çš„åŸºæœ¬æ¦‚å¿µ - çŸ¥ä¹ (zhihu.com)</a></p><h1 id="all-å˜é‡æš´æ¼æ¥å£"><a href="#all-å˜é‡æš´æ¼æ¥å£" class="headerlink" title="__all__å˜é‡æš´æ¼æ¥å£"></a>__all__å˜é‡æš´æ¼æ¥å£</h1><p><a href="https://blog.csdn.net/zylooooooooong/article/details/115564782">python _<em>all__ç”¨æ³•</em>-å¾å¾å›¾ä¹‹-çš„åšå®¢-CSDNåšå®¢</a></p><h1 id="init-æ–‡ä»¶"><a href="#init-æ–‡ä»¶" class="headerlink" title="__init__æ–‡ä»¶"></a>__init__æ–‡ä»¶</h1>]]></content>
      
      
      
        <tags>
            
            <tag> python import </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾åƒæ‹¼æ¥å’Œå…¨æ™¯æ„é€ </title>
      <link href="/2023/11/08/%E5%9B%BE%E5%83%8F%E6%8B%BC%E6%8E%A5%E5%92%8C%E5%85%A8%E6%99%AF%E6%9E%84%E9%80%A0/"/>
      <url>/2023/11/08/%E5%9B%BE%E5%83%8F%E6%8B%BC%E6%8E%A5%E5%92%8C%E5%85%A8%E6%99%AF%E6%9E%84%E9%80%A0/</url>
      
        <content type="html"><![CDATA[<p><a href="https://blog.csdn.net/learning_tortosie/article/details/85083825">ä½¿ç”¨OpenCVå’ŒPythonæ‹¼æ¥å›¾åƒ_opencv python åˆå¹¶å›¾ç‰‡-CSDNåšå®¢</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>RISCVå·¥å…·é“¾</title>
      <link href="/2023/11/08/RISCV%E5%B7%A5%E5%85%B7%E9%93%BE/"/>
      <url>/2023/11/08/RISCV%E5%B7%A5%E5%85%B7%E9%93%BE/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»€ä¹ˆæ˜¯å·¥å…·é“¾ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯å·¥å…·é“¾ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯å·¥å…·é“¾ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯å·¥å…·é“¾ï¼Ÿ</h1><p><strong>githubé¡¹ç›®ï¼š</strong><a href="https://github.com/riscv-collab/riscv-gnu-toolchain">riscv-collab&#x2F;riscv-gnu-toolchain: GNU toolchain for RISC-V, including GCC (github.com)</a></p><p>**giteeé¡¹ç›®:**git clone <a href="https://gitee.com/mirrors/riscv-dejagnu">https://gitee.com/mirrors/riscv-dejagnu</a></p><p>psï¼šæœ€å¥½ç”¨githubï¼Œå®ƒæ˜¯æœ€æ–°çš„</p>]]></content>
      
      
      
        <tags>
            
            <tag> RISCV å·¥å…·é“¾sh </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Chipletè®ºæ–‡é˜…è¯»â€”â€” Methodology for Simulating Multi-chiplet Systems UsingOpen-source Simulators</title>
      <link href="/2023/11/07/A-Methodology-for-Simulating-Multi-chiplet-Systems-Using-Open-source-Simulators/"/>
      <url>/2023/11/07/A-Methodology-for-Simulating-Multi-chiplet-Systems-Using-Open-source-Simulators/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€è®ºæ–‡æ€»ç»“"><a href="#ä¸€ã€è®ºæ–‡æ€»ç»“" class="headerlink" title="ä¸€ã€è®ºæ–‡æ€»ç»“"></a>ä¸€ã€è®ºæ–‡æ€»ç»“</h1><h1 id="äºŒã€æ‘˜è¦"><a href="#äºŒã€æ‘˜è¦" class="headerlink" title="äºŒã€æ‘˜è¦"></a>äºŒã€æ‘˜è¦</h1><p>ä¸ºäº†æ”¯æŒæ—©æœŸçš„Chipletsç³»ç»Ÿçš„è®¾è®¡ç©ºé—´æ¢ç´¢ï¼Œæå‡ºäº†ä¸€ç§åŸºäºgem5ã€snipeã€gpgpu-simç­‰å¼€æºæ¨¡æ‹Ÿå™¨çš„Chipletsæ¶æ„æ¨¡æ‹Ÿæ–¹æ³•ã€‚</p><p>å¹¶å¼€æºåœ¨Githubä¸Š <a href="https://github.com/FCAS-SCUT/chiplet_simulators">https://github.com/FCAS-SCUT/chiplet_simulators</a></p><h1 id="ä¸‰ã€èƒŒæ™¯-ç›®å‰å¾…è§£å†³çš„é—®é¢˜"><a href="#ä¸‰ã€èƒŒæ™¯-ç›®å‰å¾…è§£å†³çš„é—®é¢˜" class="headerlink" title="ä¸‰ã€èƒŒæ™¯&amp;ç›®å‰å¾…è§£å†³çš„é—®é¢˜"></a>ä¸‰ã€èƒŒæ™¯&amp;ç›®å‰å¾…è§£å†³çš„é—®é¢˜</h1><p>Chipletæ˜¯åæ‘©å°”æ—¶ä»£ä¸€ç§å¾ˆæœ‰å‰é€”çš„è®¾è®¡æ¨¡å¼ï¼Œä½†é’ˆå¯¹Chipletçš„ä½“ç³»ç»“æ„ç ”ç©¶ç¼ºä¹å¯é çš„æ¨¡æ‹Ÿå™¨ã€‚</p><h2 id="1-Chipletså¾®æ¶æ„çš„è®¾è®¡ç©ºé—´æ¯”SoCè¦å¤§å¾—å¤šï¼Œå› æ­¤éœ€è¦æ¢ç´¢çš„è®¾è®¡æ›´å¤š"><a href="#1-Chipletså¾®æ¶æ„çš„è®¾è®¡ç©ºé—´æ¯”SoCè¦å¤§å¾—å¤šï¼Œå› æ­¤éœ€è¦æ¢ç´¢çš„è®¾è®¡æ›´å¤š" class="headerlink" title="1. Chipletså¾®æ¶æ„çš„è®¾è®¡ç©ºé—´æ¯”SoCè¦å¤§å¾—å¤šï¼Œå› æ­¤éœ€è¦æ¢ç´¢çš„è®¾è®¡æ›´å¤š"></a>1. Chipletså¾®æ¶æ„çš„è®¾è®¡ç©ºé—´æ¯”SoCè¦å¤§å¾—å¤šï¼Œå› æ­¤éœ€è¦æ¢ç´¢çš„è®¾è®¡æ›´å¤š</h2><p>ä¸»è¦åŒ…æ‹¬<strong>æ ¸çš„ç»„ç»‡æ–¹å¼</strong>ï¼ˆ128æ ¸ç³»ç»Ÿå¯ä»¥åˆ†ä¸º32cores * 4 chipletsã€16cores * 8 chipletsç­‰ï¼‰ã€<strong>äº’è”çš„æ‹“æ‰‘ç»“æ„</strong>ã€<strong>å†…å­˜æ¨¡å‹</strong></p><h2 id="2-ç°æœ‰å¼€æºçš„æ¨¡æ‹Ÿå™¨æ— æ³•ç›´æ¥ç”¨äºchipletsç³»ç»Ÿçš„æ¨¡æ‹Ÿï¼Œå› ä¸ºä»¥ä¸‹ä¸¤ä¸ªåŸå› ï¼š"><a href="#2-ç°æœ‰å¼€æºçš„æ¨¡æ‹Ÿå™¨æ— æ³•ç›´æ¥ç”¨äºchipletsç³»ç»Ÿçš„æ¨¡æ‹Ÿï¼Œå› ä¸ºä»¥ä¸‹ä¸¤ä¸ªåŸå› ï¼š" class="headerlink" title="2. ç°æœ‰å¼€æºçš„æ¨¡æ‹Ÿå™¨æ— æ³•ç›´æ¥ç”¨äºchipletsç³»ç»Ÿçš„æ¨¡æ‹Ÿï¼Œå› ä¸ºä»¥ä¸‹ä¸¤ä¸ªåŸå› ï¼š"></a>2. ç°æœ‰å¼€æºçš„æ¨¡æ‹Ÿå™¨æ— æ³•ç›´æ¥ç”¨äºchipletsç³»ç»Ÿçš„æ¨¡æ‹Ÿï¼Œå› ä¸ºä»¥ä¸‹ä¸¤ä¸ªåŸå› ï¼š</h2><ul><li><p>æ²¡æœ‰ç²¾ç¡®çš„Chipleté—´äº’è”æ¨¡å‹ã€‚ç°æœ‰å¼€æºæ¨¡æ‹Ÿå™¨ï¼ˆå¦‚gem5ã€sniperã€Graphiteã€gpgpu-simï¼‰éƒ½æ˜¯çº¯ç½‘ç»œæ¨¡æ‹Ÿå™¨ï¼ˆnetwork-only simulatorï¼‰ï¼Œç¼ºä¹è¯¦ç»†å‡†ç¡®çš„ä¸­ä»‹å±‚äº’è¿å»¶è¿Ÿå’ŒåŠŸç‡æ¨¡å‹{â“æ„æ€æ˜¯ä»…èƒ½å¤Ÿç²¾ç¡®æ¨¡æ‹Ÿchipletå†…éƒ¨å¤šæ ¸çš„äº’è”ï¼Œå¯¹chipleté—´çš„äº’è”æ¨¡æ‹Ÿä¸ç²¾ç¡®å—â“}ã€‚</p></li><li><p>æ— æ³•è¿›è¡Œå¤§è§„æ¨¡å¹¶è¡Œæ¨¡æ‹Ÿã€‚Multi-Chipletsç³»ç»Ÿä¸€èˆ¬å…·æœ‰å¤§é‡çš„æ ¸ï¼Œè¿™æ ·çš„ç³»ç»Ÿæ¨¡æ‹Ÿèµ·æ¥ä¼šå¾ˆè€—æ—¶ï¼Œå› æ­¤éœ€è¦é€šè¿‡å¤§è§„æ¨¡çš„å¹¶è¡Œæ¥åŠ é€Ÿæ¨¡æ‹Ÿã€‚è™½ç„¶Graphiteå’Œsniperæ”¯æŒå¹¶è¡Œæ¨¡æ‹Ÿï¼Œä½†å¹¶ä¸æ”¯æŒç²¾ç¡®çš„äº’è”å»ºæ¨¡ã€‚</p></li></ul><span id="more"></span><h1 id="å››ã€æ–‡ç« è´¡çŒ®"><a href="#å››ã€æ–‡ç« è´¡çŒ®" class="headerlink" title="å››ã€æ–‡ç« è´¡çŒ®"></a>å››ã€æ–‡ç« è´¡çŒ®</h1><p>æ–‡ç« é€šè¿‡é›†æˆå’Œä¿®æ”¹å¼€æºæ¨¡æ‹Ÿå™¨ï¼Œæå‡ºäº†ä¸€ç§æ¨¡æ‹ŸMulti-Chipletsç³»ç»Ÿçš„æ–¹æ³•ã€‚</p><ol><li>ç°æœ‰å¼€æºæ¨¡æ‹Ÿå™¨ç”¨æ¥æ¨¡æ‹Ÿå•ä¸ªchipletï¼Œé€šè¿‡å¤šå¼€[reuse]æ¨¡æ‹Ÿå™¨å¹¶è¡Œè¿è¡Œå®ç°Multi-Chipletsã€‚å¹¶æå‡ºæ¨¡æ‹Ÿå™¨é—´è¿›ç¨‹é€šä¿¡å’ŒåŒæ­¥åè®®[a full set of inter-simulator-process communication and synchronization protocol]æ¥æ¨¡æ‹Ÿchipletsä¹‹é—´çš„é€šä¿¡ã€‚</li><li>åŸºäºæ’å…¥å™¨çš„äº’è¿[Interposer-based interconnection]æ˜¯ä½¿ç”¨ç‰¹å®šå‚æ•°ç²¾ç¡®å»ºæ¨¡çš„ã€‚äº’è”å¯ä»¥é€šè¿‡<u>ä»…ç½‘ç»œæ–¹å¼[Network Only]</u>ã€<u>ç³»ç»Ÿè°ƒç”¨ä»¿çœŸ[SE]</u>ã€<u>å…¨ç³»ç»Ÿä»¿çœŸ[FS]</u>æ¥æ¨¡æ‹Ÿã€‚å¯ä»¥å®¹æ˜“çš„å®ç°å„ç§chipleté—´å’Œchipletå†…çš„ç½‘ç»œæ‹“æ‰‘ã€‚</li><li>æ”¯æŒä¸¤ç§å…¸å‹çš„å†…å­˜æ¨¡å‹ï¼šæ¶ˆæ¯ä¼ é€’å’Œå…±äº«å†…å­˜</li><li>æå‡ºäº†ä¸€ç§åŸºäºæ–‡ä»¶çš„æ¨¡æ‹Ÿå™¨é—´è¿›ç¨‹é€šä¿¡å’ŒåŒæ­¥åè®®ï¼Œä½¿å¾—å¤šä¸ªæ¨¡æ‹Ÿå™¨è¿›ç¨‹åŒæ­¥è¿è¡Œï¼ŒåŒç†å¯é›†æˆå…¶ä»–æ¨¡æ‹Ÿå™¨ã€‚é€šè¿‡æ—¶åºæ¨¡å‹æ–‡ä»¶[Timing models files]å’ŒåŠŸèƒ½æ¨¡å‹æ–‡ä»¶[Functional models files]æ”¯æŒè¿œç¨‹å­˜å‚¨å™¨è¯»å†™ã€‚è¿™ç§é€šè¿‡è¿›ç¨‹çš„å¤šå¼€æ¨¡æ‹Ÿå™¨æ–¹æ³•å¯ä»¥å¾ˆå¥½åœ°å®ç°å¹¶è¡Œæ¨¡æ‹Ÿã€‚</li></ol><h1 id="äº”ã€Multi-Chipletsç³»ç»Ÿä»¿çœŸæ¡†æ¶"><a href="#äº”ã€Multi-Chipletsç³»ç»Ÿä»¿çœŸæ¡†æ¶" class="headerlink" title="äº”ã€Multi-Chipletsç³»ç»Ÿä»¿çœŸæ¡†æ¶"></a>äº”ã€Multi-Chipletsç³»ç»Ÿä»¿çœŸæ¡†æ¶</h1><p>æ­¤éƒ¨åˆ†å¯¹åº”æ–‡ç« ç¬¬ä¸‰ç« </p><h2 id="3-1-æ¡†æ¶æ€»è§ˆ"><a href="#3-1-æ¡†æ¶æ€»è§ˆ" class="headerlink" title="3.1 æ¡†æ¶æ€»è§ˆ"></a>3.1 æ¡†æ¶æ€»è§ˆ</h2><img src="/2023/11/07/A-Methodology-for-Simulating-Multi-chiplet-Systems-Using-Open-source-Simulators/image-20231107214349591.png" class="" title="image-20231107214349591"><ul><li><strong>ç”µè·¯å’Œç‰©ç†å±‚[Circuit and physical layer]ï¼š</strong></li><li><strong>å¾®ä½“ç³»ç»“æ„å’Œchipletå†…éƒ¨å±‚ [micro-architectural and intra-chiplet layer]ï¼š</strong>æ¯ä¸ªå•ç‹¬çš„chipletç”±ä¸€ä¸ªæ¨¡æ‹Ÿå™¨è¿›è¡Œæ¨¡æ‹Ÿï¼Œæ¨¡æ‹Ÿå™¨è¿˜ç”¨äºæ¨¡æ‹Ÿè·¯ç”±å™¨é—´çš„é€šé“</li><li><strong>chipleté—´ç½‘ç»œå±‚[ inter-chiplet network layer]ï¼š</strong>è¯¥æ¡†æ¶åˆ©ç”¨é›†ä¸­å¼ç½‘ç»œç®¡ç†å™¨è¯»å–é…ç½®æ–‡ä»¶ï¼Œä»¥é…ç½®chipleté—´çš„ç½‘ç»œæ‹“æ‰‘</li><li><strong>ç³»ç»Ÿå±‚[system layer]ï¼š</strong>é€šè¿‡åŠŸèƒ½æ¨¡å‹æ–‡ä»¶å’Œæ—¶åºæ¨¡å‹æ–‡ä»¶æ¥å®ç°å…±äº«å†…å­˜æ¨¡å‹å’Œåˆ†å¸ƒå¼å†…å­˜æ¨¡å‹ã€‚<ul><li>åŠŸèƒ½æ¨¡å‹æ–‡ä»¶ï¼šè¿œç¨‹è¯»å†™è¯·æ±‚å†™å…¥æ¯å¯¹æ¨¡æ‹Ÿå™¨è¿›ç¨‹çš„åŠŸèƒ½æ¨¡å‹æ–‡ä»¶ã€‚</li><li>æ—¶åºæ¨¡å‹æ–‡ä»¶ï¼šç§¯ç´¯è¿œç¨‹è¯»å†™è¯·æ±‚çš„å»¶è¿Ÿâ“ç”¨æ¥ç»Ÿè®¡å—â“ã€‚</li></ul></li><li><strong>åº”ç”¨å±‚[Application layer]ï¼š</strong>è¯¥æ¡†æ¶åœ¨åº”ç”¨å±‚ä¸ºç¨‹åºå‘˜æä¾›äº†ç”¨äºè¿œç¨‹è¯»å†™çš„APIï¼Œç¨‹åºå‘˜å¯ä»¥å€ŸåŠ©æ­¤APIå¼€å‘æµ‹è¯•ç¨‹åºã€‚åœ¨gem5ä¸­çš„FSæ¨¡å¼ä¸‹ï¼Œè¿™ä¸ªAPIä½¿ç”¨m5 optå‘ä¸»æœºç”Ÿæˆæ—¶åºæ¨¡å‹æ–‡ä»¶å’ŒåŠŸèƒ½æ¨¡å‹æ–‡ä»¶ï¼Œç”¨äºæ¨¡æ‹Ÿå™¨ä¹‹é—´çš„è¿›ç¨‹é€šä¿¡ã€‚åœ¨gem5çš„SEæ¨¡å¼ä¸‹ï¼Œè¿™ä¸ªAPIç³»ç»Ÿè°ƒç”¨å¤„ç†ç¨‹åºå‘ä¸»æœºç”Ÿæˆæ—¶åºå’ŒåŠŸèƒ½æ¨¡å‹æ–‡ä»¶ï¼Œç”¨äºæ¨¡æ‹Ÿå™¨ä¹‹é—´çš„è¿›ç¨‹é€šä¿¡ã€‚</li></ul><h2 id="3-2-è¿œç¨‹è¯»å†™åè®®"><a href="#3-2-è¿œç¨‹è¯»å†™åè®®" class="headerlink" title="3.2 è¿œç¨‹è¯»å†™åè®®"></a>3.2 è¿œç¨‹è¯»å†™åè®®</h2><h3 id="ï¼ˆ1ï¼‰è¿œç¨‹è¯»-Remote-Read"><a href="#ï¼ˆ1ï¼‰è¿œç¨‹è¯»-Remote-Read" class="headerlink" title="ï¼ˆ1ï¼‰è¿œç¨‹è¯» Remote Read"></a>ï¼ˆ1ï¼‰è¿œç¨‹è¯» Remote Read</h3><p>è¿œç¨‹è¯»éµä»æ¡æ‰‹åè®®ï¼Œå³Source Chipletå‘é€è¯»å–è¯·æ±‚ï¼ŒDestination Chipletå›å¤</p><img src="/2023/11/07/A-Methodology-for-Simulating-Multi-chiplet-Systems-Using-Open-source-Simulators/image-20231107220406161.png" class="" title="image-20231107220406161"><p>Source Chipletæœ‰ä¸€ä¸ªè®¡æ—¶å™¨ï¼Œå¦‚æœæ”¶åˆ°NACKæˆ–è®¡æ—¶å™¨è¶…æ—¶æœªæ”¶åˆ°å›å¤ï¼Œåˆ™é‡æ–°å‘é€è¯·æ±‚ã€‚å…¶ä¸­ï¼ŒNACKç”¨äºæ¨¡æ‹Ÿä¼ è¾“å‘ç”Ÿé”™è¯¯ã€‚</p><ul><li><p>åœ¨Destination Chipletä¸Šï¼Œå¦‚æœæ ¹æ®è¯·æ±‚è¯»å–æ•°æ®æˆåŠŸï¼Œåˆ™å…¶æ¥å£èŠ‚ç‚¹ï¼Œç”¨ACKè¿›è¡Œå›å¤ï¼Œå®ƒè¿˜å¯ä»¥é€šè¿‡å›å¤NACKæ¨¡æ‹Ÿä¼ è¾“é”™è¯¯</p></li><li><p>å…¶ä¸­ï¼Œæ¥å£èŠ‚ç‚¹[Interface node]æ˜¯æ¯ä¸ªChipletä¸­è´Ÿè´£Chipleté—´é€šä¿¡çš„ä¸€ä¸ªæˆ–å¤šä¸ªèŠ‚ç‚¹</p></li></ul><h3 id="ï¼ˆ2ï¼‰è¿œç¨‹å†™-Remote-Write"><a href="#ï¼ˆ2ï¼‰è¿œç¨‹å†™-Remote-Write" class="headerlink" title="ï¼ˆ2ï¼‰è¿œç¨‹å†™ Remote Write"></a>ï¼ˆ2ï¼‰è¿œç¨‹å†™ Remote Write</h3><p>è¿œç¨‹å†™æ˜¯éé˜»å¡çš„ã€‚å¦‚æœå†™å…¥æˆåŠŸï¼Œåˆ™æºChipletä¸å—å½±å“ï¼›è‹¥å†™å…¥å¤±è´¥ï¼Œåˆ™é‡æ–°å‘é€å†™è¯·æ±‚ã€‚</p><p>å­˜åœ¨ä¸€ä¸ªç¼“å†²åŒºï¼Œç”¨æ¥ä¿å­˜æœªè¢«ç¡®è®¤çš„å†™å…¥æ•°æ®ã€‚</p><h3 id="è®¡ç®—è¿œç¨‹è¯»è¯·æ±‚çš„ä¼ è¾“æ—¶é—´"><a href="#è®¡ç®—è¿œç¨‹è¯»è¯·æ±‚çš„ä¼ è¾“æ—¶é—´" class="headerlink" title="è®¡ç®—è¿œç¨‹è¯»è¯·æ±‚çš„ä¼ è¾“æ—¶é—´"></a>è®¡ç®—è¿œç¨‹è¯»è¯·æ±‚çš„ä¼ è¾“æ—¶é—´</h3><p>ä¸ºäº†è®¡ç®—è¿œç¨‹è¯»è¯·æ±‚çš„ä¼ è¾“æ—¶é—´[transmission time]ï¼ŒDestination Chipletçš„æ¥å£èŠ‚ç‚¹åº”è¯¥æ·»åŠ è¯·æ±‚åŒ…ä»Source Chipletå‘é€è¿‡æ¥çš„ä¼ è¾“å»¶è¿Ÿï¼›Source Chipletä¸€æ—¦æ¥æ”¶åˆ°å›å¤ï¼Œå°±è®¡ç®—æ­¤æ¬¡è¯·æ±‚çš„å¾€è¿”å»¶è¿Ÿï¼ˆè¯·æ±‚åŒ…å’Œç›¸åº”åŒ…çš„ä¼ è¾“å»¶è¿Ÿï¼‰</p><p>å…¨å±€å†…å­˜ä¸€è‡´æ€§ç”±è½¯ä»¶ç®¡ç†ã€‚</p><p>å°šæœªå®ç°å¤šèŠ¯ç‰‡ç³»ç»Ÿå®ç°é«˜é€Ÿç¼“å­˜&#x2F;å†…å­˜ä¸€è‡´æ€§åè®®ã€‚</p><h3 id="æ­»é”"><a href="#æ­»é”" class="headerlink" title="æ­»é”"></a>æ­»é”</h3><p>åœ¨è¯¥ç³»ç»Ÿä¸­å­˜åœ¨ä¸¤ç§ç±»å‹çš„æ­»é”ï¼š</p><p>ç¬¬ä¸€ç§æ˜¯**è·¯ç”±çº§æ­»é”[routing level deadlock]<strong>ï¼Œç”±æ•°æ®åŒ…çš„å¾ªç¯ä¾èµ–æ€§å¼•èµ·ã€‚å¿…é¡»ä½¿ç”¨æ— æ­»é”è·¯ç”±ç®—æ³•ã€‚ç¬¬äºŒç§æ˜¯</strong>åè®®çº§æ­»é”[protocol level deadlock]**ï¼Œç”±è¯·æ±‚å’Œåº”ç­”æ•°æ®åŒ…ä¹‹é—´çš„ä¾èµ–å…³ç³»å¼•èµ·ã€‚</p><h2 id="3-3-æ¨¡æ‹Ÿå™¨é—´è¿›ç¨‹é€šä¿¡å’ŒåŒæ­¥åè®®"><a href="#3-3-æ¨¡æ‹Ÿå™¨é—´è¿›ç¨‹é€šä¿¡å’ŒåŒæ­¥åè®®" class="headerlink" title="3.3 æ¨¡æ‹Ÿå™¨é—´è¿›ç¨‹é€šä¿¡å’ŒåŒæ­¥åè®®"></a>3.3 æ¨¡æ‹Ÿå™¨é—´è¿›ç¨‹é€šä¿¡å’ŒåŒæ­¥åè®®</h2><p>æ¨¡æ‹Ÿå™¨é—´è¿›ç¨‹é€šä¿¡[inter-simulator-process communi-cation]ä½¿ç”¨ä¸¤ç§ç±»å‹çš„æ–‡ä»¶ï¼Œå³<u>åŠŸèƒ½æ¨¡å‹æ–‡ä»¶</u>å’Œ<u>æ—¶åºæ¨¡å‹æ–‡ä»¶</u>ã€‚æ¯ä¸ªæ¨¡æ‹Ÿå™¨ä¸ºå…¶ä»–æ¨¡æ‹Ÿå™¨äº§ç”Ÿè¿™ä¸¤ç§ç±»å‹çš„æ–‡ä»¶ï¼Œå¹¶è¯»å–å…¶ä»–æ¨¡æ‹Ÿå™¨çš„è¿™ä¸¤ç§æ–‡ä»¶ã€‚</p><p>ç³»ç»Ÿæ”¯æŒä¸¤ç§äº’è”æ¶æ„ï¼š**å¹³é“ºå¼ç½‘ç»œæ‹“æ‰‘[tiled inter-chiplet network topologies]<strong>å’Œ</strong>é›†ä¸­å¼ç½‘ç»œæ‹“æ‰‘[centralized inter-chiplet network topologies]**ï¼Œåœ¨å¹³é“ºå¼ç½‘ç»œæ‹“æ‰‘ä¸­ï¼Œæ¯ä¸ªChipletæœ‰ä¸€ä¸ªç”¨äºè¿æ¥å…¶ä»–Cihpletçš„äº’è¿å•å…ƒï¼ˆAMD EPYCé‡‡ç”¨è¿™æ ·çš„ç½‘ç»œæ¶æ„ï¼‰ã€‚åœ¨é›†ä¸­å¼ç½‘ç»œæ‹“æ‰‘ä¸­ï¼Œæœ‰ä¸€ä¸ªä¸­å¿ƒChipletï¼Œå®ƒè¿æ¥è¿™å…¶ä»–è´Ÿè´£è®¡ç®—çš„Chipletï¼ˆAMD Ryzené‡‡ç”¨äº†è¿™æ ·çš„æ¶æ„ï¼‰ã€‚</p><p>ä¸ºäº†æ”¯æŒäº’è”æ¶æ„ï¼Œæå‡ºäº†ä¸€ç§ç”¨æ¥æ¨¡æ‹Ÿä¸­ä»‹å±‚ç½‘ç»œ[ interposer-level network ]çš„ç½‘ç»œç®¡ç†å™¨[ network manager ]</p><h3 id="ä½¿ç”¨åŠŸèƒ½æ¨¡å‹æ–‡ä»¶å’Œæ—¶åºæ¨¡å‹æ–‡ä»¶è¿›è¡Œè¿œç¨‹è¯»å–çš„è¿‡ç¨‹ï¼š"><a href="#ä½¿ç”¨åŠŸèƒ½æ¨¡å‹æ–‡ä»¶å’Œæ—¶åºæ¨¡å‹æ–‡ä»¶è¿›è¡Œè¿œç¨‹è¯»å–çš„è¿‡ç¨‹ï¼š" class="headerlink" title="ä½¿ç”¨åŠŸèƒ½æ¨¡å‹æ–‡ä»¶å’Œæ—¶åºæ¨¡å‹æ–‡ä»¶è¿›è¡Œè¿œç¨‹è¯»å–çš„è¿‡ç¨‹ï¼š"></a>ä½¿ç”¨åŠŸèƒ½æ¨¡å‹æ–‡ä»¶å’Œæ—¶åºæ¨¡å‹æ–‡ä»¶è¿›è¡Œè¿œç¨‹è¯»å–çš„è¿‡ç¨‹ï¼š</h3><p><strong>è¯»è¯·æ±‚</strong></p><p>Chiplet i é€šè¿‡APIåˆå§‹åŒ–äº†ä¸€ä¸ªè¿œç¨‹è¯»Chiplet j æŸä¸ªå­˜å‚¨åœ°å€çš„è¯·æ±‚ã€‚</p><ul><li>Step 1ï¼šè¯·æ±‚çº¿ç¨‹è¢«stalled</li><li>Step 2ï¼šè¯·æ±‚åŒ…é¦–å…ˆè¢«å‘é€åˆ°æ¥å£èŠ‚ç‚¹</li><li>Step 3ï¼šæ¥å£èŠ‚ç‚¹åˆ†åˆ«ç”ŸæˆåŠŸèƒ½æ¨¡å‹æ–‡ä»¶$$F_{ik}$$å’Œæ—¶åºæ¨¡å‹æ–‡ä»¶$$T_{iN}$$ã€‚å…¶ä¸­ï¼Œ$$T_{iN}$$è¢«å‘é€åˆ°ç½‘ç»œç®¡ç†å™¨ï¼›$$F_{ik}$$æ‰§è¡Œchipleté—´è·¯ç”±ã€‚</li><li>Step 4ï¼šåœ¨åˆ°è¾¾æ¨¡æ‹Ÿå™¨kå‰æŠŠè¯¥è¯·æ±‚åŒ…å‘é€ç»™æ¨¡æ‹Ÿå™¨j</li></ul><img src="/2023/11/07/A-Methodology-for-Simulating-Multi-chiplet-Systems-Using-Open-source-Simulators/image-20231111131252278.png" class="" title="image-20231111131252278"><h1 id="å¼€æºä»¿çœŸå™¨è¯´æ˜ä¹¦"><a href="#å¼€æºä»¿çœŸå™¨è¯´æ˜ä¹¦" class="headerlink" title="å¼€æºä»¿çœŸå™¨è¯´æ˜ä¹¦"></a>å¼€æºä»¿çœŸå™¨è¯´æ˜ä¹¦</h1><p>æ‘˜è‡ª<em>åŸºäºå¤šèŠ¯ç²’é›†æˆçš„ X86 æŒ‡ä»¤é›†å…±äº«å¼å‚¨å­˜ä»¿çœŸå™¨è¯´æ˜ä¹¦</em></p><h2 id="ä¸€ã€-ç®€ä»‹"><a href="#ä¸€ã€-ç®€ä»‹" class="headerlink" title="ä¸€ã€ ç®€ä»‹"></a>ä¸€ã€ ç®€ä»‹</h2><p>åŸºäºå¤šèŠ¯ç²’é›†æˆ CPU å…±äº«å¼å‚¨å­˜ä»¿çœŸå™¨æ˜¯ä¸€æ¬¾ç”¨äºæ¨¡æ‹Ÿå¤šèŠ¯ç²’ç³»ç»Ÿä¸­ CPU èŠ¯ç²’çš„ä»¿çœŸè½¯ä»¶ã€‚å®ƒçš„ä¸»è¦åŠŸèƒ½æ˜¯ï¼šæ¨¡æ‹Ÿåœ¨ CPU ç»„æˆçš„å¤šèŠ¯ç²’ç³»ç»Ÿä¸­ï¼Œä¸€ä¸ªæ“ä½œç³»ç»Ÿä¸­æŸä¸ªæˆ–å¤šä¸ªåº”ç”¨ç¨‹åºè¿è¡Œçš„è¿‡ç¨‹ï¼Œå¹¶ç»™å‡ºè¿è¡Œç»“æœä»¥åŠå„é¡¹æ€§èƒ½æŒ‡æ ‡ï¼Œå¦‚ç¨‹åºçš„è¿è¡Œæ—¶é—´ç­‰ã€‚</p><p>äºŒã€gem5åº•å±‚æ¶æ„</p><h2 id="ä¸‰ã€ä»¿çœŸåŸç†"><a href="#ä¸‰ã€ä»¿çœŸåŸç†" class="headerlink" title="ä¸‰ã€ä»¿çœŸåŸç†"></a>ä¸‰ã€ä»¿çœŸåŸç†</h2><p>æ¯ä¸ªchiplet æ‹¥æœ‰è‡ªå·±ç‹¬ä¸€æ— äºŒçš„ç¼–å·å’Œè‡ªå·±çš„ç‹¬ç‰¹çš„å…±äº«å‚¨å­˜åŒºåŸŸï¼Œä½†æ˜¯è¯¥å‚¨å­˜åŒºåŸŸå¯ä»¥è¢«ä»»ä½•Chipletè¯»å†™ã€‚æ¯ä¸ªå…±äº«å‚¨å­˜åŒºåŸŸä»¥ communication å¼€å¤´è¡¨å¾ï¼Œè¢«æ‰€æœ‰ chiplet å…±äº«ã€‚</p><p>å½“chiplet éœ€è¦ä»å…¶ä»– chiplet æ¥æ”¶æ•°æ®æ—¶ï¼Œå®ƒä¼šä»¥è‡ªèº« chiplet ç¼–å·å¯¹å…±äº«å‚¨å­˜å¯¹åº”çš„åŒºåŸŸè¿›è¡Œæ£€ç´¢ï¼Œå½“æ£€ç´¢åˆ°å‚¨å­˜ä¸­æœ‰ä¹‹å‰æœªè¯»ä¸”åœç•™åœ¨å…±äº«å‚¨å­˜æœ€ä¹…çš„æ•°æ®æ—¶ï¼Œå®ƒä¼šå°†å…¶è¯»å…¥è‡ªå·±çš„å‚¨å­˜ä¸­ï¼Œå¹¶æ ‡è®°è¯¥æ•°æ®ä¸ºå·²è¯»ã€‚</p><p><strong>1. å…±äº«å‚¨å­˜è¯»æ“ä½œ</strong></p><p>åœ¨åŠŸèƒ½æ¨¡å‹ä¸Šï¼Œè¯»æ“ä½œåŒ…æ‹¬æ ¹æ® chiplet ç¼–å·æœç´¢å‚¨å­˜ï¼ŒæŸ¥æ‰¾æœ€ä¹…çš„æœªè¯»æ•°æ®ä»¥åŠæ ‡è®°æœ¬æ¬¡è¯»å…¥çš„æ•°æ®ï¼ˆè‹¥æ²¡æœ‰è¯»å…¥æ•°æ®åˆ™è·³è¿‡ï¼‰ã€‚åœ¨ gem5 ä¸­ï¼Œgadia_receive(a)å‡½æ•°æ‰§è¡Œè¯»æ“ä½œï¼Œa è¡¨ç¤ºæœ¬æ¬¡è¦æœç´¢çš„ chiplet ç¼–å·å¯¹åº”çš„å‚¨å­˜ã€‚æ¯æ¬¡æ‰§è¡Œè¯¥å‡½æ•°æ—¶ï¼Œgem5 å°†è®¿é—®communicationa æ–‡ä»¶ï¼Œå¹¶è¯»å–è¯¥æ–‡ä»¶ä¸­æœ€ä¹…æ²¡æœ‰è¢«è¯»å–è¿‡å†…å®¹è¯»å–å®Œæˆä¹‹åå°†æ ‡è®°è¯¥æ•°æ®å·²è¯»å¹¶è¿”å›è¯¥æ•°æ®ï¼Œå¦åˆ™è¿”å›ç‰¹å®šçš„æ•°å­—(uint64_t)-1 çš„å€¼ã€‚åœ¨æ—¶åºæ¨¡å‹ä¸Šï¼Œè¯»æ“ä½œçš„æ—¶åºç”±å†™æ“ä½œçš„æ—¶åºæ¨¡å‹ä¸€èµ·è®¡ç®—ã€‚</p><p><strong>2. å…±äº«å‚¨å­˜å†™æ“ä½œ</strong></p><p>åœ¨åŠŸèƒ½æ¨¡å‹ä¸Šï¼Œå†™æ“ä½œåŒ…æ‹¬æ ¹æ® chiplet çš„ç¼–å·æŸ¥æ‰¾å¯¹åº”å‚¨å­˜åœ°å€ï¼Œå†™å…¥æ•°æ®ã€‚åœ¨gem5 ä¸­ï¼Œgadia_call(a, b, c, d)å‡½æ•°æ‰§è¡Œå†™æ“ä½œï¼Œå…¶ä¸­ a ä¸ºå½“å‰ chiplet ç¼–å·ï¼Œb ä¸ºæ•°æ®å°†è¦ä¼ é€çš„ç›®æ ‡ chiplet ç¼–å·ï¼Œc ä¸ºæ•°æ®æœ¬èº«ï¼Œd ä¸ºæ˜¯å¦åˆå§‹åŒ–å…±äº«å‚¨å­˜ã€‚å½“ d å‚æ•°ä¸è¦æ±‚åˆå§‹åŒ–å…±äº«å‚¨å­˜ç©ºé—´æ—¶ï¼Œgem5 å°†è®¿é—®æ–‡ä»¶ communicationb ï¼Œå¹¶åœ¨å…¶å†…å®¹è¿½åŠ å†…å®¹ â€œgem5 å½“å‰ cycle a b c \nâ€ã€‚åœ¨æ—¶åºæ¨¡å‹ä¸Šï¼Œæ¯æ¬¡å†™æ“ä½œæ‰§è¡Œæ—¶ï¼Œæ¯ä¸ª chiplet ä¼šè‡ªåŠ¨æ£€æµ‹å½“å‰çš„ cycle æ•°å¹¶å°†å…¶ä¸€èµ·å†™å…¥å…±äº«å‚¨å­˜ï¼Œåœ¨ä»¿çœŸå®Œæˆä¹‹åå°†äº¤ç”± popnet è®¡ç®—å‡ºå…±äº«å‚¨å­˜çš„è¯»å†™æ“ä½œçš„å»¶è¿Ÿ cycleæ•°ã€‚</p><h2 id="å››ã€ä»¿çœŸå™¨å·¥ä½œæµç¨‹"><a href="#å››ã€ä»¿çœŸå™¨å·¥ä½œæµç¨‹" class="headerlink" title="å››ã€ä»¿çœŸå™¨å·¥ä½œæµç¨‹"></a>å››ã€ä»¿çœŸå™¨å·¥ä½œæµç¨‹</h2><img src="/2023/11/07/A-Methodology-for-Simulating-Multi-chiplet-Systems-Using-Open-source-Simulators/image-20231111154718789.png" class="" title="image-20231111154718789"><ul><li><strong>Step1</strong> ç¼–å†™å¤šæœºç‰ˆæœ¬çš„è´Ÿè½½ç¨‹åºï¼Œå¹¶ç¼–è¯‘æˆäºŒè¿›åˆ¶æ–‡ä»¶ã€‚</li><li><strong>Step1</strong> æŒ‚è½½imgé•œåƒæ–‡ä»¶çš„æ–¹å¼å°†äºŒè¿›åˆ¶è´Ÿè½½ç¨‹åºæ”¾å…¥imgæ–‡ä»¶</li><li><strong>Step1</strong> å¯åŠ¨å¤šä¸ªgem5å’Œm5</li><li><strong>Step1</strong> è¿è¡Œè´Ÿè½½ç¨‹åº</li><li><strong>Step1</strong> ç¼–è¯‘é™„å½•Aä¸­çš„è¾…åŠ©ç¨‹åºï¼Œè¯¥ç¨‹åºç»Ÿè®¡å…±äº«å‚¨å­˜çš„é€šä¿¡æ–‡ä»¶å¹¶è¾“å‡º popnet çš„è¾“å…¥æ–‡ä»¶ï¼Œå¾—åˆ°ä»¥ bench å¼€å¤´çš„ trace æ–‡ä»¶</li><li><strong>Step1</strong> ä»¥è¿™äº›bench å¼€å¤´çš„æ–‡ä»¶ä¸ºè¾“å…¥ï¼Œä½¿ç”¨ popnet è®¡ç®—ç‰‡é—´é€šä¿¡ã€‚</li></ul><p>popnet æ˜¯ä¸€æ¬¾å¼€æºçš„äº’è¿ç½‘ç»œæ¨¡æ‹Ÿå™¨ï¼Œèƒ½å¤Ÿæ ¹æ®ç½‘ç»œèŠ‚ç‚¹é—´çš„é€šä¿¡è®°å½•ä¿¡æ¯ï¼ˆtrace æ–‡ä»¶ï¼‰è®¡ç®—å‡ºç½‘ç»œä¼ é€’æ•°æ®åŒ…çš„å¹³å‡å»¶è¿Ÿä»¥åŠæ€»èƒ½è€—ã€‚</p><h2 id="äº”ã€ä»¿çœŸå™¨ä½¿ç”¨å…·ä½“æ­¥éª¤"><a href="#äº”ã€ä»¿çœŸå™¨ä½¿ç”¨å…·ä½“æ­¥éª¤" class="headerlink" title="äº”ã€ä»¿çœŸå™¨ä½¿ç”¨å…·ä½“æ­¥éª¤"></a>äº”ã€ä»¿çœŸå™¨ä½¿ç”¨å…·ä½“æ­¥éª¤</h2><h3 id="1-é€šè¿‡githubæˆ–giteeä¸‹è½½ä»¿çœŸå™¨æºç "><a href="#1-é€šè¿‡githubæˆ–giteeä¸‹è½½ä»¿çœŸå™¨æºç " class="headerlink" title="1. é€šè¿‡githubæˆ–giteeä¸‹è½½ä»¿çœŸå™¨æºç "></a>1. é€šè¿‡githubæˆ–giteeä¸‹è½½ä»¿çœŸå™¨æºç </h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># Github</span><br><span class="line">git clone https://github.com/FCAS-SCUT/chiplet_simulators</span><br></pre></td></tr></table></figure><h3 id="2-æ„å»ºX86ç¯å¢ƒ"><a href="#2-æ„å»ºX86ç¯å¢ƒ" class="headerlink" title="2. æ„å»ºX86ç¯å¢ƒ"></a>2. æ„å»ºX86ç¯å¢ƒ</h3><p>åˆ‡æ¢åˆ°gemç›®å½•ä¸‹ï¼Œç„¶åæ„å»ºç¯å¢ƒï¼Œè¿è¡Œå…¨ç³»ç»Ÿæ¨¡æ‹Ÿ</p><p>è¿™é‡Œä½¿ç”¨ä¸‰ä¸ªçº¿ç¨‹å¹¶è¡Œåœ°æ„å»ºx86ç¯å¢ƒ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scons ./build/X86/gem5.opt -j3</span><br></pre></td></tr></table></figure><h3 id="3-ç¼–è¯‘æµ‹è¯•ç¨‹åº"><a href="#3-ç¼–è¯‘æµ‹è¯•ç¨‹åº" class="headerlink" title="3. ç¼–è¯‘æµ‹è¯•ç¨‹åº"></a>3. ç¼–è¯‘æµ‹è¯•ç¨‹åº</h3><p>é¦–å…ˆè¦æ„å»ºlibm5.aé™æ€åº“</p><p>åœ¨</p><h3 id="4-æŒ‚è½½æµ‹è¯•ç¨‹åº"><a href="#4-æŒ‚è½½æµ‹è¯•ç¨‹åº" class="headerlink" title="4. æŒ‚è½½æµ‹è¯•ç¨‹åº"></a>4. æŒ‚è½½æµ‹è¯•ç¨‹åº</h3><p>benchmarkç›®å½•ä¸‹æœ‰ä¸‰ä¸ªæ–‡ä»¶å¤¹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">benchmark</span><br><span class="line">- dependency</span><br><span class="line">- gem5</span><br><span class="line">- asm</span><br><span class="line">- generic</span><br><span class="line">- m5ops,h</span><br><span class="line">- m5ops.h</span><br><span class="line">- matrix</span><br><span class="line">- test01.cpp</span><br><span class="line">- treeSearching</span><br><span class="line">- data.csv</span><br><span class="line">- test01.cpp</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œdependencyæ–‡ä»¶å¤¹åŒ…å«äº†ç¼–è¯‘æµ‹è¯•æ–‡ä»¶æ—¶éœ€è¦çš„å¤´æ–‡ä»¶ï¼Œç„¶åæä¾›äº†matrixå’ŒtreeSearchingä¸¤ä¸ªbenchmarkã€‚</p><p>å°†parsec.imgé•œåƒæ–‡ä»¶æŒ‚è½½åˆ°mntæ–‡ä»¶å¤¹ä¸­</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mount -o loop,offset=1048576 disks/x86-parsec.img ./mnt</span><br></pre></td></tr></table></figure><p>é€šè¿‡cpå‘½ä»¤å°†benchmarkäºŒè¿›åˆ¶æ–‡ä»¶å¤åˆ¶åˆ°mntæ–‡ä»¶å¤¹</p><p>å–æ¶ˆæŒ‚è½½</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo umount ./mnt</span><br></pre></td></tr></table></figure><h3 id="5-å¼€å¯gem5"><a href="#5-å¼€å¯gem5" class="headerlink" title="5.å¼€å¯gem5"></a>5.å¼€å¯gem5</h3><p>è¿›å…¥gemæ–‡ä»¶å¤¹ï¼Œå¼€å¯gem5çš„FSæ¨¡æ‹Ÿ</p><p>å¯åŠ¨æ¨¡æ‹Ÿ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">é€šè¿‡gem5æä¾›çš„fs.pyé…ç½®è„šæœ¬è¿›è¡Œå¿«é€Ÿé…ç½®ï¼Œåªéœ€è¦é€šè¿‡å‘½ä»¤è¡Œå‚æ•°æè¿°ç³»ç»Ÿçš„é…ç½®ã€‚</span><br><span class="line">å¦‚ä¸‹ï¼Œé…ç½®äº†ä¸€ä¸ªå…«æ ¸ã€å†…å­˜ä¸º256MBçš„æ¨¡æ‹Ÿç³»ç»Ÿï¼Œä¸”è¾“å‡ºæ–‡ä»¶å¤¹ä¸ºcheckpoint_parsec_1</span><br><span class="line">./build/X86/gem5.opt \</span><br><span class="line">-d core8/0 \</span><br><span class="line">./configs/example/fs.py \</span><br><span class="line">--kernel=x86-linux-kernel-4.19.83 \</span><br><span class="line">--disk-image=x86-parsec.img \</span><br><span class="line">--num-cpus=8 \</span><br><span class="line">--mem-size=256MB</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># fs.py</span><br><span class="line">./build/RISCV/gem5.opt -d RISCVout/0 ./configs/example/fs.py --kernel=$M5_PATH/binaries/riscv-lupio-linux-kernel --disk-image=$M5_PATH/disks/riscv-ubuntu-20.04.img --num-cpus=4 --mem-size=256MB</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># å‘½ä»¤è¡Œå‚æ•°æœ€å°‘åªéœ€è¦æŒ‡å®švmlinuxæ–‡ä»¶ï¼Œimgé•œåƒæ–‡ä»¶</span><br><span class="line">./build/X86/gem5.opt ./configs/example/fs.py --kernel=[vmlinux äºŒè¿›åˆ¶æ–‡ä»¶] --disk-image=[img æ ¼å¼çš„ç³»ç»Ÿé•œåƒæ–‡ä»¶]</span><br></pre></td></tr></table></figure><p>å¦‚æœæŒ‰ä»¥ä¸‹æ“ä½œæŠŠvmlinxå’Œimgæ–‡ä»¶æ‰€åœ¨çš„è·¯å¾„æ·»åŠ å…¥ç¯å¢ƒå˜é‡ï¼Œåˆ™å¯ä»¥ç›´æ¥è¾“å…¥æ–‡ä»¶å</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">æ·»åŠ ç¯å¢ƒå˜é‡</span><br><span class="line"># ä¿®æ”¹bashrcæ–‡ä»¶ä»¥æ·»åŠ ç¯å¢ƒå˜é‡</span><br><span class="line">vim ~/.bashrc</span><br><span class="line"></span><br><span class="line"># åœ¨æ‰“å¼€çš„æ–‡ä»¶çš„å°¾éƒ¨åŠ å…¥ç¯å¢ƒå˜é‡</span><br><span class="line">export M5_PATH=gem5ç»å¯¹è·¯å¾„/full-system-image</span><br></pre></td></tr></table></figure><h3 id="6-å¼€å¯m5"><a href="#6-å¼€å¯m5" class="headerlink" title="6. å¼€å¯m5"></a>6. å¼€å¯m5</h3><p>ç„¶ååœ¨gem&#x2F;util&#x2F;termæ–‡ä»¶å¤¹ä¸­é€šè¿‡m5termæ‰“å¼€m5ï¼Œä½¿å…¶é€šè¿‡å‘½ä»¤è¡Œä¸æ¨¡æ‹Ÿç³»ç»Ÿè¿æ¥ï¼ˆé¦–å…ˆä½ åº”è¯¥å·²ç»ç¼–è¯‘å¹¶å®‰è£…äº†m5termï¼‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">m5term localhost &lt;port&gt;</span><br></pre></td></tr></table></figure><p>ç„¶åå°±æ˜¯æ¼«é•¿çš„ç­‰å¾…ï¼Œç­‰å¾…æ¨¡æ‹Ÿç³»ç»Ÿçš„åˆå§‹åŒ–</p><p>åœ¨æ¨¡æ‹Ÿç³»ç»Ÿçš„å‘½ä»¤è¡Œä¸­é€šè¿‡<code>m5 checkpoint</code>åˆ›å»ºæ£€æŸ¥ç‚¹ï¼Œç„¶åå†é€šè¿‡<code>m5 exit</code>é€€å‡ºæ¨¡æ‹Ÿ</p><p>é€šè¿‡æ£€æŸ¥ç‚¹æ¢å¤æ¨¡æ‹Ÿç³»ç»ŸçŠ¶æ€</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">./build/X86/gem5.opt \</span><br><span class="line">-d core8/1 \</span><br><span class="line">./configs/example/fs.py \</span><br><span class="line">--kernel=x86-linux-kernel-4.19.83 \</span><br><span class="line">--disk-image=x86-parsec.img \</span><br><span class="line">--num-cpus=8 \</span><br><span class="line">--mem-size=256MB</span><br><span class="line">-r 1</span><br></pre></td></tr></table></figure><p>.&#x2F;build&#x2F;RISCV&#x2F;gem5.opt -d RISCVout&#x2F;0 .&#x2F;configs&#x2F;example&#x2F;fs.py â€“kernel&#x3D;$M5_PATH&#x2F;binaries&#x2F;riscv-lupio-linux-kernel â€“disk-image&#x3D;$M5_PATH&#x2F;disks&#x2F;riscv-lupio-busybox.img â€“num-cpus&#x3D;4 â€“mem-size&#x3D;256MB â€“cpu-type&#x3D;AtomicSimpleCPU</p>]]></content>
      
      
      <categories>
          
          <category> Chipletè®ºæ–‡é˜…è¯» </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Chiplet </tag>
            
            <tag> æ¨¡æ‹Ÿå™¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gccç¼–è¯‘å™¨å‚æ•°</title>
      <link href="/2023/11/07/gcc%E7%BC%96%E8%AF%91%E5%99%A8%E5%8F%82%E6%95%B0/"/>
      <url>/2023/11/07/gcc%E7%BC%96%E8%AF%91%E5%99%A8%E5%8F%82%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€ä»€ä¹ˆæ˜¯GCCï¼Ÿ"><a href="#ä¸€ã€ä»€ä¹ˆæ˜¯GCCï¼Ÿ" class="headerlink" title="ä¸€ã€ä»€ä¹ˆæ˜¯GCCï¼Ÿ"></a>ä¸€ã€ä»€ä¹ˆæ˜¯GCCï¼Ÿ</h1><p>GCC(GNU Compiler Collection)å³GNUç¼–è¯‘å™¨å¥—ä»¶ï¼Œå±äºä¸€ç§ç¼–ç¨‹è¯­è¨€ç¼–è¯‘å™¨ã€‚å…¶åŸåä¹Ÿä¸ºGCCï¼ˆGNU C Compilerï¼‰ï¼Œè™½ç„¶ç¼©å†™ä¸€æ ·ä½†æ˜¯ä»…å¯ç¼–è¯‘Cè¯­è¨€ï¼Œåæ¥ç»è¿‡å‘å±•æ‰å˜æˆæ”¯æŒç¼–è¯‘å¤šè¯­è¨€ã€‚GCCçš„åˆè¡·æ˜¯ä¸ºGNUæ“ä½œç³»ç»Ÿä¸“é—¨ç¼–å†™çš„ä¸€æ¬¾ç¼–è¯‘å™¨ï¼ŒåŸæœ¬çš„GNUæ˜¯ä¸“ç”¨äºç¼–è¯‘Cä»£ç ï¼Œç°å¦‚ä»Šå·²æ‰©å±•ä¸ºå¯ä»¥ç¼–è¯‘Cã€C++ã€Javaã€Objective-Cç­‰å¤šç§ç¼–ç¨‹è¯­è¨€çš„ç¼–è¯‘å™¨é›†åˆäº†ã€‚</p><h1 id="äºŒã€GCCã€gccã€g-ä¸‰è€…æœ‰ä½•å…³ç³»ï¼Ÿ"><a href="#äºŒã€GCCã€gccã€g-ä¸‰è€…æœ‰ä½•å…³ç³»ï¼Ÿ" class="headerlink" title="äºŒã€GCCã€gccã€g++ä¸‰è€…æœ‰ä½•å…³ç³»ï¼Ÿ"></a>äºŒã€GCCã€gccã€g++ä¸‰è€…æœ‰ä½•å…³ç³»ï¼Ÿ</h1><p><strong>gcc</strong>ï¼ˆGUN C Compilerï¼‰æ˜¯GCCä¸­çš„cç¼–è¯‘å™¨ï¼Œè€Œ**g++**ï¼ˆGUN C++ Compilerï¼‰æ˜¯GCCä¸­çš„c++ç¼–è¯‘å™¨ã€‚<br>gccå’Œg++ä¸¤è€…éƒ½å¯ä»¥ç¼–è¯‘cå’Œcppæ–‡ä»¶ï¼Œä½†å­˜åœ¨å·®å¼‚ã€‚</p><ul><li><p>gccåœ¨ç¼–è¯‘cppæ—¶è¯­æ³•æŒ‰ç…§cæ¥ç¼–è¯‘ä½†é»˜è®¤ä¸èƒ½é“¾æ¥åˆ°c++çš„åº“ï¼ˆgccé»˜è®¤é“¾æ¥cåº“ï¼Œg++é»˜è®¤é“¾æ¥c++åº“ï¼‰ã€‚</p></li><li><p>g++ç¼–è¯‘.cå’Œ.cppæ–‡ä»¶éƒ½ç»Ÿä¸€æŒ‰cppçš„è¯­æ³•è§„åˆ™æ¥ç¼–è¯‘ã€‚</p><p>  ä¸€èˆ¬<strong>ç¼–è¯‘cç”¨gcc</strong>ï¼Œ**ç¼–è¯‘c++ç”¨g++**ã€‚</p></li></ul><h1 id="ä¸‰ã€GCCç¼–è¯‘æ­¥éª¤"><a href="#ä¸‰ã€GCCç¼–è¯‘æ­¥éª¤" class="headerlink" title="ä¸‰ã€GCCç¼–è¯‘æ­¥éª¤"></a>ä¸‰ã€GCCç¼–è¯‘æ­¥éª¤</h1><p>GCCå¹¿ä¹‰ä¸Šçš„ç¼–è¯‘æµç¨‹å¯åˆ†ä¸ºä»¥ä¸‹å››ä¸ªéƒ¨åˆ†ï¼š</p><ul><li>é¢„å¤„ç†ï¼ˆPre-Processingï¼‰</li><li>ç¼–è¯‘ï¼ˆCompilingï¼‰</li><li>æ±‡ç¼–ï¼ˆAssemblingï¼‰</li><li>é“¾æ¥ï¼ˆLinkingï¼‰</li></ul><h1 id="gcc-å‚æ•°"><a href="#gcc-å‚æ•°" class="headerlink" title="gcc å‚æ•°"></a>gcc å‚æ•°</h1><img src="/2023/11/07/gcc%E7%BC%96%E8%AF%91%E5%99%A8%E5%8F%82%E6%95%B0/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAQmFsYWFhbQ==,size_20,color_FFFFFF,t_70,g_se,x_16.png" class="" title="è¯·æ·»åŠ å›¾ç‰‡æè¿°"><p><a href="https://blog.csdn.net/qq_42475711/article/details/85224010">æµ…æ˜¾æ˜“æ‡‚çš„GCCä½¿ç”¨æ•™ç¨‹â€”â€”åˆçº§ç¯‡_gcc -ddebug-CSDNåšå®¢</a></p><p><a href="https://blog.csdn.net/weixin_50697073/article/details/123759516?app_version=6.2.2&csdn_share_tail=%7B%22type%22:%22blog%22,%22rType%22:%22article%22,%22rId%22:%22123759516%22,%22source%22:%22m0_52631482%22%7D&utm_source=app">ã€ç²¾é€‰ã€‘gccçš„åŸºæœ¬ä½¿ç”¨-CSDNåšå®¢</a></p><p><a href="https://blog.csdn.net/wohu1104/article/details/110789570">GCC ç¼–è¯‘ C(C++)é™æ€é“¾æ¥åº“ï¼ˆgcc -Lã€gcc -lï¼‰å’ŒåŠ¨æ€é“¾æ¥åº“ï¼ˆgcc -fPIC -sharedï¼‰çš„åˆ›å»ºå’Œä½¿ç”¨_c++ é“¾æ¥ -l-CSDNåšå®¢</a></p><p><a href="https://www.cnblogs.com/alan666/p/8311984.html">gcc -I -L -låŒºåˆ« - éš”å£ç‹å”å”a - åšå®¢å›­ (cnblogs.com)</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> GCC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gem5æ¨¡æ‹Ÿå™¨å­¦ä¹ ï¼ˆå…­ï¼‰</title>
      <link href="/2023/11/06/Gem5%E6%A8%A1%E6%8B%9F%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E5%85%AD%EF%BC%89/"/>
      <url>/2023/11/06/Gem5%E6%A8%A1%E6%8B%9F%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E5%85%AD%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="Checkpoints"><a href="#Checkpoints" class="headerlink" title="Checkpoints"></a>Checkpoints</h1><p>å®˜ç½‘ä»‹ç»<a href="https://www.gem5.org/documentation/general_docs/checkpoints/">gem5: Checkpoints</a></p><p>æ£€æŸ¥ç‚¹ç›¸å½“äºgem5æ¨¡æ‹Ÿç³»ç»Ÿçš„å¿«ç…§ã€‚é€šå¸¸æ¥è¯´ï¼Œåˆ›å»ºä¸€ä¸ªå…¨ç³»ç»Ÿæ¨¡æ‹Ÿéœ€è¦å¤§é‡çš„æ—¶é—´ï¼Œä½†ä¸ºè¿™ä¸ªæ¨¡æ‹Ÿç³»ç»Ÿåˆ›å»ºäº†æ£€æŸ¥ç‚¹ä¹‹åï¼Œå¯ä»¥åœ¨ä¸‹æ¬¡å¯åŠ¨æ—¶å°†æ¨¡æ‹Ÿç³»ç»Ÿå¿«é€Ÿå›å¤è‡³æ£€æŸ¥ç‚¹çŠ¶æ€ï¼Œä»è€ŒèŠ‚çœç³»ç»Ÿå¯åŠ¨æ—¶é—´ã€‚</p><p>ä¸€æ—¦åˆ›å»ºäº†checkpointï¼Œgem5ä¼šåœ¨è¾“å‡ºç›®å½•ä¸­å¢åŠ ä¸€ä¸ªcptç›®å½•ï¼ˆcpt.TICKNUMBERï¼Œå…¶ä¸­TICKNUMBERä¸ºåˆ›å»ºæ­¤æ£€æŸ¥ç‚¹æ—¶çš„Tickå€¼ï¼‰ï¼Œè¯¥ç›®å½•å­˜å‚¨checkpointç›¸å…³ä¿¡æ¯ã€‚</p><h2 id="1-åˆ›å»ºæ£€æŸ¥ç‚¹"><a href="#1-åˆ›å»ºæ£€æŸ¥ç‚¹" class="headerlink" title="1. åˆ›å»ºæ£€æŸ¥ç‚¹"></a>1. åˆ›å»ºæ£€æŸ¥ç‚¹</h2><p>æœ‰ä¸‰ç§åˆ›å»ºæ£€æŸ¥ç‚¹çš„æ–¹å¼ï¼š</p><ul><li>å¯åŠ¨æ¨¡æ‹Ÿå™¨ç¯å¢ƒåï¼Œåœ¨æ¨¡æ‹Ÿå™¨ç»ˆç«¯æ‰§è¡Œ<strong>m5 checkpointå‘½ä»¤</strong>ï¼Œä¹Ÿå¯ä»¥å°†å…¶åŒ…å«åœ¨è¿è¡Œè„šæœ¬ä¸­ã€‚</li><li>ä¸“é—¨æœ‰ä¸€ä¸ª<strong>ä¼ªæŒ‡ä»¤</strong>ç”¨äºåˆ›å»ºæ£€æŸ¥ç‚¹ï¼Œä¾‹å¦‚å¯ä»¥åœ¨åº”ç”¨ä¸­åˆ›å»ºæ£€æŸ¥ç‚¹ï¼ˆè¿˜ä¸ç†Ÿæ‚‰ï¼‰</li><li>pythoné…ç½®è„šæœ¬ï¼ˆfs.pyã€ruby_fs.pyï¼‰ä¸­é€šè¿‡<strong>å‘½ä»¤è¡Œå‚æ•°</strong>è®¾ç½®æ£€æŸ¥ç‚¹ã€‚â€“take-checkpointsé€‰é¡¹å¯ä»¥å®šæœŸå‚¨å­˜æ£€æŸ¥ç‚¹ï¼Œâ€“checkpoint-at-endå¯ä»¥åœ¨æ¨¡æ‹Ÿç»“æŸåˆ›å»ºæ£€æŸ¥ç‚¹</li></ul><h2 id="2-æ¢å¤æ£€æŸ¥ç‚¹"><a href="#2-æ¢å¤æ£€æŸ¥ç‚¹" class="headerlink" title="2. æ¢å¤æ£€æŸ¥ç‚¹"></a>2. æ¢å¤æ£€æŸ¥ç‚¹</h2><p>æ£€æŸ¥ç‚¹æ¢å¤éœ€è¦åœ¨å¯åŠ¨ç³»ç»Ÿæ¨¡æ‹Ÿæ—¶è®¾ç½®å‡ ä¸ªå‘½ä»¤è¡Œå‚æ•°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">build/X86/gem5.opt -d æŒ‡å®šè¾“å‡ºç›®å½• configs/example/fs.py --num-cpus=2 -r 1 --checkpoint-dir=checkpointç›®å½•åœ¨æŒ‡å®šçš„è¾“å‡ºç›®å½• --restore-with-cpu=O3CPU --cpu-type=O3CPU</span><br><span class="line"></span><br><span class="line">build/X86/gem5.opt  configs/example/fs.py --num-cpus=2 -r 1 --checkpoint-dir=m5out</span><br></pre></td></tr></table></figure><ul><li><strong>â€“checkpoint-dir</strong>ï¼šç”¨äºæŒ‡å®šä½¿ç”¨çš„checkpointçš„cptæ–‡ä»¶å¤¹æ‰€åœ¨è·¯å¾„</li><li><strong>-r</strong>ï¼šç”¨äºæŒ‡å®šä½¿ç”¨çš„checkpointçš„åºå·</li><li><strong>â€“restore-with-cpu</strong>ç”¨äºæŒ‡å®šæ¢å¤æ—¶CPUçš„ç±»å‹</li></ul><p>å¯åŠ¨ç³»ç»Ÿæ¨¡æ‹Ÿåï¼Œå†é€šè¿‡m5termæ¥å…¥æ¨¡æ‹Ÿç³»ç»Ÿï¼Œç„¶åå¾ˆå¿«å°±ä¼šè¿›å…¥åˆ°å‘½ä»¤è¡Œäº†ã€‚</p><h1 id="m5"><a href="#m5" class="headerlink" title="m5"></a>m5</h1><p>åœ¨ä½¿ç”¨m5æ—¶é¦–å…ˆè¦ç”¨Sconsç¼–è¯‘</p><h1 id="ä¿®æ”¹é•œåƒæ–‡ä»¶"><a href="#ä¿®æ”¹é•œåƒæ–‡ä»¶" class="headerlink" title="ä¿®æ”¹é•œåƒæ–‡ä»¶"></a>ä¿®æ”¹é•œåƒæ–‡ä»¶</h1><p>åœ¨å…¨ç³»ç»Ÿæ¨¡æ‹Ÿä¸­ï¼Œè¿è¡Œç¨‹åºä¸€èˆ¬æ¯”è¾ƒæ…¢ï¼Œç‰¹åˆ«æ˜¯ä¸€äº›æ¯”è¾ƒå¤§çš„benchmarkï¼Œå¦‚æœåœ¨å…¨ç³»ç»Ÿæ¨¡æ‹Ÿä¸­ç¼–è¯‘ä¼šææ…¢ï¼Œå› æ­¤éœ€è¦å°†benchmarkåœ¨å®¿ä¸»æœºç¼–è¯‘å®Œä¹‹åï¼Œç›´æ¥æ”¾åœ¨é•œåƒæ–‡ä»¶ä¸­ï¼Œè¿™æ ·å°±å¯ä»¥å¼€å¯æ¨¡æ‹Ÿåç›´æ¥è¿è¡Œbenchmarkäº†ã€‚</p><p>ç„¶è€Œï¼Œé•œåƒæ–‡ä»¶ä¸å¯ä»¥åƒæ–‡ä»¶ä¸€æ ·ç›´æ¥æ“ä½œï¼Œå¿…é¡»è¿›è¡Œç£ç›˜æŒ‚è½½ã€‚åœ¨ Linux ä¸­ï¼ŒæŒ‚è½½ç£ç›˜æ˜¯å°†æ–°çš„ç£ç›˜è®¾å¤‡è¿æ¥åˆ°æ–‡ä»¶ç³»ç»Ÿçš„è¿‡ç¨‹ï¼Œä½¿å¾—è¯¥ç£ç›˜å¯ç”¨äºå­˜å‚¨å’Œè®¿é—®æ–‡ä»¶ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯å°†é•œåƒæ–‡ä»¶æŒ‚è½½åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œå†åƒæ–‡ä»¶ä¸€æ ·ç›´æ¥æ“ä½œã€‚</p><p>é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ä½œä¸ºæŒ‚è½½ç‚¹ã€‚åœ¨disksæ–‡ä»¶å¤¹ä¸­æ–°å»ºæ–‡ä»¶å¤¹.&#x2F;mnt</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir ./mnt</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œä½¿ç”¨mountå‘½ä»¤æŒ‚è½½é•œåƒæ–‡ä»¶åˆ°æŒ‡å®šæŒ‚è½½ç‚¹ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mount -o loop,offset=1048576 é•œåƒæ–‡ä»¶ ./mnt</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œå¯ä»¥é€šè¿‡df -hå‘½ä»¤æŸ¥çœ‹ç£ç›˜è®¾å¤‡åˆ—è¡¨ï¼Œå¹¶æ‰“å¼€.&#x2F;mntæ–‡ä»¶å¤¹å¯ä»¥çœ‹åˆ°é•œåƒæ–‡ä»¶çš„å†…å®¹ã€‚</p><img src="/2023/11/06/Gem5%E6%A8%A1%E6%8B%9F%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E5%85%AD%EF%BC%89/image-20231107111710727.png" class="" title="image-20231107111710727"><img src="/2023/11/06/Gem5%E6%A8%A1%E6%8B%9F%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E5%85%AD%EF%BC%89/image-20231107111521636.png" class="" title="image-20231107111521636"><p>å°†æµ‹è¯•æ–‡ä»¶æ”¾å…¥æŒ‚è½½ç‚¹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo cp æµ‹è¯•æ–‡ä»¶ ./mnt</span><br></pre></td></tr></table></figure><p>æœ€åï¼Œå–æ¶ˆæŒ‚è½½</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo umount ./mnt</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>MobaXtermé€šè¿‡SSHè¿æ¥è™šæ‹Ÿæœº</title>
      <link href="/2023/11/04/MobaXterm%E9%80%9A%E8%BF%87SSH%E8%BF%9E%E6%8E%A5%E8%99%9A%E6%8B%9F%E6%9C%BA/"/>
      <url>/2023/11/04/MobaXterm%E9%80%9A%E8%BF%87SSH%E8%BF%9E%E6%8E%A5%E8%99%9A%E6%8B%9F%E6%9C%BA/</url>
      
        <content type="html"><![CDATA[<h2 id="1-åœ¨Ubuntuä¸‹å®‰è£…SSHæœåŠ¡"><a href="#1-åœ¨Ubuntuä¸‹å®‰è£…SSHæœåŠ¡" class="headerlink" title="1. åœ¨Ubuntuä¸‹å®‰è£…SSHæœåŠ¡"></a>1. åœ¨Ubuntuä¸‹å®‰è£…SSHæœåŠ¡</h2><p>æŸ¥çœ‹SSHæ˜¯å¦å¯åŠ¨ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service sshd status</span><br></pre></td></tr></table></figure><span id="more"></span><p>å¦‚æœæ²¡æœ‰å®‰è£…SSHï¼Œä¼šå‡ºç°ä»¥ä¸‹æŠ¥é”™</p><img src="/2023/11/04/MobaXterm%E9%80%9A%E8%BF%87SSH%E8%BF%9E%E6%8E%A5%E8%99%9A%E6%8B%9F%E6%9C%BA/image-20231104100420401.png" class="" title="image-20231104100420401"><p>é‚£ä¹ˆéœ€è¦é€šè¿‡ä»¥ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£…</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install openssh-server</span><br></pre></td></tr></table></figure><p>å®‰è£…å®Œæ¯•åå†æ¬¡æŸ¥çœ‹SSHæ˜¯å¦å¯åŠ¨ï¼Œè‹¥æˆåŠŸï¼Œä¼šå‡ºç°ä»¥ä¸‹è¾“å‡º</p><img src="/2023/11/04/MobaXterm%E9%80%9A%E8%BF%87SSH%E8%BF%9E%E6%8E%A5%E8%99%9A%E6%8B%9F%E6%9C%BA/image-20231104100550221.png" class="" title="image-20231104100550221"><h2 id="2-æŸ¥çœ‹è™šæ‹Ÿæœºip"><a href="#2-æŸ¥çœ‹è™šæ‹Ÿæœºip" class="headerlink" title="2. æŸ¥çœ‹è™šæ‹Ÿæœºip"></a>2. æŸ¥çœ‹è™šæ‹Ÿæœºip</h2><p>é€šè¿‡ifconfigå‘½ä»¤æŸ¥çœ‹è™šæ‹Ÿæœºip</p><img src="/2023/11/04/MobaXterm%E9%80%9A%E8%BF%87SSH%E8%BF%9E%E6%8E%A5%E8%99%9A%E6%8B%9F%E6%9C%BA/image-20231104100736596.png" class="" title="image-20231104100736596"><p>å¯ä»¥è™šæ‹Ÿæœºipä¸º192.168.199.128</p><h2 id="3-é€šè¿‡SSHè¿æ¥è™šæ‹Ÿæœº"><a href="#3-é€šè¿‡SSHè¿æ¥è™šæ‹Ÿæœº" class="headerlink" title="3. é€šè¿‡SSHè¿æ¥è™šæ‹Ÿæœº"></a>3. é€šè¿‡SSHè¿æ¥è™šæ‹Ÿæœº</h2><p>æ‰“å¼€MobaXtermï¼Œé¦–å…ˆè¿›å…¥ä¸»é¡µçš„Sessionï¼Œç„¶åé€‰æ‹©SSHï¼Œå†è¾“å…¥è™šæ‹ŸæœºIPï¼Œæœ€åOKå³å¯è¿æ¥è™šæ‹Ÿæœºã€‚</p><img src="/2023/11/04/MobaXterm%E9%80%9A%E8%BF%87SSH%E8%BF%9E%E6%8E%A5%E8%99%9A%E6%8B%9F%E6%9C%BA/image-20231104101010696.png" class="" title="image-20231104101010696"><p>ä¸€èˆ¬é€šè¿‡SSHè¿æ¥è™šæ‹Ÿæœºæ˜¯ä¸ºäº†èƒ½å¤Ÿåœ¨ä¸»æœºå’Œè™šæ‹Ÿæœºä¹‹é—´äº’ä¼ æ–‡ä»¶</p>]]></content>
      
      
      
        <tags>
            
            <tag> MobaXterm è™šæ‹Ÿæœº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gem5æ¨¡æ‹Ÿå™¨å­¦ä¹ ï¼ˆäº”ï¼‰</title>
      <link href="/2023/11/02/Gem5%E6%A8%A1%E6%8B%9F%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%94%EF%BC%89/"/>
      <url>/2023/11/02/Gem5%E6%A8%A1%E6%8B%9F%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%94%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="FSå…¨ç³»ç»Ÿæ¨¡æ‹Ÿ"><a href="#FSå…¨ç³»ç»Ÿæ¨¡æ‹Ÿ" class="headerlink" title="FSå…¨ç³»ç»Ÿæ¨¡æ‹Ÿ"></a>FSå…¨ç³»ç»Ÿæ¨¡æ‹Ÿ</h1><h2 id="ä¸€ã€æ„å»ºX86ç³»ç»Ÿ"><a href="#ä¸€ã€æ„å»ºX86ç³»ç»Ÿ" class="headerlink" title="ä¸€ã€æ„å»ºX86ç³»ç»Ÿ"></a>ä¸€ã€æ„å»ºX86ç³»ç»Ÿ</h2><p>åˆ‡æ¢åˆ°gemç›®å½•ä¸‹ï¼Œä½¿ç”¨Sconsè¿›è¡Œæ„å»º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scons ./build/X86/gem5.opt -j [NumberOfThread]</span><br></pre></td></tr></table></figure><h2 id="äºŒã€è·å–é•œåƒæ–‡ä»¶å’ŒLinuxå†…æ ¸æ–‡ä»¶"><a href="#äºŒã€è·å–é•œåƒæ–‡ä»¶å’ŒLinuxå†…æ ¸æ–‡ä»¶" class="headerlink" title="äºŒã€è·å–é•œåƒæ–‡ä»¶å’ŒLinuxå†…æ ¸æ–‡ä»¶"></a>äºŒã€è·å–é•œåƒæ–‡ä»¶å’ŒLinuxå†…æ ¸æ–‡ä»¶</h2><p> FSæ¨¡æ‹Ÿä¼šå¯åŠ¨Linuxæ“ä½œç³»ç»Ÿï¼Œä¼šæ¨¡æ‹Ÿç³»ç»Ÿçš„æ‰€æœ‰ç»„ä»¶ã€‚å› æ­¤éœ€è¦ç»™ç³»ç»Ÿé…ç½®ç›¸åº”çš„Linuxå†…æ ¸ä»¥åŠç£ç›˜é•œåƒ</p><p>img æ–‡ä»¶å’Œ vmlinux æ–‡ä»¶æ˜¯ gem5 ä¸­å¯åŠ¨æ“ä½œç³»ç»Ÿæ‰€éœ€çš„ä¸¤ä¸ªé‡è¦æ–‡ä»¶ã€‚</p><ul><li><strong>ç£ç›˜é•œåƒï¼ˆimg æ–‡ä»¶ï¼‰</strong>å‚¨å­˜äº†æ“ä½œç³»ç»Ÿçš„æ–‡ä»¶ç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºï¼Œè¿™äº›æ–‡ä»¶æ˜¯æ“ä½œç³»ç»Ÿè¿è¡Œæ‰€å¿…éœ€çš„ã€‚æ“ä½œç³»ç»Ÿéœ€è¦æ–‡ä»¶ç³»ç»Ÿæ¥å­˜å‚¨å’Œç»„ç»‡æ–‡ä»¶ï¼Œéœ€è¦åº”ç”¨ç¨‹åºæ¥å®ç°ç‰¹å®šåŠŸèƒ½ã€‚</li><li><strong>Linuxå†…æ ¸æ–‡ä»¶ï¼ˆvmlinux æ–‡ä»¶ï¼‰</strong>å‚¨å­˜äº†æ“ä½œç³»ç»Ÿçš„å†…æ ¸ä»£ç ã€‚å†…æ ¸æ˜¯æ“ä½œç³»ç»Ÿçš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œè´Ÿè´£ç®¡ç†ç³»ç»Ÿèµ„æºå’Œæä¾›åŸºæœ¬çš„æœåŠ¡ã€‚å¦‚æœæ²¡æœ‰å†…æ ¸ï¼Œæ“ä½œç³»ç»Ÿå°±æ— æ³•æ­£å¸¸å¯åŠ¨å’Œè¿è¡Œã€‚</li></ul><h3 id="1-è‡ªåŠ¨è·å–è„šæœ¬"><a href="#1-è‡ªåŠ¨è·å–è„šæœ¬" class="headerlink" title="1. è‡ªåŠ¨è·å–è„šæœ¬"></a>1. è‡ªåŠ¨è·å–è„šæœ¬</h3><p>å®˜æ–¹æ•™ç¨‹ä¸­ä½¿ç”¨çš„imgå’Œvmlinuxç›´æ¥æ¥è‡ªäºgem5èµ„æºåº“ï¼ˆresource repositoryï¼‰ï¼Œç›´æ¥åˆ©ç”¨Resourceç±»ï¼ˆ<a href="https://www.gem5.org/documentation/general_docs/gem5_resources/">gem5: gem5-resources</a>ï¼‰ä¸‹è½½åˆ°æœ¬åœ°ã€‚Gem5å®˜ç½‘æä¾›äº†é€šè¿‡Resourceè‡ªåŠ¨è·å–imgæ–‡ä»¶å’Œvmlinuxæ–‡ä»¶ï¼Œå¹¶è¿è¡Œå…¨ç³»ç»Ÿæ¨¡æ‹Ÿçš„ç¤ºä¾‹è„šæœ¬ï¼Œè„šæœ¬ä»£ç åœ¨<code>configs/example/gem5_library/</code>ç›®å½•ä¸­ã€‚ä»¥configs&#x2F;example&#x2F;gem5_library&#x2F;x86-parsec-benchmarks.pyä¸ºä¾‹</p><p>gem5å¯ä»¥é€šè¿‡KVMå¯¹ä»¿çœŸè¿›è¡ŒåŠ é€Ÿï¼Œä½†æœ‰çš„CPUä¸æ”¯æŒKVMï¼ŒæŸ¥çœ‹ä½ çš„å¤„ç†å™¨æ˜¯å¦æ”¯æŒKVMã€‚å¯ä»¥é€šè¿‡å®‰è£…sudo apt install qemu-kvmå¹¶é€šè¿‡kvm-okæ¥æŸ¥çœ‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># å®‰è£…qemu-kvm</span><br><span class="line">sudo apt install qemu-kvm</span><br><span class="line"># æŸ¥çœ‹KVMæ˜¯å¦å®‰è£…</span><br><span class="line">kvm-ok</span><br></pre></td></tr></table></figure><p>æˆ‘çš„å¤„ç†å™¨å¹¶ä¸æ”¯æŒKVM</p><img src="/2023/11/02/Gem5%E6%A8%A1%E6%8B%9F%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%94%EF%BC%89/image-20231114123822874.png" class="" title="image-20231114123822874"><p>å› æ­¤åªèƒ½å…³é—­KVM</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># Step1 ä½¿ç”¨requiresè¿›è¡Œæ£€æŸ¥æ—¶å°†kvm_requiredç½®ä¸ºFalse</span><br><span class="line">requires(</span><br><span class="line">    isa_required=ISA.X86,</span><br><span class="line">    coherence_protocol_required=CoherenceProtocol.MESI_TWO_LEVEL,</span><br><span class="line">    # kvm_required=True,</span><br><span class="line">    kvm_required=False,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"># Step2 è®¾ç½®å¤„ç†å™¨æ—¶ï¼Œå‡ä½¿ç”¨TIMINGå¤„ç†å™¨</span><br><span class="line">processor = SimpleSwitchableProcessor(</span><br><span class="line">    # starting_core_type=CPUTypes.KVM,</span><br><span class="line">    starting_core_type=CPUTypes.TIMING,</span><br><span class="line">    switch_core_type=CPUTypes.TIMING,</span><br><span class="line">    isa=ISA.X86,</span><br><span class="line">    num_cores=2,</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±å¯ä»¥è¿è¡Œæ¨¡æ‹Ÿäº†ï¼Œä½¿ç”¨çš„benchmarkå’Œsizeå¯ä»¥åœ¨è¯¥è„šæœ¬çš„æ³¨é‡Šä¸­æŸ¥çœ‹</p><img src="/2023/11/02/Gem5%E6%A8%A1%E6%8B%9F%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%94%EF%BC%89/image-20231114093504398.png" class="" title="image-20231114093504398"><img src="/2023/11/02/Gem5%E6%A8%A1%E6%8B%9F%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%94%EF%BC%89/image-20231114093427885.png" class="" title="image-20231114093427885"><h3 id="2-è‡ªå·±åˆ¶ä½œimgæ–‡ä»¶"><a href="#2-è‡ªå·±åˆ¶ä½œimgæ–‡ä»¶" class="headerlink" title="2.è‡ªå·±åˆ¶ä½œimgæ–‡ä»¶"></a>2.è‡ªå·±åˆ¶ä½œimgæ–‡ä»¶</h3><h2 id="ä¸‰ã€è®¾ç½®ç¯å¢ƒå˜é‡"><a href="#ä¸‰ã€è®¾ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="ä¸‰ã€è®¾ç½®ç¯å¢ƒå˜é‡"></a>ä¸‰ã€è®¾ç½®ç¯å¢ƒå˜é‡</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># ä¿®æ”¹bashrcæ–‡ä»¶ä»¥æ·»åŠ ç¯å¢ƒå˜é‡</span><br><span class="line">vim ~/.bashrc</span><br><span class="line"># åœ¨æ‰“å¼€çš„æ–‡ä»¶çš„å°¾éƒ¨åŠ å…¥ç¯å¢ƒå˜é‡</span><br><span class="line">export M5_PATH=gem5ç»å¯¹è·¯å¾„/full-system-image</span><br></pre></td></tr></table></figure><h2 id="å››ã€é€šè¿‡é…ç½®æ–‡ä»¶å¯åŠ¨æ¨¡æ‹Ÿç³»ç»Ÿ"><a href="#å››ã€é€šè¿‡é…ç½®æ–‡ä»¶å¯åŠ¨æ¨¡æ‹Ÿç³»ç»Ÿ" class="headerlink" title="å››ã€é€šè¿‡é…ç½®æ–‡ä»¶å¯åŠ¨æ¨¡æ‹Ÿç³»ç»Ÿ"></a>å››ã€é€šè¿‡é…ç½®æ–‡ä»¶å¯åŠ¨æ¨¡æ‹Ÿç³»ç»Ÿ</h2><p>gem5æä¾›äº†è®¸å¤šé…ç½®æ–‡ä»¶æ¥é…ç½®ä¸åŒçš„ç³»ç»Ÿï¼Œå…¶ä¸­å¯ä»¥ç”±fs.pyä¸å‘½ä»¤è¡Œå‚æ•°æ­é…å¿«é€Ÿå®ç°ä¸åŒé…ç½®çš„å…¨ç³»ç»Ÿæ¨¡æ‹Ÿ</p><p>fs.pyçš„å„ç§å‘½ä»¤è¡Œå‚æ•°å¯ä»¥é€šè¿‡<code>fs.py -h</code>æŸ¥çœ‹</p><h1 id="m5ç«¯"><a href="#m5ç«¯" class="headerlink" title="m5ç«¯"></a>m5ç«¯</h1><h3 id="1-m5ä»‹ç»"><a href="#1-m5ä»‹ç»" class="headerlink" title="1. m5ä»‹ç»"></a>1. m5ä»‹ç»</h3><h3 id="2-ç”Ÿæˆm5ä»¥åŠå¯¹åº”çš„libm5-aåº“"><a href="#2-ç”Ÿæˆm5ä»¥åŠå¯¹åº”çš„libm5-aåº“" class="headerlink" title="2. ç”Ÿæˆm5ä»¥åŠå¯¹åº”çš„libm5.aåº“"></a>2. ç”Ÿæˆm5ä»¥åŠå¯¹åº”çš„libm5.aåº“</h3><p>è¦åœ¨åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨m5æä¾›çš„æŒ‡ä»¤ï¼Œé¦–å…ˆéœ€è¦ç”Ÿæˆm5ä»¥åŠå¯¹åº”çš„libm5.aåº“</p><p>ps: ç¼–è¯‘ä¹‹å‰å¥½åƒè¦ç¡®ä¿å®‰è£…clangï¼Œå¹¶ä¿è¯å…¶ç‰ˆæœ¬ä¸º6-10</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># Step 1 åˆ‡æ¢åˆ°gem5/util/m5ç›®å½•</span><br><span class="line"> cd util/m5</span><br><span class="line"># Step 2 ç¼–è¯‘</span><br><span class="line"> scons build/x86/out/m5</span><br></pre></td></tr></table></figure><p> åˆ©ç”¨libm5.aåº“ï¼Œå³å¯åœ¨åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨libm5.aåº“ä¸­çš„å‡½æ•°</p><p>ç¼–å†™å¦‚ä¸‹æµ‹è¯•ç¨‹åº</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">########hello_m5.cpp##########</span><br><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &quot;gem5/m5ops.h&quot;  //å¼•å…¥m5ops.håº“</span><br><span class="line"> </span><br><span class="line">int main(int argc, char* argv[])</span><br><span class="line">&#123;</span><br><span class="line">    m5_reset_stats(0,0);  //é‡ç½®æ¨¡æ‹Ÿç»Ÿè®¡æ•°æ®ï¼Œm5åº“ä¸­å®ç°çš„å‡½æ•°</span><br><span class="line"> </span><br><span class="line">    printf(&quot;Hello world!\n&quot;);</span><br><span class="line">    </span><br><span class="line">    m5_dump_stats(0,0);  //å°†æ¨¡æ‹Ÿç»Ÿè®¡æ•°æ®ä¿å­˜ï¼Œm5åº“ä¸­å®ç°çš„å‡½æ•°</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ©ç”¨g++å’Œåº“è¿›è¡Œç¼–è¯‘</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">g++ -o hello_m5 hello_m5.cpp -std=c++11 \</span><br><span class="line">-Igem5ç»å¯¹è·¯å¾„/include \</span><br><span class="line">-Lgem5ç»å¯¹è·¯å¾„/util/m5/build/x86/out -lm5</span><br><span class="line"></span><br><span class="line">g++ -o hello_m5 hello_m5.cpp -std=c++11 \</span><br><span class="line">-I$GEM5/include \</span><br><span class="line">-L$GEM5/util/m5/build/x86/out -lm5</span><br><span class="line"></span><br><span class="line">g++ -o hello_m5 hello_m5.cpp -std=c++11 \</span><br><span class="line">-I$GEM5/include \</span><br><span class="line">-L$GEM5/include -lm5</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç„¶åå°†ç¼–è¯‘å‡ºçš„å¯æ‰§è¡Œæ–‡ä»¶é€šè¿‡æ–‡ä»¶æŒ‚è½½çš„æ–¹å¼å­˜å‚¨åˆ°imgé•œåƒæ–‡ä»¶ä¸­ã€‚</p><h3 id="3-å¯åŠ¨m5ç«¯"><a href="#3-å¯åŠ¨m5ç«¯" class="headerlink" title="3. å¯åŠ¨m5ç«¯"></a>3. å¯åŠ¨m5ç«¯</h3><p>å¯åŠ¨m5æœ‰ä¸¤ç§æ–¹æ³•ï¼Œä¸€ç§æ˜¯é€šè¿‡ç³»ç»Ÿè‡ªå¸¦çš„telnetæˆ–è€…gem5ä¸­æä¾›çš„m5termå·¥å…·ï¼Œæ¨èm5termã€‚</p><h4 id="ï¼ˆ1ï¼‰telnet"><a href="#ï¼ˆ1ï¼‰telnet" class="headerlink" title="ï¼ˆ1ï¼‰telnet"></a>ï¼ˆ1ï¼‰telnet</h4><p>ä½¿ç”¨ä¸éœ€è¦é¢å¤–å®‰è£…æˆ–é…ç½®ï¼Œç›´æ¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">telent &lt;host&gt; &lt;post&gt;</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">telnet localhost 3456</span><br><span class="line">// 3456è¡¨ç¤ºç”¨äºè¿æ¥æ¨¡æ‹Ÿç³»ç»Ÿçš„ç«¯å£å·ï¼Œå†gem5æ¨¡æ‹Ÿä¸­ï¼Œé»˜è®¤çš„èµ·å§‹ç«¯å£å·ä¸º3456ï¼Œ</span><br><span class="line">// å½“åç»­éœ€è¦æ¨¡æ‹Ÿå¤šä¸ªç³»ç»Ÿï¼Œç«¯å£å·éœ€è¦æ¯æ¬¡å¢åŠ 1</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ2ï¼‰m5term"><a href="#ï¼ˆ2ï¼‰m5term" class="headerlink" title="ï¼ˆ2ï¼‰m5term"></a>ï¼ˆ2ï¼‰m5term</h4><p>ä½¿ç”¨m5å‰ï¼Œå¿…é¡»å…ˆæ ¹æ®æºç æ„å»ºè¯¥å·¥å…·</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># Step 1 åˆ‡æ¢åˆ°gem5/util/termç›®å½•</span><br><span class="line"> cd util/term</span><br><span class="line"># Step 2 ç¼–è¯‘</span><br><span class="line"> gcc  -o m5term term.c</span><br><span class="line"># Step 3 å®‰è£…</span><br><span class="line"> sudo install -o root -m 555 m5term /usr/local/bin</span><br></pre></td></tr></table></figure><p>ä¹‹åï¼Œå°±å¯ä»¥é€šè¿‡ä¸telnetç±»ä¼¼çš„æ–¹å¼å¯åŠ¨m5äº†</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">m5term &lt;host&gt; &lt;post&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Gem5æ¨¡æ‹Ÿå™¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Gem5 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¤šçº§å­˜å‚¨å±‚æ¬¡</title>
      <link href="/2023/10/31/%E5%A4%9A%E7%BA%A7%E5%AD%98%E5%82%A8%E5%B1%82%E6%AC%A1/"/>
      <url>/2023/10/31/%E5%A4%9A%E7%BA%A7%E5%AD%98%E5%82%A8%E5%B1%82%E6%AC%A1/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€å¤šçº§å­˜å‚¨å±‚æ¬¡"><a href="#ä¸€ã€å¤šçº§å­˜å‚¨å±‚æ¬¡" class="headerlink" title="ä¸€ã€å¤šçº§å­˜å‚¨å±‚æ¬¡"></a>ä¸€ã€å¤šçº§å­˜å‚¨å±‚æ¬¡</h1><p>ç”¨å¤šç§å­˜å‚¨å™¨æ„æˆå­˜å‚¨å±‚æ¬¡ç»“æ„æ˜¯æé«˜å­˜å‚¨ç³»ç»Ÿæ•´ä½“æ€§èƒ½çš„å¿…è¦æ–¹æ³•ã€‚</p><h2 id="1-1-ä¸ºä»€ä¹ˆéœ€è¦å¤šçº§å­˜å‚¨å±‚æ¬¡"><a href="#1-1-ä¸ºä»€ä¹ˆéœ€è¦å¤šçº§å­˜å‚¨å±‚æ¬¡" class="headerlink" title="1.1 ä¸ºä»€ä¹ˆéœ€è¦å¤šçº§å­˜å‚¨å±‚æ¬¡"></a>1.1 ä¸ºä»€ä¹ˆéœ€è¦å¤šçº§å­˜å‚¨å±‚æ¬¡</h2><p>å­˜å‚¨å™¨çš„ä¸‰ä¸ªä¸»è¦æŒ‡æ ‡æ˜¯<strong>å®¹é‡</strong>ã€<strong>é€Ÿåº¦</strong>å’Œ<strong>å•ä½ä»·æ ¼</strong>ã€‚æˆ‘ä»¬å¸Œæœ›è®¾è®¡â€œå®¹é‡å¤§ã€é€Ÿåº¦å¿«ã€ä»·æ ¼ä½â€çš„å­˜å‚¨ç³»ç»Ÿï¼Œä¾‹å¦‚ï¼Œå¤§è§„æ¨¡åº”ç”¨ç¨‹åºè¦æ±‚å­˜å‚¨ç³»ç»Ÿå®¹é‡å¤§ã€ä»·æ ¼ä½ï¼›ç„¶è€Œï¼Œå­˜å‚¨ç³»ç»Ÿåˆåº”è¯¥åœ¨CPUæ‰§è¡Œç¨‹åºæ—¶ä»¥è¶³å¤Ÿå¿«çš„ç´ çš„å‘CPUæä¾›æŒ‡ä»¤å’Œæ•°æ®ã€‚ç„¶è€Œï¼Œç›®å‰è¿˜æ²¡æœ‰ä¸€ç§å­˜å‚¨å™¨æŠ€æœ¯èƒ½æ»¡è¶³è¿™ä¸‰ä¸ªè¦æ±‚ï¼Œç°æœ‰çš„å­˜å‚¨å™¨æŠ€æœ¯åªèƒ½æ»¡è¶³å…¶ä¸­ä¸€æˆ–ä¸¤ä¸ªè¦æ±‚ã€‚</p><p>è§£å†³è¿™äº›çŸ›ç›¾çš„æ–¹æ³•ï¼Œå°±æ˜¯é‡‡ç”¨å¤šç§å­˜å‚¨å™¨æŠ€æœ¯ï¼Œæ„æˆå¤šçº§å­˜å‚¨å±‚æ¬¡ã€‚</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>CacheåŸºç¡€çŸ¥è¯†</title>
      <link href="/2023/10/31/Cache%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"/>
      <url>/2023/10/31/Cache%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€CacheæŠ€æœ¯"><a href="#ä¸€ã€CacheæŠ€æœ¯" class="headerlink" title="ä¸€ã€CacheæŠ€æœ¯"></a>ä¸€ã€CacheæŠ€æœ¯</h1><p>ç°ä»£è®¡ç®—æœºéƒ½åœ¨CPUå’Œä¸»å­˜ä¹‹é—´è®¾ç½®ä¸€ä¸ªé«˜é€Ÿã€å°å®¹é‡çš„ç¼“å†²å¤„ç†å™¨ï¼Œç§°ä¸ºCacheã€‚Cacheçš„å­˜åœ¨å¡«è¡¥äº†CPUå’Œä¸»å­˜åœ¨é€Ÿåº¦ä¸Šçš„å·¨å¤§å·®è·ï¼Œå¯¹äºæé«˜æ•´ä¸ªè®¡ç®—æœºç³»ç»Ÿçš„æ€§èƒ½æœ‰é‡è¦æ„ä¹‰ï¼Œæ˜¯ç°ä»£è®¡ç®—ç³»ç»Ÿå¿…ä¸å¯å°‘çš„éƒ¨ä»¶ï¼Œç„¶è€Œï¼Œ<strong>Cacheå¯¹ç¨‹åºå‘˜æ˜¯é€æ˜çš„</strong>ã€‚</p><p>æ­¤å¤–ï¼ŒCacheæŠ€æœ¯è¿™ä¸ªæ­¤è¢«å¹¿æ³›ç”¨äºæŒ‡ä»£åˆ©ç”¨ç¼“å†²æŠ€æœ¯æ¥å®ç°å±€éƒ¨æ•°æ®å†åˆ©ç”¨çš„æŠ€æœ¯ã€‚å…¶èƒ½å¤Ÿç¼“è§£ä¸¤ä¸ªéƒ¨ä»¶ä¹‹é—´è®¿é—®æ•°æ®é€Ÿåº¦å·®è·è¾ƒå¤§çš„é—®é¢˜ï¼Œåœ¨ç¡¬ç›˜ã€ç½‘é¡µä¸­éƒ½èƒ½çœ‹è§ç¼“å†²æŠ€æœ¯çš„èº«å½±ï¼Œæœ¬æ–‡ä¸“æŒ‡CPUä¸ä¸»å­˜ä¹‹é—´çš„Cacheã€‚</p><span id="more"></span><h1 id="äºŒã€Cacheç»“æ„"><a href="#äºŒã€Cacheç»“æ„" class="headerlink" title="äºŒã€Cacheç»“æ„"></a>äºŒã€Cacheç»“æ„</h1><h2 id="ç¼“å­˜å—"><a href="#ç¼“å­˜å—" class="headerlink" title="ç¼“å­˜å—"></a>ç¼“å­˜å—</h2><p>Cache å’Œä¸»å­˜é—´ä¿¡æ¯çš„äº¤äº’<strong>æŒ‰å—æ¥ç»„ç»‡</strong>ã€‚Cacheå’Œä¸»å­˜å‡è¢«åˆ†å‰²ä¸ºå¤§å°ç›¸åŒçš„å—ï¼Œå—å¤§å°ï¼ˆblocksizeï¼‰é€šå¸¸ä¸º2çš„å¹‚æ¬¡æ–¹å­—èŠ‚ã€‚</p><p>ã€å›¾ä¸€ï¼šCacheã€å†…å­˜è¢«åˆ†å‰²ä¸ºå—ã€‘</p><p>CPUé€šè¿‡è®¿å­˜æŒ‡ä»¤ä¸­çš„ä¸»å­˜åœ°å€å‘Cacheè¯·æ±‚ä¸»å­˜æ•°æ®ï¼Œè¯¥ä¸»å­˜åœ°å€è¢«åˆ†å‰²ä¸ºä¸¤éƒ¨åˆ†ï¼š<strong>å—åœ°å€</strong>å’Œ<strong>å—å†…ä½ç§»</strong></p><img src="/2023/10/31/Cache%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20231031155331776.png" class="" title="å†…å­˜åœ°å€åˆ†å‰²ä¸ºå—åœ°å€å’Œå—å†…åç§»"><p>ã€å›¾äºŒï¼šä¸»å­˜åœ°å€è¢«åˆ†å‰²ä¸ºå—åœ°å€å’Œå—å†…åç§»ã€‘</p><p>ç¡¬ä»¶ä¼š<u>æ ¹æ®<strong>å—åœ°å€</strong>æŸ¥æ‰¾è¯¥å—åœ¨Cacheä¸­çš„ä½ç½®</u>ï¼Œå†<u>é€šè¿‡<strong>å—å†…ä½ç§»</strong>ç¡®å®šæ‰€è®¿é—®çš„æ•°æ®å†è¯¥å—ä¸­çš„ä½ç½®</u>ã€‚</p><h2 id="åˆ†ç¦»Cacheå’Œæ··åˆCache"><a href="#åˆ†ç¦»Cacheå’Œæ··åˆCache" class="headerlink" title="åˆ†ç¦»Cacheå’Œæ··åˆCache"></a>åˆ†ç¦»Cacheå’Œæ··åˆCache</h2><p>æ··åˆCacheç»“æ„ï¼šæŒ‡ä»¤å’Œæ•°æ®é‡‡ç”¨ä¸€ä¸ªCacheç¼“å†²ã€‚è¯»æŒ‡ä»¤å’Œè¯»å†™æ•°æ®<strong>ä¸èƒ½å¹¶è¡Œ</strong></p><p>åˆ†ç¦»Cacheç»“æ„ï¼šæŒ‡ä»¤å’Œæ•°æ®åˆ†åˆ«é‡‡ç”¨ä¸€ä¸ªCacheç¼“å†²ï¼Œå³<u>æŒ‡ä»¤Cache</u>å’Œ<u>æ•°æ®Cache</u>ã€‚ä¸¤ä¸ªCacheå…·æœ‰ç‹¬ç«‹çš„è¯»å†™ç«¯å£ï¼Œè¯»æŒ‡ä»¤å’Œè¯»å†™æ•°æ®<strong>å¯ä»¥å¹¶è¡Œ</strong>ã€‚</p><h1 id="ä¸‰ã€Cacheå·¥ä½œåŸç†"><a href="#ä¸‰ã€Cacheå·¥ä½œåŸç†" class="headerlink" title="ä¸‰ã€Cacheå·¥ä½œåŸç†"></a>ä¸‰ã€Cacheå·¥ä½œåŸç†</h1><p>åœ¨æ¯ä¸ªå­˜å‚¨å±‚æ¬¡ä¸­ï¼Œéƒ½ç»•ä¸å¼€è¿™å››ä¸ªå…³é”®é—®é¢˜ï¼š</p><ul><li>æ˜ åƒè§„åˆ™ï¼šå½“æŠŠä¸€ä¸ªå—ä»ä¸»å­˜è°ƒå…¥Cacheæ—¶ï¼Œå¯ä»¥æ”¾åˆ°å“ªäº›ä½ç½®ä¸Šï¼Ÿ</li><li>æŸ¥æ‰¾ç®—æ³•ï¼šå½“æ‰€è¦è®¿é—®çš„å—åœ¨Cacheä¸­æ—¶ï¼Œå¦‚ä½•æ‰¾åˆ°è¯¥å—ï¼Ÿ</li><li>æ›¿æ¢ç®—æ³•ï¼šå½“å‘ç”Ÿå¤±æ•ˆæ—¶ï¼Œåº”è¯¥æ›¿æ¢Cacheä¸­çš„å“ªä¸€ä¸ªå—ï¼Ÿ</li><li>å†™ç­–ç•¥ï¼šå½“è¿›è¡Œå†™è®¿é—®æ—¶ï¼Œåº”è¯¥å¦‚ä½•æ“ä½œï¼Ÿ</li></ul><p>ä¸‹é¢ä¸€ä¸€è¿›è¡Œæ¢è®¨ï¼š</p><h2 id="ï¼ˆ1ï¼‰æ˜ åƒè§„åˆ™"><a href="#ï¼ˆ1ï¼‰æ˜ åƒè§„åˆ™" class="headerlink" title="ï¼ˆ1ï¼‰æ˜ åƒè§„åˆ™"></a>ï¼ˆ1ï¼‰æ˜ åƒè§„åˆ™</h2><p>å½“è¦æŠŠä¸€ä¸ªå—ä»ä¸»å­˜è°ƒå…¥Cacheä¸­æ—¶ï¼Œé¦–å…ˆè¦ç¡®å®šè¿™ä¸ªå—å¯ä»¥æ”¾åœ¨Cacheä¸­çš„å“ªäº›ä½ç½®ä¸Šã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä¸»å­˜çš„å®¹é‡è¿œè¿œå¤§äºCacheçš„å®¹é‡ï¼Œå› æ­¤è¦ç¡®å®šè¾ƒå¤šçš„ä¸»å­˜å—ä¸è¾ƒå°‘çš„Cacheå—ä¹‹é—´çš„å¯¹åº”å…³ç³»ï¼Œè¿™å°±æ˜¯Cacheä¸ä¸»å­˜é—´çš„æ˜ åƒè§„åˆ™ã€‚ä¸»è¦æœ‰ä»¥ä¸‹ä¸‰ç§ï¼š</p><h3 id="1-ç›´æ¥æ˜ åƒ"><a href="#1-ç›´æ¥æ˜ åƒ" class="headerlink" title="1. ç›´æ¥æ˜ åƒ"></a>1. ç›´æ¥æ˜ åƒ</h3><p>ç›´æ¥æ˜ åƒï¼ˆDirect Mappingï¼‰æ˜¯æŒ‡æ¯ä¸ªä¸»å­˜å—åªèƒ½è¢«æ”¾ç½®åˆ°å”¯ä¸€çš„ä¸€ä¸ªCacheå—ä½ç½®ã€‚</p><p>é€šå¸¸é‡‡ç”¨ç›´æ¥å–æ¨¡çš„æ–¹å¼è¿›è¡Œæ˜ åƒã€‚å¯¹äºä¸»å­˜çš„ç¬¬iå—ï¼ˆå³å—åœ°å€ä¸ºiï¼‰ï¼Œè®¾å®ƒæ˜ åƒåˆ°Cacheçš„ç¬¬jå—ï¼ˆå³å—åœ°å€ä¸ºjï¼‰ï¼ŒCacheæ€»å…±æœ‰Må—ï¼Œåˆ™å¯¹åº”å…³ç³»ä¸ºï¼š<br>$$<br>j &#x3D; i mod M<br>$$</p><h3 id="2-å…¨ç›¸è”æ˜ åƒ"><a href="#2-å…¨ç›¸è”æ˜ åƒ" class="headerlink" title="2. å…¨ç›¸è”æ˜ åƒ"></a>2. å…¨ç›¸è”æ˜ åƒ</h3><p>å…¨ç›¸è”æ˜ åƒï¼ˆFully Associative Mappingï¼‰æ˜¯æŒ‡æ¯ä¸ªä¸»å­˜å—å¯ä»¥è¢«æ”¾ç½®åˆ°ä»»ä½•ä¸€ä¸ªCacheå—ä½ç½®ã€‚</p><h3 id="3-ç»„ç›¸è”æ˜ åƒ"><a href="#3-ç»„ç›¸è”æ˜ åƒ" class="headerlink" title="3. ç»„ç›¸è”æ˜ åƒ"></a>3. ç»„ç›¸è”æ˜ åƒ</h3><p>ç»„ç›¸è”æ˜ åƒï¼ˆSet Associative Mappingï¼‰æ˜¯æŒ‡æ¯ä¸ªä¸»å­˜å—å¯ä»¥è¢«æ”¾ç½®åˆ°Cacheä¸­å”¯ä¸€çš„ä¸€ä¸ªç»„ä¸­çš„ä»»ä½•ä¸€ä¸ªå—ä½ç½®ã€‚</p><p>è¿™é‡Œå¼•å…¥äº†ç»„çš„æ¦‚å¿µï¼ŒCacheè¢«ç­‰åˆ†ä¸ºè‹¥å¹²ä¸ªç»„ï¼Œæ¯ç»„ç”±è‹¥å¹²ä¸ªå—æ„æˆã€‚å…·ä½“åœ°ï¼Œå‡è®¾ç»„ç›¸è”Cacheä¸€å…±æœ‰Mä¸ªå—ï¼Œè¿™Mä¸ªå—è¢«åˆ†ä¸ºGç»„ï¼Œåˆ™æ¯ç»„æœ‰n&#x3D;M&#x2F;Gä¸ªå—ï¼Œç§°è¯¥æ˜ åƒè§„åˆ™ä¸ºnè·¯ç»„ç›¸è”ï¼ˆn-way Set Associativeï¼‰,ç›´æ¥æ˜ åƒå®é™…ä¸Šå³ä¸º1è·¯ç»„ç›¸è”ï¼Œå…¨ç›¸è”å³ä¸ºMè·¯ç»„ç›¸è”ã€‚</p><p>é€šå¸¸ä¹Ÿé€šè¿‡ç›´æ¥å–æ¨¡çš„æ–¹æ³•è¿›è¡Œç»„çš„æ˜ åƒï¼Œå¯¹äºä¸»å­˜çš„ç¬¬iå—ï¼ˆå³å—åœ°å€ä¸ºiï¼‰ï¼Œè®¾å®ƒæ˜ åƒåˆ°Cacheçš„ç¬¬kç»„ï¼ŒCacheæ€»å…±æœ‰Gç»„ï¼Œåˆ™å¯¹åº”å…³ç³»ä¸ºï¼š<br>$$<br>k &#x3D; i mod G<br>$$<br>ç›¸è”åº¦çš„é«˜ä½æœ‰åˆ©æœ‰å¼Šï¼Œåœ¨å®é™…è®¾è®¡æ—¶æ˜¯ä¸€ä¸ªå€¼å¾—tradeoffçš„äº‹æƒ…ã€‚</p><p>ç›¸è”åº¦è¶Šé«˜ï¼ŒCacheç©ºé—´çš„åˆ©ç”¨ç‡è¶Šé«˜ï¼Œå—å†²çªçš„æ¦‚ç‡å°±è¶Šä½ï¼Œå› æ­¤Cacheçš„å¤±æ•ˆç‡å°±è¶Šä½ã€‚ä½†é«˜ç›¸è”åº¦çš„æŸ¥æ‰¾å—è¿‡ç¨‹è¾ƒå¤æ‚ï¼Œä¼šä½¿Cacheçš„å®ç°å¤æ‚åº¦å’Œä»£ä»·å¢å¤§ï¼Œä»è€Œé™ä½è®¿é—®é€Ÿåº¦ã€‚</p><table><thead><tr><th></th><th>åˆ©</th><th>å¼Š</th></tr></thead><tbody><tr><td>é«˜ç›¸è”åº¦</td><td>Cacheå¤±æ•ˆç‡ä½</td><td>è®¿é—®Cacheé€Ÿåº¦æ…¢</td></tr><tr><td>ä½ç›¸è”åº¦</td><td>è®¿é—®Cacheé€Ÿåº¦å—</td><td>Cacheå¤±æ•ˆç‡é«˜</td></tr></tbody></table><h2 id="ï¼ˆ2ï¼‰æŸ¥æ‰¾æ–¹æ³•"><a href="#ï¼ˆ2ï¼‰æŸ¥æ‰¾æ–¹æ³•" class="headerlink" title="ï¼ˆ2ï¼‰æŸ¥æ‰¾æ–¹æ³•"></a>ï¼ˆ2ï¼‰æŸ¥æ‰¾æ–¹æ³•</h2><p>å‰é¢æåˆ°ï¼Œå½“CPUå‘é€å†…å­˜åœ°å€ç»™Cacheåï¼ŒCacheéœ€è¦æŸ¥æ‰¾è¯¥åœ°å€æ‰€åœ¨çš„ä¸»å­˜å—å½“å‰æ˜¯å¦åœ¨Cacheä¸­ï¼Œå¦‚æœåœ¨ï¼Œåˆ™å‘½ä¸­ï¼ˆHitï¼‰ï¼Œå¦‚æœä¸åœ¨ï¼Œåˆ™å¤±æ•ˆï¼ˆMissï¼‰ã€‚ä¸»å­˜åœ°å€è¢«åˆ†ä¸ºå—åœ°å€å’Œå—å†…ä½ç§»ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®å—åœ°å€æ¥è¿›è¡ŒæŸ¥æ‰¾ã€‚</p><p>æ— è®ºé‡‡å–å“ªç§æ˜ åƒè§„åˆ™ï¼Œå¤šä¸ªä¸»å­˜å—éƒ½å¯èƒ½æ˜ åƒåˆ°åŒä¸€ä¸ªCacheå—çš„ä½ç½®ï¼Œä¸ºäº†åŒºåˆ†å½“å‰æŸCacheå—ä½ç½®ä¿å­˜çš„æ˜¯å“ªä¸€ä¸ªä¸»å­˜å—ï¼Œå¿…é¡»è®°å½•å”¯ä¸€æ ‡è¯†æ­¤ä¸»å­˜å—çš„ä¿¡æ¯ï¼Œè®°å½•è¿™äº›ä¿¡æ¯çš„ç¡¬ä»¶ç»“æ„ç§°ä¸º<strong>ç›®å½•è¡¨</strong>ã€‚ç›®å½•è¡¨å…±æœ‰Mé¡¹ï¼Œæ¯ä¸ªç›®å½•é¡¹å¯¹åº”äºCacheä¸­çš„ä¸€ä¸ªå—ï¼Œç›®å½•é¡¹è®°å½•äº†å…¶å¯¹åº”ä¿å­˜çš„ä¸»å­˜å—çš„å—åœ°å€ä¸­é™¤äº†ç´¢å¼•æ„å¤–çš„éƒ¨åˆ†ï¼Œç§°ä¸ºæ ‡è¯†ï¼ˆtagï¼‰ï¼Œæ¯ä¸ªä¸»å­˜å—èƒ½å”¯ä¸€åœ°ç”±å…¶æ ‡è¯†æ¥ç¡®å®šã€‚æ­¤å¤–ï¼Œæ¯ä¸ªç›®å½•é¡¹è¿˜æœ‰ä¸€ä¸ªæœ‰æ•ˆä½ï¼Œç”¨ä»¥æŒ‡ç¤ºè¯¥é¡¹æ˜¯å¦æœ‰æ•ˆã€‚</p><p>å½“è¦åœ¨Cacheä¸­æŸ¥æ‰¾æŸä¸€å—æ—¶ï¼Œé¦–å…ˆæ ¹æ®ç´¢å¼•æ‰¾åˆ°å—ï¼ˆç»„ï¼‰çš„ä½ç½®ï¼Œç„¶åé€šè¿‡æŸ¥æ‰¾ç›®å½•è¡¨æ¥ç¡®å®šè¯¥å—æ˜¯å¦åœ¨è¿™äº›ä½ç½®ä¸­çš„ä¸€ä¸ªã€‚</p><p>æŸ¥æ‰¾Cacheå—çš„æ–¹æ³•åŸºæœ¬å–å†³äºCacheçš„æ˜ åƒè§„åˆ™ï¼Œä¸‹é¢åˆ†åˆ«è¿›è¡Œè®¨è®ºï¼š</p><h3 id="1-æŸ¥æ‰¾ç›´æ¥æ˜ åƒCache"><a href="#1-æŸ¥æ‰¾ç›´æ¥æ˜ åƒCache" class="headerlink" title="1. æŸ¥æ‰¾ç›´æ¥æ˜ åƒCache"></a>1. æŸ¥æ‰¾ç›´æ¥æ˜ åƒCache</h3><p>å¯¹äºç›´æ¥æ˜ åƒCacheï¼Œå…¶ä¸»å­˜å—åœ°å€è¢«åˆ†ä¸ºtagå’Œå—ç´¢å¼•ï¼Œè¯¥ä¸»å­˜å—åœ¨Cacheä¸­å…·æœ‰å”¯ä¸€ä½ç½®ã€‚å› æ­¤å½“CPUè®¿é—®è¯¥ä¸»å­˜å—æ—¶ï¼Œåˆ©ç”¨å—ç´¢å¼•æŸ¥æ‰¾åˆ°è¿™ä¸ªä½ç½®å¯¹åº”çš„å”¯ä¸€ä¸€ä¸ªç›®å½•é¡¹ï¼Œå¦‚æœä¸»å­˜åœ°å€çš„tagäºè¯¥ç›®å½•é¡¹çš„tagç›¸åŒï¼Œä¸”è¯¥ç›®å½•é¡¹æœ‰æ•ˆä½ä¸º1ï¼Œåˆ™å‘½ä¸­ï¼›å¦åˆ™å¤±æ•ˆã€‚</p><img src="/2023/10/31/Cache%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20231031163658464.png" class="" title="ç›´æ¥æ˜ åƒCacheå—åœ°å€åˆ’åˆ†"><h3 id="2-æŸ¥æ‰¾ç»„ç›¸è”Cache"><a href="#2-æŸ¥æ‰¾ç»„ç›¸è”Cache" class="headerlink" title="2. æŸ¥æ‰¾ç»„ç›¸è”Cache"></a>2. æŸ¥æ‰¾ç»„ç›¸è”Cache</h3><p>å¯¹äºç»„ç›¸è”Cacheï¼Œå…¶ä¸»å­˜åœ°å€åˆ’åˆ†ä¸ºtagå’Œç»„ç´¢å¼•ï¼Œè¯¥ä¸»å­˜å—åœ¨Cacheä¸­å…·æœ‰å”¯ä¸€ç»„åˆ«ã€‚å› æ­¤å½“CPUè®¿é—®è¯¥ä¸»å­˜å—æ—¶ï¼Œé¦–å…ˆé€šè¿‡ç»„ç´¢å¼•æ‰¾åˆ°å…·æœ‰è¯¥ç»„ç´¢å¼•çš„è‹¥å¹²ç›®å½•é¡¹ï¼Œç„¶åæ¯”è¾ƒè¿™äº›ç›®å½•é¡¹çš„tagä¸ä¸»å­˜åœ°å€çš„tagï¼Œå¦‚æœå…¶ä¸­æœ‰ä¸€ä¸ªç›®å½•é¡¹çš„tagä¸ä¸»å­˜åœ°å€tagç›¸åŒï¼Œä¸”è¯¥ç›®å½•é¡¹æœ‰æ•ˆä½ä¸º1ï¼Œåˆ™è¯¥ç›®å½•é¡¹å‘½ä¸­ï¼›å¦åˆ™å¤±æ•ˆã€‚</p><img src="/2023/10/31/Cache%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20231031163555331.png" class="" title="4è·¯ç»„ç›¸è”"><h3 id="3-æŸ¥æ‰¾å…¨ç›¸è”Cache"><a href="#3-æŸ¥æ‰¾å…¨ç›¸è”Cache" class="headerlink" title="3. æŸ¥æ‰¾å…¨ç›¸è”Cache"></a>3. æŸ¥æ‰¾å…¨ç›¸è”Cache</h3><p>å¯¹äºå…¨ç›¸è”Cacheï¼Œå…¶ä¸»å­˜å—åœ°å€å³ä¸ºtagï¼Œè¯¥ä¸»å­˜å—å¯èƒ½åœ¨Cacheçš„ä»»æ„ä½ç½®ã€‚å½“CPUè®¿é—®è¯¥ä¸»å­˜å—æ—¶ï¼Œè¯¥tagéœ€è¦ä¸Cacheä¸­æ‰€æœ‰å—å¯¹åº”çš„tagæ¯”è¾ƒï¼Œè‹¥å…¶ä¸­æœ‰ä¸€ä¸ªå—çš„tagä¸ä¸»å­˜åœ°å€çš„tagç›¸åŒï¼Œä¸”è¯¥ç›®å½•é¡¹æœ‰æ•ˆä½ä¸º1ï¼Œåˆ™è¯¥ç›®å½•é¡¹å‘½ä¸­ï¼›å¦åˆ™å¤±æ•ˆã€‚</p><img src="/2023/10/31/Cache%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20231031164639343.png" class="" title="å…¨ç›¸è”"><h2 id="ï¼ˆ3ï¼‰æ›¿æ¢ç®—æ³•"><a href="#ï¼ˆ3ï¼‰æ›¿æ¢ç®—æ³•" class="headerlink" title="ï¼ˆ3ï¼‰æ›¿æ¢ç®—æ³•"></a>ï¼ˆ3ï¼‰æ›¿æ¢ç®—æ³•</h2><p>ä¹‹å‰è¯´è¿‡ï¼Œæ— è®ºå“ªç§æ˜ åƒï¼Œéƒ½ä¼šæœ‰è¾ƒå¤šä¸»å­˜å—å…±äº«ä¸€ä¸ªï¼ˆæˆ–ä¸€ç»„ï¼‰Cacheå—çš„ä½ç½®çš„æƒ…å†µï¼Œæ‰€ä»¥å½“ä¸€ä¸ªå—è¦ä»ä¸»å­˜è°ƒå…¥Cacheæ—¶ã€‚å¯èƒ½ä¼šå‡ºç°è¯¥å—æ‰€æ˜ åƒçš„ä¸€ä¸ªï¼ˆæˆ–ä¸€ç»„ï¼‰Cacheå—ä½ç½®å·²ç»å…¨éƒ¨è¢«å ç”¨çš„æƒ…å†µã€‚è¿™æ˜¯éœ€è¦é€šè¿‡æ›¿æ¢ç®—æ³•é€‰æ‹©ä¸€ä¸ªå—ä½ç½®æ¥å­˜æ”¾è¿™ä¸ªæ–°è°ƒå…¥çš„å—ï¼Œæ›¿æ¢æ‰è¿™ä¸ªä½ç½®åŸæ¥çš„å—ã€‚</p><ul><li>å¯¹äºç›´æ¥æ˜ åƒCacheï¼Œæ¯ä¸ªå†…å­˜å—åªæ˜ åƒåˆ°ä¸€ä¸ªCacheå—ä½ç½®ï¼Œå› æ­¤å¿…å®šæ˜¯åŸæ¥åœ¨è¯¥ä½ç½®çš„å—è¢«æ›¿æ¢ï¼Œä¸å­˜åœ¨æ›¿æ¢ç­–ç•¥ã€‚</li><li>å¯¹äºç»„ç›¸è”å’Œå…¨ç›¸è”Cacheï¼Œæ¯ä¸ªå†…å­˜å—æ˜ åƒåˆ°ä¸€ç»„æˆ–å…¨éƒ¨Cacheå—ï¼Œæœ‰å¤šä¸ªCacheå—å¯èƒ½è¢«é€‰æ‹©æ›¿æ¢æ‰ï¼Œåˆ™å°±éœ€è¦ä½¿ç”¨åˆç†çš„æ›¿æ¢ç­–ç•¥ï¼Œä»¥<strong>è¾¾åˆ°å°½å¯èƒ½é¿å…æ›¿æ¢æ‰é©¬ä¸Šå°±è¦ç”¨çš„Cacheå—çš„ç›®çš„</strong>ã€‚</li></ul><p>ä¸»è¦çš„æ›¿æ¢ç®—æ³•æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p><h4 id="1-éšæœºæ³•"><a href="#1-éšæœºæ³•" class="headerlink" title="1. éšæœºæ³•"></a>1. éšæœºæ³•</h4><p>é¡¾åæ€ä¹‰ï¼Œéšæœºæ³•åœ¨å¯èƒ½è¢«æ›¿æ¢çš„Cacheå—ä¸­éšæœºåœ°é€‰æ‹©ï¼Œ<u>ä»¥ä¾¿å‡åŒ€ä½¿ç”¨ä¸€ç»„ä¸­çš„å„ä¸ªå—</u></p><h4 id="2-å…ˆè¿›å…ˆå‡ºæ³•"><a href="#2-å…ˆè¿›å…ˆå‡ºæ³•" class="headerlink" title="2. å…ˆè¿›å…ˆå‡ºæ³•"></a>2. å…ˆè¿›å…ˆå‡ºæ³•</h4><p>å…ˆè¿›å…ˆå‡ºæ³•ï¼ˆFirst In First Out, FIFOï¼‰é€‰æ‹©æœ€æ—©è°ƒå…¥åœ°å—ä½œä¸ºè¢«æ›¿æ¢çš„å—ã€‚å…¶å¾ˆå®¹æ˜“å®ç°ï¼Œä½†<u>ä¸å±€éƒ¨æ€§åŸç†ç›¸å·¦</u>ï¼Œå› ä¸ºæœ€å…ˆè¿›å…¥çš„å—å¾ˆå¯èƒ½é©¬ä¸Šå°±è¦å†æ¬¡ä½¿ç”¨ã€‚</p><h4 id="3-æœ€è¿‘æœ€å°‘ä½¿ç”¨æ³•"><a href="#3-æœ€è¿‘æœ€å°‘ä½¿ç”¨æ³•" class="headerlink" title="3. æœ€è¿‘æœ€å°‘ä½¿ç”¨æ³•"></a>3. æœ€è¿‘æœ€å°‘ä½¿ç”¨æ³•</h4><p>æœ€è¿‘æœ€å°‘ä½¿ç”¨æ³•ï¼ˆLeast Recently Used, LRUï¼‰é€‰æ‹©è¿‘æœŸæœ€ä¹…æ²¡æœ‰è¢«è®¿é—®è¿‡çš„å—ä½œä¸ºè¢«æ›¿æ¢çš„å—ï¼Œå®ƒæ‰€ä¾æ®çš„æ˜¯<u>å±€éƒ¨æ€§åŸç†çš„æ¨è®ºï¼šå¦‚æœæœ€è¿‘åˆšä½¿ç”¨çš„å—å¾ˆå¯èƒ½å°±æ˜¯é©¬ä¸Šè¦å†ç”¨åˆ°çš„å—ï¼Œé‚£ä¹ˆæœ€ä¹…æ²¡æœ‰è¢«ç”¨è¿‡çš„å—å°±æ˜¯æœ€ä¸å¯èƒ½å†è¢«ç”¨åˆ°çš„å—</u></p><h4 id="4-æœ€ä¸å¸¸ä½¿ç”¨æ³•"><a href="#4-æœ€ä¸å¸¸ä½¿ç”¨æ³•" class="headerlink" title="4. æœ€ä¸å¸¸ä½¿ç”¨æ³•"></a>4. æœ€ä¸å¸¸ä½¿ç”¨æ³•</h4><p>æœ€ä¸å¸¸ä½¿ç”¨æ³•ï¼ˆLeast Frequently Used, LFUï¼‰é€‰æ‹©è¿‡å»ä¸€ä¸ªæ—¶é—´æ®µå†…è®¿é—®æ¬¡æ•°æœ€å°‘çš„æ•°æ®å—ï¼Œæ˜¯<u>æœ€ç¬¦åˆå±€éƒ¨æ€§åŸç†çš„ç®—æ³•</u>ï¼Œä½†è¿™ç§ç®—æ³•éœ€è¦è®°å½•ä¸€æ®µæ—¶é—´å†…å„å—è¢«è®¿é—®çš„æ¬¡æ•°ï¼Œå®ç°èµ·æ¥ä»£ä»·å¾ˆå¤§ã€‚</p><h2 id="ï¼ˆ4ï¼‰å†™ç­–ç•¥"><a href="#ï¼ˆ4ï¼‰å†™ç­–ç•¥" class="headerlink" title="ï¼ˆ4ï¼‰å†™ç­–ç•¥"></a>ï¼ˆ4ï¼‰å†™ç­–ç•¥</h2><p>ç›¸è¾ƒäºè¯»æ“ä½œï¼Œå†™æ“ä½œæ˜¾ç„¶æ›´ä¸ºå¤æ‚ï¼Œå› ä¸ºå†™ä¼šæ›´æ–°æ•°æ®ï¼Œæ”¹å˜Cacheä¸­æ•°æ®çš„çŠ¶æ€ï¼Œè€Œè¯»ä¸ä¼šã€‚å†™ç­–ç•¥éœ€è¦è§£å†³ä»¥ä¸‹ä¸¤ä¸ªé—®é¢˜ï¼š</p><p>å¦‚æœè¢«å†™çš„å—ä¸åœ¨Cacheä¸­ï¼ˆå†™å¤±æ•ˆï¼‰ï¼Œåº”è¯¥æ€æ ·æ›´æ–°ï¼Ÿ</p><p>å¦‚æœè¢«å†™çš„å—åœ¨Cacheä¸­ï¼ˆå†™å‘½ä¸­ï¼‰ï¼Œåº”è¯¥åªæ›´æ–°Cacheï¼Œè¿˜æ˜¯åŒæ—¶æ›´æ–°ä¸»å­˜ä¸­çš„å†…å®¹ï¼Ÿ</p><h3 id="1-å¯¹äºå†™å¤±æ•ˆæƒ…å†µï¼Œå¯ä»¥é€‰æ‹©æ˜¯å¦å°†å“åº”çš„å—è°ƒå…¥Cache"><a href="#1-å¯¹äºå†™å¤±æ•ˆæƒ…å†µï¼Œå¯ä»¥é€‰æ‹©æ˜¯å¦å°†å“åº”çš„å—è°ƒå…¥Cache" class="headerlink" title="1. å¯¹äºå†™å¤±æ•ˆæƒ…å†µï¼Œå¯ä»¥é€‰æ‹©æ˜¯å¦å°†å“åº”çš„å—è°ƒå…¥Cache"></a>1. å¯¹äºå†™å¤±æ•ˆæƒ…å†µï¼Œå¯ä»¥é€‰æ‹©æ˜¯å¦å°†å“åº”çš„å—è°ƒå…¥Cache</h3><ul><li><p><strong>æŒ‰å†™åˆ†é…ï¼ˆWrite Allocateï¼‰</strong>ï¼šå…ˆæŠŠéœ€è¦å†™çš„å—ä»å†…å­˜è°ƒå…¥Cacheï¼Œç„¶åå†è¿›è¡Œå†™æ“ä½œã€‚</p></li><li><p><strong>ä¸æŒ‰å†™åˆ†é…ï¼ˆNo Write Allocateï¼‰</strong>ï¼šç›´æ¥å†™å…¥å†…å­˜ã€‚ä¹Ÿç§°ä¸º<strong>ç»•å†™ï¼ˆWrite Aroundï¼‰</strong>ã€‚</p></li></ul><blockquote><p>Asideï¼šç†è§£è¯»&#x2F;å†™å¤±æ•ˆ</p><p>å¯¹äºè¯»å¤±æ•ˆå’ŒæŒ‰å†™åˆ†é…å†™å¤±æ•ˆï¼Œå¯ä»¥å°†å¤±æ•ˆåˆ†ä¸ºä¸¤ä¸ªè¿‡ç¨‹ï¼š</p><ol><li>ä»å†…å­˜ä¸­å°†æ•°æ®å—å‘é€åˆ°CacheæŒ‡å®šä½ç½®</li><li>å†æ¬¡å°è¯•è¯»&#x2F;å†™ï¼Œè¿™æ¬¡å¿…å®šæœ‰æ•ˆ</li></ol></blockquote><h3 id="2-å¯¹äºå†™å‘½ä¸­æˆ–å†™å¤±æ•ˆæ—¶æŒ‰å†™åˆ†é…ï¼Œæœ‰ä¸¤ç§ç­–ç•¥æ¥ç»´æŠ¤Cacheä¸ä¸»å­˜çš„ä¸€è‡´æ€§"><a href="#2-å¯¹äºå†™å‘½ä¸­æˆ–å†™å¤±æ•ˆæ—¶æŒ‰å†™åˆ†é…ï¼Œæœ‰ä¸¤ç§ç­–ç•¥æ¥ç»´æŠ¤Cacheä¸ä¸»å­˜çš„ä¸€è‡´æ€§" class="headerlink" title="2. å¯¹äºå†™å‘½ä¸­æˆ–å†™å¤±æ•ˆæ—¶æŒ‰å†™åˆ†é…ï¼Œæœ‰ä¸¤ç§ç­–ç•¥æ¥ç»´æŠ¤Cacheä¸ä¸»å­˜çš„ä¸€è‡´æ€§"></a>2. å¯¹äºå†™å‘½ä¸­æˆ–å†™å¤±æ•ˆæ—¶æŒ‰å†™åˆ†é…ï¼Œæœ‰ä¸¤ç§ç­–ç•¥æ¥ç»´æŠ¤Cacheä¸ä¸»å­˜çš„ä¸€è‡´æ€§</h3><ul><li><p><strong>å†™ç›´è¾¾ï¼ˆWrite Throughï¼‰</strong>ï¼šæŠŠæ•°æ®å†™å…¥Cacheä¸­ç›¸åº”çš„å—ï¼ŒåŒæ—¶ä¹Ÿå†™å…¥ä¸»å­˜ä¸­ç›¸åº”çš„å—ã€‚ä¹Ÿç§°ä¸º<strong>å†™ç©¿é€</strong>ã€‚</p></li><li><p><strong>å†™å›ï¼ˆWrite Backï¼‰</strong>ï¼šåªæŠŠæ•°æ®å†™å…¥Cacheä¸­ç›¸åº”çš„å—ï¼Œåªæœ‰åé¢åœ¨è¯¥å—è¢«æ›¿æ¢æ—¶ï¼Œæ‰ä¼šå†™å›å†…å­˜ã€‚</p></li><li><p>æŒ‰å†™åˆ†é…é€šå¸¸ä¸å†™å›æ­é…ï¼›ä¸æŒ‰å†™åˆ†é…é€šå¸¸ä¸å†™ç›´è¾¾æ­é…ã€‚</p></li><li><p>åœ¨å†™å›æ³•ä¸­ï¼Œä¸ºäº†å‡å°‘åœ¨æ›¿æ¢æ—¶å—çš„å†™å›ï¼Œå¸¸é‡‡ç”¨â€œè„ä½â€æ ‡å¿—ï¼Œå³ä¸ºæ¯ä¸ªCacheä¸­çš„å—è®¾ç½®ä¸€ä¸ªè„ä½ï¼ˆdirtyï¼‰ã€‚å½“è¯¥å—ç¬¬ä¸€æ¬¡è¢«æ”¹å†™æ—¶ï¼Œè¯¥å—çš„è„ä½å°±ä¼šç½®ä¸º1ï¼Œè¡¨ç¤ºè¿™ä¸ªCacheå—æ›¾ç»è¢«ä¿®æ”¹è¿‡ï¼Œå¦‚æœä¹‹åå†æ¬¡è¢«æ”¹å†™ï¼Œè„ä½ä»ä¸º1ï¼Œå¦‚æœè¯¥å—éœ€è¦è¢«æ›¿æ¢å›å†…å­˜ï¼Œåˆ™éœ€è¦å°†è¯¥å—å†™å›å†…å­˜çš„å¯¹åº”å—ä¸­ã€‚åä¹‹ï¼Œè‹¥è¯¥å—ä¸€æ¬¡éƒ½æ²¡æœ‰è¢«æ”¹å†™ï¼Œåˆ™ä¸éœ€è¦å†™å›å†…å­˜ã€‚</p></li><li><p>å†™å›ä¸å†™ç›´è¾¾æ¯”è¾ƒ</p><table><thead><tr><th></th><th>ä¼˜ç‚¹</th></tr></thead><tbody><tr><td>å†™å›</td><td>1. <strong>é€Ÿåº¦å¿«</strong>ã€‚å†™æ“ä½œèƒ½ä»¥Cacheçš„é€Ÿåº¦è¿›è¡Œ       2. <strong>ä½¿ç”¨å­˜å‚¨å™¨å¸¦å®½å°</strong>ã€‚å¤šæ¬¡å†™åªéœ€æ›´æ–°ä¸€æ¬¡</td></tr><tr><td>å†™ç›´è¾¾</td><td>1. <strong>å®ç°ç®€å•</strong>  2. <strong>ç®€åŒ–äº†æ•°æ®ä¸€è‡´æ€§é—®é¢˜</strong>ã€‚å†…å­˜ä¸­çš„æ•°æ®æ€»æ˜¯æœ€æ–°çš„</td></tr></tbody></table></li><li><p>åœ¨è¿›è¡Œå†™ç›´è¾¾æ—¶ï¼Œè‹¥å†™æ“ä½œä¸­CPUå¿…é¡»ç­‰å¾…æ•°æ®å†™å…¥å†…å­˜ï¼Œåˆ™ç§°CPU<strong>å†™åœé¡¿ï¼ˆWrite Stallï¼‰</strong>ï¼Œé€ æˆæ€§èƒ½å¤§é‡æŸå¤±ã€‚ä¸ºäº†ç¼“è§£è¯¥é—®é¢˜ï¼Œå¯é‡‡ç”¨<strong>å†™ç¼“å†²å™¨ï¼ˆWrite Bufferï¼‰</strong>æ¥å‡å°‘å†™åœé¡¿çš„æ—¶é—´ï¼Œå†™è®¿é—®æ•°æ®ä¸€æ—¦è¿›å…¥è¯¥ç¼“å†²å™¨ï¼ŒCPUå°±å¯ä»¥ç»§ç»­æ‰§è¡Œï¼Œä»è€Œå®ç°å»¶è¿Ÿéšè—ã€‚</p></li></ul><h1 id="å››ã€Cacheæ€§èƒ½åˆ†æ"><a href="#å››ã€Cacheæ€§èƒ½åˆ†æ" class="headerlink" title="å››ã€Cacheæ€§èƒ½åˆ†æ"></a>å››ã€Cacheæ€§èƒ½åˆ†æ</h1><h1 id="äº”ã€æ”¹è¿›Cacheæ€§èƒ½"><a href="#äº”ã€æ”¹è¿›Cacheæ€§èƒ½" class="headerlink" title="äº”ã€æ”¹è¿›Cacheæ€§èƒ½"></a>äº”ã€æ”¹è¿›Cacheæ€§èƒ½</h1><p>æ ¹æ®å…¬å¼ï¼š<br>$$<br>å¹³å‡è®¿å­˜æ—¶é—´ &#x3D; å‘½ä¸­æ—¶é—´ + å¤±æ•ˆç‡ * å¤±æ•ˆå¼€é”€<br>$$<br>å¯ä»¥ä»ä»¥ä¸‹ä¸‰ä¸ªæ–¹é¢æ”¹è¿›Cacheçš„æ€§èƒ½</p><p>ï¼ˆ1ï¼‰é™ä½å¤±æ•ˆç‡</p><p>ï¼ˆ2ï¼‰å‡å°‘å¤±æ•ˆå¼€é”€</p><p>ï¼ˆ3ï¼‰å‡å°‘Cacheå‘½ä¸­æ—¶é—´</p><p>ä¸‹é¢å°†æŒ‰è¿™ä¸‰ä¸ªæ–¹é¢ä»‹ç»17ç§Cacheä¼˜åŒ–æŠ€æœ¯</p><h2 id="é™ä½å¤±æ•ˆç‡"><a href="#é™ä½å¤±æ•ˆç‡" class="headerlink" title="é™ä½å¤±æ•ˆç‡"></a>é™ä½å¤±æ•ˆç‡</h2><h2 id="å‡å°‘å¤±æ•ˆå¼€é”€"><a href="#å‡å°‘å¤±æ•ˆå¼€é”€" class="headerlink" title="å‡å°‘å¤±æ•ˆå¼€é”€"></a>å‡å°‘å¤±æ•ˆå¼€é”€</h2><h2 id="å‡å°‘Cacheå‘½ä¸­æ—¶é—´"><a href="#å‡å°‘Cacheå‘½ä¸­æ—¶é—´" class="headerlink" title="å‡å°‘Cacheå‘½ä¸­æ—¶é—´"></a>å‡å°‘Cacheå‘½ä¸­æ—¶é—´</h2>]]></content>
      
      
      
        <tags>
            
            <tag> Cache </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gem5æ¨¡æ‹Ÿå™¨å­¦ä¹ ï¼ˆå››ï¼‰</title>
      <link href="/2023/10/30/Gem5%E6%A8%A1%E6%8B%9F%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E5%9B%9B%EF%BC%89/"/>
      <url>/2023/10/30/Gem5%E6%A8%A1%E6%8B%9F%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E5%9B%9B%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>æœ¬æ–‡æ˜¯å®˜ç½‘æ•™ç¨‹<a href="https://www.gem5.org/documentation/learning_gem5/part2/memoryobject/">gem5: Creating SimObjects in the memory system</a>çš„å­¦ä¹ ç¬”è®°ã€‚</p><p>æœ¬èŠ‚æ•™ç¨‹æ˜¯åˆ›å»ºä¸€ä¸ªä½äºCPUå’Œå†…å­˜æ€»çº¿ä¹‹é—´çš„é˜»å¡å¼ç®€å•å†…å­˜å¯¹è±¡ï¼Œä¸»è¦å®ç°äº†åŸºæœ¬è¯·æ±‚çš„ä¼ é€’ã€‚åœ¨ä¸‹ä¸€èŠ‚æ•™ç¨‹ä¸­ï¼Œä¼šåœ¨æœ¬èŠ‚åˆ›å»ºçš„ç®€å•å†…å­˜å¯¹è±¡ä¹‹ä¸Šå¢åŠ éƒ¨åˆ†é€»è¾‘ï¼Œä½¿å…¶æˆä¸ºä¸€ä¸ªéå¸¸ç®€å•çš„é˜»å¡å•å¤„ç†å™¨ç¼“å­˜ã€‚ä¸‹å›¾æ˜¯æ•´ä¸ªç³»ç»Ÿçš„ç¤ºæ„å›¾ï¼Œå…¶ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºçš„å†…å­˜å¯¹è±¡æœ‰ä¸¤ä¸ªCPUä¾§çš„ä»ç«¯å£ï¼ˆslave portï¼‰å’Œä¸€ä¸ªå†…å­˜æ€»çº¿ä¾§çš„ä¸»ç«¯å£ï¼ˆmaster portï¼‰ã€‚å®ƒå°†å®ç°å°†è¯·æ±‚ä»CPUä¼ é€’åˆ°å†…å­˜æ€»çº¿ï¼Œå¹¶å°†å“åº”ä»å†…å­˜æ€»çº¿ä¼ é€’åˆ°CPUã€‚</p><span id="more"></span><img src="/2023/10/30/Gem5%E6%A8%A1%E6%8B%9F%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E5%9B%9B%EF%BC%89/simple_memobj.png" class="" title="System with a simple memory object which sits between a CPU and the memory bus."><h1 id="ä¸€ã€ä¸»ä»ç«¯å£"><a href="#ä¸€ã€ä¸»ä»ç«¯å£" class="headerlink" title="ä¸€ã€ä¸»ä»ç«¯å£"></a>ä¸€ã€ä¸»ä»ç«¯å£</h1><p>ä¸»ç«¯å£ï¼ˆmaster portï¼‰å’Œä»ç«¯å£ï¼ˆslave portï¼‰æ˜¯æ¨¡æ‹Ÿå™¨ä¸­åˆ›é€ çš„æ¦‚å¿µï¼Œç”¨äºæè¿°è®¡ç®—æœºç³»ç»Ÿä¸­ä¸åŒç»„ä»¶ä¹‹é—´çš„æ•°æ®ä¼ è¾“å…³ç³»ã€‚åœ¨æ¨¡æ‹Ÿå™¨ä¸­ç”¨äºè¿æ¥è®¡ç®—æœºç³»ç»Ÿä¸­çš„å„ç§ç»„ä»¶ã€‚å…¶ä¸­ï¼Œ<strong>ä¸»ç«¯å£è´Ÿè´£å‘é€è¯·æ±‚ï¼ˆsend reqï¼‰ã€æ¥æ”¶å“åº”ï¼ˆrecv respï¼‰</strong>ï¼›<strong>ä»ç«¯å£è´Ÿè´£æ¥å—è¯·æ±‚ï¼ˆrecv reqï¼‰ã€å‘é€å“åº”ï¼ˆsend respï¼‰</strong>ï¼Œå› æ­¤ï¼Œ<u>ä¸»ä»ç«¯å£å¿…é¡»é…å¯¹ä½¿ç”¨</u>ã€‚</p><p>ä»¥æœ¬æ¨¡æ‹Ÿç³»ç»Ÿä¸ºä¾‹ï¼Œmemory objectæœ‰ä¸¤ä¸ªCPUä¾§çš„ä»ç«¯å£ï¼Œç”¨äºæ¥æ”¶CPUçš„è¯·æ±‚ï¼Œå¹¶å‘å…¶è¿”å›å“åº”ï¼›åŒæ—¶æœ‰ä¸€ä¸ªmem busä¾§çš„ä¸»æ¥å£ï¼Œç”¨äºå‘mem buså‘é€è¯·æ±‚ï¼Œå¹¶æ¥æ”¶å…¶å“åº”ã€‚</p><p>è¿™äº›ç«¯å£å®ç°ä¸‰ç§ä¸åŒçš„å­˜å‚¨ç³»ç»Ÿæ¨¡å¼ï¼š</p><ul><li>å®šæ—¶æ¨¡å¼ï¼ˆtiming modeï¼‰ã€‚å”¯ä¸€çš„äº§ç”Ÿæ­£ç¡®æ¨¡æ‹Ÿç»“æœçš„æ¨¡å¼ï¼Œæœ€å¸¸ç”¨ã€‚</li><li>åŸå­æ¨¡å¼ï¼ˆatomic modeï¼‰ã€‚</li><li>åŠŸèƒ½æ¨¡å¼ï¼ˆfunctional modeï¼‰ã€‚</li></ul><p>å…¶ä»–æ¨¡å¼æš‚æ—¶ä¸æ‡‚ã€‚ã€‚ã€‚</p><p>ä¸‰ç§è®¿å­˜æ¨¡å¼ä»‹ç»<a href="https://blog.csdn.net/qq_45726331/article/details/129651724">ã€Gem5ã€‘gem5æ¨¡æ‹Ÿå™¨ä¸­ä¸‰ç§è®¿å­˜æ¨¡å¼Atomicã€Timingã€Functionalçš„æ€»ç»“å¯¹æ¯”_ç©ºç©º7çš„åšå®¢-CSDNåšå®¢</a></p><h1 id="äºŒã€æ•°æ®åŒ…"><a href="#äºŒã€æ•°æ®åŒ…" class="headerlink" title="äºŒã€æ•°æ®åŒ…"></a>äºŒã€æ•°æ®åŒ…</h1><p>åœ¨gem5ä¸­ï¼Œ<strong>ç«¯å£é€šè¿‡å‘é€æ•°æ®åŒ…ï¼ˆpacketï¼‰å®ç°äº¤äº’</strong>ã€‚æ•°æ®åŒ…ç”±MemReqç»„æˆï¼ŒMemReqæ˜¯å†…å­˜è¯·æ±‚å¯¹è±¡ã€‚MemReqä¿å­˜åˆå§‹åŒ–åŒ…çš„åŸå§‹è¯·æ±‚çš„ä¿¡æ¯ï¼Œä¾‹å¦‚è¯·æ±‚è€…ã€åœ°å€å’Œè¯·æ±‚ç±»å‹ï¼ˆè¯»ã€å†™ç­‰ï¼‰ã€‚æ•°æ®åŒ…è¿˜æœ‰ä¸€ä¸ªMemCmdï¼Œå®ƒæ˜¯æ•°æ®åŒ…çš„å½“å‰å‘½ä»¤ã€‚æ­¤å‘½ä»¤å¯ä»¥åœ¨æ•°æ®åŒ…çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­æ”¹å˜ï¼ˆä¾‹å¦‚ï¼Œä¸€æ—¦æ»¡è¶³å†…å­˜å‘½ä»¤ï¼Œè¯·æ±‚å°±å˜æˆå“åº”ï¼‰ã€‚æœ€å¸¸è§çš„MemCmdæ˜¯ReadReqï¼ˆè¯»è¯·æ±‚ï¼‰ã€ReadRespï¼ˆè¯»å“åº”ï¼‰ã€WriteReqï¼ˆå†™è¯·æ±‚ï¼‰ã€WriteRespï¼ˆå†™å“åº”ï¼‰ã€‚è¿˜æœ‰ç¼“å­˜å’Œè®¸å¤šå…¶ä»–å‘½ä»¤ç±»å‹çš„å†™å›è¯·æ±‚ï¼ˆWritebackDirtyã€WritebackCleanï¼‰</p><h1 id="ä¸‰ã€ä¸»ä»äº¤äº’"><a href="#ä¸‰ã€ä¸»ä»äº¤äº’" class="headerlink" title="ä¸‰ã€ä¸»ä»äº¤äº’"></a>ä¸‰ã€ä¸»ä»äº¤äº’</h1><p>åœ¨å®šæ—¶æ¨¡å¼ä¸‹ï¼Œä¸»ä»ç«¯å£çš„äº¤äº’æœ‰ä»¥ä¸‹ä¸‰ç§æƒ…å†µï¼Œéœ€è¦ç†æ¸…å…¶å‡½æ•°è°ƒç”¨é“¾</p><h2 id="ï¼ˆ1ï¼‰æ­£å¸¸æƒ…å†µä¸‹çš„ä¸»ä»äº¤äº’"><a href="#ï¼ˆ1ï¼‰æ­£å¸¸æƒ…å†µä¸‹çš„ä¸»ä»äº¤äº’" class="headerlink" title="ï¼ˆ1ï¼‰æ­£å¸¸æƒ…å†µä¸‹çš„ä¸»ä»äº¤äº’"></a>ï¼ˆ1ï¼‰æ­£å¸¸æƒ…å†µä¸‹çš„ä¸»ä»äº¤äº’</h2><p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œä¸»æœºé€šè¿‡è°ƒç”¨sendTimingReqå‡½æ•°å‘é€è¯·æ±‚ï¼Œä»æœºçš„recvTimingReqå‡½æ•°ä¹Ÿéšä¹‹è¢«è°ƒç”¨ï¼Œå¦‚æœä»æœºç›®å‰å¯ä»¥æ¥å—æ­¤è¯·æ±‚ï¼Œåˆ™è¿”å›trueï¼Œè¡¨ç¤ºä»æœºå·²ç»æ¥å—æ­¤æ¬¡è¯·æ±‚ã€‚ä»æœºæ¥å—è¯·æ±‚åéšå³å¼€å§‹å¤„ç†æ­¤è¯·æ±‚ã€‚</p><p>ä»æœºå¤„ç†å®Œè¯·æ±‚åï¼Œé€šè¿‡è°ƒç”¨sendTimingRespå‡½æ•°å‘é€æ­¤æ¬¡è¯·æ±‚çš„å“åº”ï¼Œç±»ä¼¼åœ°ï¼Œä¸»æœºçš„recvTimingRespå‡½æ•°éšä¹‹è¢«è°ƒç”¨ï¼Œå¦‚æœä¸»æœºç›®å‰å¯ä»¥æ¥å—æ­¤å“åº”ï¼Œåˆ™è¿”å›trueï¼Œè¡¨ç¤ºä¸»æœºå·²ç»æ¥å—äº†æ­¤æ¬¡å“åº”ã€‚äº¤äº’ç»“æŸã€‚</p><img src="/2023/10/30/Gem5%E6%A8%A1%E6%8B%9F%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E5%9B%9B%EF%BC%89/master_slave_1.png" class="" title="Simple master-slave interaction when both can accept the request and the response."><h2 id="ï¼ˆ2ï¼‰ä»æœºå¿™æ—¶çš„ä¸»ä»äº¤äº’"><a href="#ï¼ˆ2ï¼‰ä»æœºå¿™æ—¶çš„ä¸»ä»äº¤äº’" class="headerlink" title="ï¼ˆ2ï¼‰ä»æœºå¿™æ—¶çš„ä¸»ä»äº¤äº’"></a>ï¼ˆ2ï¼‰ä»æœºå¿™æ—¶çš„ä¸»ä»äº¤äº’</h2><p>ä»¥ä¸Šæƒ…å†µæ˜¯ä¸»ä»éƒ½é¡ºåˆ©æ¥æ”¶çš„ç†æƒ³æƒ…å†µï¼Œä½†å½“ä»æœºæ¥å—è¯·æ±‚æˆ–ä¸»æœºæ¥å—å“åº”æ—¶ï¼Œå®ƒä»¬å¯èƒ½æ­£å¿™ã€‚</p><p>ä¸‹é¢å°±æ˜¯ä»æœºå¿™æ—¶ä¸»ä»äº¤äº’çš„è¿‡ç¨‹ã€‚</p><p>ä»æœºå¿™æ—¶ï¼Œä»æœºæ— æ³•æ¥å—ä¸»æœºå‘é€çš„è¯·æ±‚ï¼Œå› æ­¤recvTimingReqå‡½æ•°è¿”å›falseï¼Œæ‹’ç»æ¥å—æ­¤æ¬¡è¯·æ±‚ã€‚ä½†å½“ä»æœºç»“æŸå¿™æ€åï¼Œä¼šé€šè¿‡è°ƒç”¨sendReqRetryå‡½æ•°é€šçŸ¥ä¸»æœºï¼Œâ€œé‚€è¯·â€ä¸»æœºå†æ¬¡é‡è¯•å‘é€è¯·æ±‚ï¼Œä¸»æœºé€šè¿‡recvReqRetryå‡½æ•°æ¥æ”¶é‡è¯•é€šçŸ¥åï¼Œéšæœºå†æ¬¡å‘èµ·æ–°çš„è¯·æ±‚ã€‚å½“ç„¶ï¼Œæ–°è¯·æ±‚ä¹Ÿå¯èƒ½å†æ¬¡å› ä¸ºä»æœºå¿™è€Œè¢«æ‹’ç»ã€‚</p><img src="/2023/10/30/Gem5%E6%A8%A1%E6%8B%9F%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E5%9B%9B%EF%BC%89/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzMzgxMTM1,size_16,color_FFFFFF,t_70.png" class="" title="äº¤äº’"><h2 id="ï¼ˆ3ï¼‰ä¸»æœºå¿™æ—¶çš„ä¸»ä»äº¤äº’"><a href="#ï¼ˆ3ï¼‰ä¸»æœºå¿™æ—¶çš„ä¸»ä»äº¤äº’" class="headerlink" title="ï¼ˆ3ï¼‰ä¸»æœºå¿™æ—¶çš„ä¸»ä»äº¤äº’"></a>ï¼ˆ3ï¼‰ä¸»æœºå¿™æ—¶çš„ä¸»ä»äº¤äº’</h2><p>ç±»ä¼¼åœ°ï¼Œåœ¨ä¸»æœºå¿™æ—¶ï¼Œä¸»æœºæ— æ³•æ¥æ”¶ä»æœºå‘é€çš„å“åº”ï¼Œå› æ­¤recvTimingRespå‡½æ•°è¿”å›falseï¼Œæ‹’ç»æ¥æ”¶æ­¤æ¬¡å“åº”ã€‚ä½†å½“ä¸»æœºç»“æŸå¿™æ€åï¼Œä¼šé€šè¿‡è°ƒç”¨sendRespRetryå‡½æ•°é€šçŸ¥ä»æœºï¼Œâ€œé‚€è¯·â€ä»æœºå†æ¬¡é‡è¯•å‘é€å“åº”ï¼Œä»æœºé€šè¿‡recvRespRetryå‡½æ•°æ¥æ”¶é‡è¯•é€šçŸ¥åï¼Œéšæœºå†æ¬¡å‘èµ·æ–°çš„å“åº”ã€‚</p><img src="/2023/10/30/Gem5%E6%A8%A1%E6%8B%9F%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E5%9B%9B%EF%BC%89/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzMzgxMTM1,size_16,color_FFFFFF,t_70-169863203577313.png" class="" title="äº¤äº’"><h1 id="å››ã€SimpleMemobjä¸»ä»ç«¯å£å‡½æ•°å®ç°"><a href="#å››ã€SimpleMemobjä¸»ä»ç«¯å£å‡½æ•°å®ç°" class="headerlink" title="å››ã€SimpleMemobjä¸»ä»ç«¯å£å‡½æ•°å®ç°"></a>å››ã€SimpleMemobjä¸»ä»ç«¯å£å‡½æ•°å®ç°</h1><p>åœ¨æœ¬èŠ‚çš„ç®€å•å†…å­˜å¯¹è±¡ï¼ˆSimpleMemobjï¼‰ä¸‹å®šä¹‰äº†ä¸¤ä¸ªåµŒå¥—ç±»CPUSidePortå’ŒMemSidePortï¼Œå®ƒä»¬åˆ†åˆ«ç»§æ‰¿è‡ªResponsePort&#x2F;SlavePortå’ŒRequstPort&#x2F;MasterPortï¼Œå³ä»ç«¯å£å’Œä¸»ç«¯å£ã€‚</p><ul><li>SimpleMemobjç±»çš„æˆå‘˜å˜é‡<ul><li><strong>CPUä¾§ä»ç«¯å£</strong>  CPUSidePort instPort; CPUSidePort dataPort;</li><li><strong>å†…å­˜æ€»çº¿ä¾§ä¸»ç«¯å£</strong>  MemSidePort memPort; </li><li><strong>é˜»å¡æ ‡å¿—</strong> ç›®å‰æ˜¯å¦æ­£åœ¨é˜»å¡ç­‰å¾…ä¸€ä¸ªå“åº” bool blocked;</li></ul></li><li>CPUSidePortç±»çš„æˆå‘˜å˜é‡<ul><li><strong>çˆ¶å¯¹è±¡æŒ‡é’ˆï¼ˆå³SimpleMemobjå¯¹è±¡ï¼‰</strong> SimpleMemobj *owner;</li><li><strong>æ˜¯å¦éœ€è¦é‡å‘</strong> CPUè¯•å›¾å‘é€è¯·æ±‚ç»™ç«¯å£ï¼Œä½†è¢«æ‹’ç»çš„æƒ…å†µä¸‹ï¼Œéœ€è¦è®°å½•ä¸€ä¸‹å­˜åœ¨è¿™ç§æƒ…å†µï¼Œç«¯å£åœ¨ç»“æŸå¿™æ€åä¼šé€šçŸ¥CPUé‡å‘ã€‚bool needRetry;</li><li><strong>è¢«é˜»å¡çš„æ•°æ®åŒ…æŒ‡é’ˆ</strong> è¯¥ç«¯å£è¯•å›¾ç»™CPUå‘é€å“åº”ï¼Œä½†è¢«CPUæ‹’ç»ï¼Œéœ€è¦æš‚å­˜è¿™ä¸ªæ•°æ®åŒ…ã€‚PacketPtr blockedPacket;</li></ul></li><li>MemSidePortç±»çš„æˆå‘˜å˜é‡<ul><li><strong>çˆ¶å¯¹è±¡æŒ‡é’ˆï¼ˆå³SimpleMemobjå¯¹è±¡ï¼‰</strong> SimpleMemobj *owner;</li><li><strong>è¢«é˜»å¡çš„æ•°æ®åŒ…æŒ‡é’ˆ</strong> è¯¥ç«¯å£è¯•å›¾ç»™ä¸»å­˜å‘é€è¯·æ±‚ï¼Œä½†è¢«ä¸»å­˜æ‹’ç»ï¼Œéœ€è¦æš‚å­˜è¿™ä¸ªæ•°æ®åŒ…ã€‚PacketPtr blockedPacket;</li></ul></li></ul><p>å„ç±»çš„æˆå‘˜å‡½æ•°å¦‚ä¸‹å›¾ï¼Œå…¶ä¸­ï¼ŒåŠ ç²—å‡½æ•°ä¸ºå¿…é¡»å®ç°çš„å‡½æ•°ï¼ŒæœªåŠ ç²—çš„å‡½æ•°ä¸ºåœ¨çˆ¶ç±»ä¸­å·²ç»å®ç°çš„å‡½æ•°ã€‚</p><img src="/2023/10/30/Gem5%E6%A8%A1%E6%8B%9F%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E5%9B%9B%EF%BC%89/memobj_api.png" class="" title="Interaction between SimpleMemobj and its ports"><p>ä¸‹é¢æŒ‰ä¸Šå›¾é¡ºåºåˆ†åˆ«å¯¹äº”ä¸ªå‡½æ•°è°ƒç”¨é“¾è¿›è¡Œæ¢³ç† </p><h2 id="textcolor-RGB-250-106-106-1-è·å–å†…å­˜æ¨¡å‹çš„åœ°å€èŒƒå›´-CPU-â€“-Mem-bus"><a href="#textcolor-RGB-250-106-106-1-è·å–å†…å­˜æ¨¡å‹çš„åœ°å€èŒƒå›´-CPU-â€“-Mem-bus" class="headerlink" title="$\textcolor[RGB]{250,106,106}{(1)è·å–å†…å­˜æ¨¡å‹çš„åœ°å€èŒƒå›´         (CPU â€“&gt; Mem bus)}$"></a>$\textcolor[RGB]{250,106,106}{(1)è·å–å†…å­˜æ¨¡å‹çš„åœ°å€èŒƒå›´         (CPU â€“&gt; Mem bus)}$</h2><p>CPU å‘é€è¯·æ±‚ï¼ŒæŸ¥è¯¢å†…å­˜æ¨¡å‹çš„åœ°å€èŒƒå›´ï¼Œå¹¶è¿”å›ä¸€ä¸ª AddrRangeList ç±»å‹çš„å€¼ã€‚è¿™ç§æŸ¥è¯¢è¯·æ±‚<strong>ä¸å­˜åœ¨é˜»å¡æƒ…å†µ</strong>ã€‚</p><h3 id="1-SimpleMemobj-CPUSidePort-getAddrRanges"><a href="#1-SimpleMemobj-CPUSidePort-getAddrRanges" class="headerlink" title="1. SimpleMemobj::CPUSidePort::getAddrRanges"></a>1. SimpleMemobj::CPUSidePort::getAddrRanges</h3><p>CPUSidePortç›´æ¥å°†è¯·æ±‚ä¼ é€’ç»™å…¶çˆ¶å¯¹è±¡SimpleMemobj</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">AddrRangeList</span><br><span class="line">SimpleMemobj::CPUSidePort::getAddrRanges() const</span><br><span class="line">&#123;</span><br><span class="line">    return owner-&gt;getAddrRanges();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-SimpleMemobj-getAddrRanges"><a href="#2-SimpleMemobj-getAddrRanges" class="headerlink" title="2. SimpleMemobj::getAddrRanges"></a>2. SimpleMemobj::getAddrRanges</h3><p>SimpleMemobjåŒæ ·ç›´æ¥å°†è¯·æ±‚ä¼ é€’ç»™å…¶å­å¯¹è±¡MemSidePort </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">AddrRangeList</span><br><span class="line">SimpleMemobj::getAddrRanges() const</span><br><span class="line">&#123;</span><br><span class="line">    DPRINTF(SimpleMemobj, &quot;Sending new ranges\n&quot;);</span><br><span class="line">    // Just use the same ranges as whatever is on the memory side.</span><br><span class="line">    return memPort.getAddrRanges();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>MemSidePort.getAddrRanges()å‡½æ•°å·²ç»åœ¨MemSidePortçš„çˆ¶ç±»RequestPortä¸­è¢«å®ç°äº†ï¼Œè¿”å›åœ°å€èŒƒå›´ï¼Œå¯ç›´æ¥ä½¿ç”¨ã€‚</p><h2 id="textcolor-RGB-100-106-255-2-é€šçŸ¥å†…å­˜æ¨¡å‹çš„åœ°å€èŒƒå›´å‘ç”Ÿæ›´æ”¹-Mem-bus-â€“-CPU"><a href="#textcolor-RGB-100-106-255-2-é€šçŸ¥å†…å­˜æ¨¡å‹çš„åœ°å€èŒƒå›´å‘ç”Ÿæ›´æ”¹-Mem-bus-â€“-CPU" class="headerlink" title="$\textcolor[RGB]{100,106,255}{(2)é€šçŸ¥å†…å­˜æ¨¡å‹çš„åœ°å€èŒƒå›´å‘ç”Ÿæ›´æ”¹(Mem bus â€“&gt; CPU)} $"></a>$\textcolor[RGB]{100,106,255}{(2)é€šçŸ¥å†…å­˜æ¨¡å‹çš„åœ°å€èŒƒå›´å‘ç”Ÿæ›´æ”¹(Mem bus â€“&gt; CPU)} $</h2><p>Mem buså‘é€è¯·æ±‚ï¼Œå‘CPUé€šçŸ¥å†…å­˜æ¨¡å‹çš„åœ°å€èŒƒå›´å‘ç”Ÿæ›´æ”¹ï¼ŒåŒæ ·æ­¤é€šçŸ¥ä¹Ÿ<strong>ä¸ä¼šé˜»å¡</strong>ã€‚</p><h3 id="1-SimpleMemobj-MemSidePort-recvRangeChange"><a href="#1-SimpleMemobj-MemSidePort-recvRangeChange" class="headerlink" title="1. SimpleMemobj::MemSidePort::recvRangeChange"></a>1. SimpleMemobj::MemSidePort::recvRangeChange</h3><p>MemSidePort ç›´æ¥å°†è¯·æ±‚ä¼ é€’ç»™å…¶çˆ¶å¯¹è±¡ SimpleMemobj</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">void</span><br><span class="line">SimpleMemobj::MemSidePort::recvRangeChange()</span><br><span class="line">&#123;</span><br><span class="line">    owner-&gt;sendRangeChange();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-SimpleMemobj-sendRangeChange"><a href="#2-SimpleMemobj-sendRangeChange" class="headerlink" title="2. SimpleMemobj::sendRangeChange"></a>2. SimpleMemobj::sendRangeChange</h3><p>SimpleMemobjåŒæ ·ç›´æ¥å°†è¯·æ±‚ä¼ é€’ç»™å…¶å­å¯¹è±¡CPUSidePort</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">void</span><br><span class="line">SimpleMemobj::sendRangeChange()</span><br><span class="line">&#123;</span><br><span class="line">    instPort.sendRangeChange();</span><br><span class="line">    dataPort.sendRangeChange();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>CPUSidePort.sendRangeChangeå‡½æ•°åŒæ ·å·²ç»åœ¨CPUSidePortçš„çˆ¶ç±»ResponsePortä¸­è¢«å®ç°äº†ï¼Œå¯ç›´æ¥ä½¿ç”¨ã€‚</p><h2 id="textcolor-RGB-250-250-100-3-åŠŸèƒ½è¯·æ±‚ä¸å“åº”-CPU-â€“-Mem-bus"><a href="#textcolor-RGB-250-250-100-3-åŠŸèƒ½è¯·æ±‚ä¸å“åº”-CPU-â€“-Mem-bus" class="headerlink" title="$\textcolor[RGB]{250,250,100}{(3)åŠŸèƒ½è¯·æ±‚ä¸å“åº”(CPU â€“&gt; Mem bus)} $"></a>$\textcolor[RGB]{250,250,100}{(3)åŠŸèƒ½è¯·æ±‚ä¸å“åº”(CPU â€“&gt; Mem bus)} $</h2><p>åŠŸèƒ½è¯·æ±‚æ˜¯æŒ‡ä¸æ”¹å˜ç³»ç»ŸçŠ¶æ€çš„è¯·æ±‚ï¼Œé€šå¸¸ç”¨äºè¯»å–æ•°æ®æˆ–æ£€æŸ¥ç³»ç»ŸçŠ¶æ€ã€‚åŒæ ·è¿™ç§è¯·æ±‚ä¹Ÿ<strong>ä¸ä¼šå‘ç”Ÿé˜»å¡</strong>ã€‚</p><p>è¿™ä¸ªè¿‡ç¨‹çš„è°ƒç”¨é“¾ä¸è·å–åœ°å€èŒƒå›´å¤§è‡´ç›¸åŒï¼Œåªä¸è¿‡éœ€è¦ä¼ é€’æ•°æ®åŒ…æŒ‡é’ˆã€‚</p><h3 id="1-SimpleMemobj-CPUSidePort-recvFunctional"><a href="#1-SimpleMemobj-CPUSidePort-recvFunctional" class="headerlink" title="1. SimpleMemobj::CPUSidePort::recvFunctional"></a>1. SimpleMemobj::CPUSidePort::recvFunctional</h3><p>CPUSidePortç›´æ¥å°†è¯·æ±‚ä¼ é€’ç»™å…¶çˆ¶å¯¹è±¡ SimpleMemobj</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">void</span><br><span class="line">SimpleMemobj::CPUSidePort::recvFunctional(PacketPtr pkt)</span><br><span class="line">&#123;</span><br><span class="line">    // Just forward to the memobj.</span><br><span class="line">    return owner-&gt;handleFunctional(pkt);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-SimpleMemobj-handleFunctional"><a href="#2-SimpleMemobj-handleFunctional" class="headerlink" title="2. SimpleMemobj::handleFunctional"></a>2. SimpleMemobj::handleFunctional</h3><p>SimpleMemobjåŒæ ·ç›´æ¥å°†è¯·æ±‚ä¼ é€’ç»™å…¶å­å¯¹è±¡MemSidePort </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">void</span><br><span class="line">SimpleMemobj::handleFunctional(PacketPtr pkt)</span><br><span class="line">&#123;</span><br><span class="line">    // Just pass this on to the memory side to handle for now.</span><br><span class="line">    memPort.sendFunctional(pkt);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>MemSidePort.sendFunctional()å‡½æ•°å·²ç»åœ¨MemSidePortçš„çˆ¶ç±»RequestPortä¸­è¢«å®ç°äº†ï¼Œå¯ç›´æ¥ä½¿ç”¨ã€‚</p><h2 id="textcolor-RGB-250-100-250-4-å‘é€å®šæ—¶è¯·æ±‚-CPU-â€“-Mem-bus"><a href="#textcolor-RGB-250-100-250-4-å‘é€å®šæ—¶è¯·æ±‚-CPU-â€“-Mem-bus" class="headerlink" title="$\textcolor[RGB]{250,100,250}{(4)å‘é€å®šæ—¶è¯·æ±‚(CPU â€“&gt; Mem bus)} $"></a>$\textcolor[RGB]{250,100,250}{(4)å‘é€å®šæ—¶è¯·æ±‚(CPU â€“&gt; Mem bus)} $</h2><p>å®šæ—¶è¯·æ±‚æ˜¯æŒ‡éœ€è¦ç­‰å¾…ä¸€æ®µæ—¶é—´åæ‰èƒ½å®Œæˆçš„è¯·æ±‚ï¼Œé€šå¸¸ç”¨äºå†™å…¥æ•°æ®æˆ–æ‰§è¡Œè€—æ—¶æ“ä½œã€‚ç”±äºCPUå‘é€è¯·æ±‚æ—¶ï¼Œmem buså¯èƒ½å°šæœªå¤„ç†å®Œä¸Šä¸€æ¬¡è¯·æ±‚ï¼Œå¤„äºå¿™æ€ï¼Œæ— æ³•æ¥æ”¶æ­¤æ¬¡è¯·æ±‚ï¼Œå› æ­¤è¿™ä¸ªè¿‡ç¨‹<strong>å¯èƒ½ä¼šå‘ç”Ÿé˜»å¡</strong>ã€‚</p><h3 id="1-SimpleMemobj-CPUSidePort-recvTimingReq"><a href="#1-SimpleMemobj-CPUSidePort-recvTimingReq" class="headerlink" title="1. SimpleMemobj::CPUSidePort::recvTimingReq"></a>1. SimpleMemobj::CPUSidePort::recvTimingReq</h3><p>CPUSidePortå°è¯•é€šè¿‡çˆ¶å¯¹è±¡ SimpleMemobjçš„handleRequestå‡½æ•°å‘é€å®šæ—¶è¯·æ±‚</p><p>å¦‚æœæˆåŠŸï¼Œè¿”å›trueï¼›</p><p>å¦‚æœå¤±è´¥ï¼Œå°†needRetryç½®ä¸ºtrueå¹¶è¿”å›falseï¼Œè¯¥è¯·æ±‚è¢«é˜»æ­¢ï¼ŒCPUåœ¨å°†æ¥æŸä¸ªæ—¶å€™éœ€è¦å‘é€ä¸€ä¸ªé‡è¯•ï¼ˆè§SimpleMemobj::CPUSidePort::trySendRetry()å‡½æ•°ï¼‰ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">bool</span><br><span class="line">SimpleMemobj::CPUSidePort::recvTimingReq(PacketPtr pkt)</span><br><span class="line">&#123;</span><br><span class="line">    // Just forward to the memobj.</span><br><span class="line">    if (!owner-&gt;handleRequest(pkt)) &#123;</span><br><span class="line">        needRetry = true;</span><br><span class="line">        return false;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-SimpleMemobj-handleRequest"><a href="#2-SimpleMemobj-handleRequest" class="headerlink" title="2. SimpleMemobj::handleRequest"></a>2. SimpleMemobj::handleRequest</h3><p>æ¥åˆ°SimpleMemobjçš„handleRequestå‡½æ•°ã€‚é¦–å…ˆæ£€æŸ¥ç›®å‰æ²¡æœ‰åœ¨ç­‰å¾…å“åº”ï¼ˆè¢«é˜»å¡ï¼‰</p><p>å¦‚æœæ²¡æœ‰è¢«é˜»å¡ï¼Œåˆ™å°†blockedç½®ä¸ºtrueï¼Œå³è¿›å…¥é˜»å¡çŠ¶æ€ï¼Œå¹¶é€šè¿‡å­å¯¹è±¡MemSidePortçš„sendPacketå‡½æ•°å‘é€æ•°æ®åŒ…ï¼Œå¹¶è¿”å›trueï¼›</p><p>åä¹‹å¦‚æœè¢«é˜»å¡ï¼Œç›´æ¥è¿”å›falseï¼Œæ‹’ç»æ­¤è¯·æ±‚ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">bool</span><br><span class="line">SimpleMemobj::handleRequest(PacketPtr pkt)</span><br><span class="line">&#123;</span><br><span class="line">    if (blocked) &#123;</span><br><span class="line">        // There is currently an outstanding request. Stall.</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line">    DPRINTF(SimpleMemobj, &quot;Got request for addr %#x\n&quot;, pkt-&gt;getAddr());</span><br><span class="line">    </span><br><span class="line">    // This memobj is now blocked waiting for the response to this packet.</span><br><span class="line">    blocked = true;</span><br><span class="line">    </span><br><span class="line">    // Simply forward to the memory port</span><br><span class="line">    memPort.sendPacket(pkt);</span><br><span class="line">    return true;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-SimpleMemobj-MemSidePort-sendPacket"><a href="#3-SimpleMemobj-MemSidePort-sendPacket" class="headerlink" title="3. SimpleMemobj::MemSidePort::sendPacket"></a>3. SimpleMemobj::MemSidePort::sendPacket</h3><p>MemSidePortçš„sendPacketä¼šè°ƒç”¨sendTimingReqå‡½æ•°ï¼ˆåœ¨å…¶çˆ¶ç±»ä¸­å®šä¹‰ï¼Œå¯ç›´æ¥ä½¿ç”¨ï¼‰å‘é€è¯·æ±‚æ•°æ®åŒ…ç»™å†…å­˜æ€»çº¿ã€‚å¦‚æœå‘é€ä¸æˆåŠŸï¼Œåˆ™å°†è¦å‘é€çš„æ•°æ®åŒ…æŒ‡é’ˆä¿å­˜ä¸‹æ¥ï¼Œå‡†å¤‡é‡å‘è¯¥æ•°æ®åŒ…ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">void</span><br><span class="line">SimpleMemobj::MemSidePort::sendPacket(PacketPtr pkt)</span><br><span class="line">&#123;</span><br><span class="line">    // Note: This flow control is very simple since the memobj is blocking.</span><br><span class="line">    panic_if(blockedPacket != nullptr, &quot;Should never try to send if blocked!&quot;);</span><br><span class="line">    </span><br><span class="line">    // If we can&#x27;t send the packet across the port, store it for later.</span><br><span class="line">    if (!sendTimingReq(pkt)) &#123;</span><br><span class="line">        blockedPacket = pkt;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-SimpleMemobj-MemSidePort-recvReqRetry"><a href="#4-SimpleMemobj-MemSidePort-recvReqRetry" class="headerlink" title="4. SimpleMemobj::MemSidePort::recvReqRetry"></a>4. SimpleMemobj::MemSidePort::recvReqRetry</h3><p>å†…å­˜æ€»çº¿ç»“æŸå¿™æ€åï¼Œä¼šè°ƒç”¨MemSidePortç±»çš„recvReqRetryé‚€è¯·MemSidePorté‡å‘ä¹‹å‰è¢«é˜»å¡çš„è¯·æ±‚æ•°æ®åŒ…ï¼Œå³é‡å‘blockedPacketæ•°æ®åŒ…ã€‚æ³¨æ„ï¼šåœ¨é‡å‘å‰ï¼Œåº”è¯¥ä¸€å®šä¼šæœ‰è¢«é˜»å¡çš„æ•°æ®åŒ…ï¼Œå¦åˆ™æŠ¥é”™ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">void</span><br><span class="line">SimpleMemobj::MemSidePort::recvReqRetry()</span><br><span class="line">&#123;</span><br><span class="line">    // We should have a blocked packet if this function is called.</span><br><span class="line">    assert(blockedPacket != nullptr);</span><br><span class="line"></span><br><span class="line">    // Grab the blocked packet.</span><br><span class="line">    PacketPtr pkt = blockedPacket;</span><br><span class="line">    blockedPacket = nullptr;</span><br><span class="line"></span><br><span class="line">    // Try to resend it. It&#x27;s possible that it fails again.</span><br><span class="line">    sendPacket(pkt);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="textcolor-RGB-100-250-250-5-æ¥æ”¶å®šæ—¶è¯·æ±‚çš„å“åº”-Mem-bus-â€“-CPU"><a href="#textcolor-RGB-100-250-250-5-æ¥æ”¶å®šæ—¶è¯·æ±‚çš„å“åº”-Mem-bus-â€“-CPU" class="headerlink" title="$\textcolor[RGB]{100,250,250}{(5)æ¥æ”¶å®šæ—¶è¯·æ±‚çš„å“åº”(Mem bus â€“&gt; CPU)} $"></a>$\textcolor[RGB]{100,250,250}{(5)æ¥æ”¶å®šæ—¶è¯·æ±‚çš„å“åº”(Mem bus â€“&gt; CPU)} $</h2><p>å†…å­˜æ€»çº¿å¤„ç†å®Œå®šæ—¶è¯·æ±‚åï¼Œä¼šå‘CPUå‘é€è¯¥å®šæ—¶è¯·æ±‚çš„å“åº”ã€‚ç±»ä¼¼åœ°ï¼ŒCPUä¹Ÿå¯èƒ½ä¼šå› ä¸ºå¤„äºå¿™æ€è€Œæ‹’ç»æ¥æ”¶å“åº”ï¼Œä¹Ÿ<strong>å¯èƒ½ä¼šå­˜åœ¨é˜»å¡</strong></p><h3 id="1-SimpleMemobj-MemSidePort-recvTimingResp"><a href="#1-SimpleMemobj-MemSidePort-recvTimingResp" class="headerlink" title="1. SimpleMemobj::MemSidePort::recvTimingResp"></a>1. SimpleMemobj::MemSidePort::recvTimingResp</h3><p>MemSidePortç›´æ¥å°†è¯·æ±‚ä¼ é€’ç»™å…¶çˆ¶å¯¹è±¡SimpleMemobj</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">bool</span><br><span class="line">SimpleMemobj::MemSidePort::recvTimingResp(PacketPtr pkt)</span><br><span class="line">&#123;</span><br><span class="line">    // Just forward to the memobj.</span><br><span class="line">    return owner-&gt;handleResponse(pkt);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-SimpleMemobj-handleResponse"><a href="#2-SimpleMemobj-handleResponse" class="headerlink" title="2. SimpleMemobj::handleResponse"></a>2. SimpleMemobj::handleResponse</h3><p>SimpleMemobjå¤„ç†å“åº”æ—¶ï¼Œé¦–å…ˆå› ä¸ºæ”¶åˆ°äº†å“åº”æ‰€ä»¥æ¶ˆé™¤é˜»å¡çŠ¶æ€ï¼Œç„¶åæ ¹æ®æ•°æ®åŒ…çš„å±æ€§ç¡®å®šæ˜¯å‘é€ç»™æŒ‡ä»¤ç«¯å£è¿˜æ˜¯æ•°æ®ç«¯å£ã€‚</p><p>ç»“æŸäº†é˜»å¡çŠ¶æ€ä»¥åï¼Œä¼šå°è¯•é€šè¿‡trySendRetry()å‡½æ•°è®©CPUé‡å‘æœªèƒ½æˆåŠŸå‘é€çš„è¯·æ±‚ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ã€‚</p><p>æ³¨æ„ï¼šåœ¨æ¥æ”¶å“åº”æ—¶ï¼ŒSimpleMemobjåº”è¯¥ä¸€å®šå¤„äºé˜»å¡çŠ¶æ€ï¼Œå¦åˆ™æŠ¥é”™ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">bool</span><br><span class="line">SimpleMemobj::handleResponse(PacketPtr pkt)</span><br><span class="line">&#123;</span><br><span class="line">    assert(blocked);</span><br><span class="line">    DPRINTF(SimpleMemobj, &quot;Got response for addr %#x\n&quot;, pkt-&gt;getAddr());</span><br><span class="line"></span><br><span class="line">    // The packet is now done. We&#x27;re about to put it in the port, no need for</span><br><span class="line">    // this object to continue to stall.</span><br><span class="line">    // We need to free the resource before sending the packet in case the CPU</span><br><span class="line">    // tries to send another request immediately (e.g., in the same callchain).</span><br><span class="line">    blocked = false;</span><br><span class="line"></span><br><span class="line">    // Simply forward to the memory port</span><br><span class="line">    if (pkt-&gt;req-&gt;isInstFetch()) &#123;</span><br><span class="line">        instPort.sendPacket(pkt);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        dataPort.sendPacket(pkt);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // For each of the cpu ports, if it needs to send a retry, it should do it</span><br><span class="line">    // now since this memory object may be unblocked now.</span><br><span class="line">    instPort.trySendRetry();</span><br><span class="line">    dataPort.trySendRetry();</span><br><span class="line"></span><br><span class="line">    return true;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-SimpleMemobj-CPUSidePort-sendPacket"><a href="#3-SimpleMemobj-CPUSidePort-sendPacket" class="headerlink" title="3. SimpleMemobj::CPUSidePort::sendPacket"></a>3. SimpleMemobj::CPUSidePort::sendPacket</h3><p>CPUSidePortçš„sendPacketä¼šè°ƒç”¨sendTimingReqå‡½æ•°ï¼ˆåœ¨å…¶çˆ¶ç±»ä¸­å®šä¹‰ï¼Œå¯ç›´æ¥ä½¿ç”¨ï¼‰å‘é€å“åº”æ•°æ®åŒ…ç»™CPUã€‚å¦‚æœå‘é€ä¸æˆåŠŸï¼Œåˆ™å°†è¦å‘é€çš„æ•°æ®åŒ…æŒ‡é’ˆä¿å­˜ä¸‹æ¥ï¼Œå‡†å¤‡é‡å‘è¯¥æ•°æ®åŒ…ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">void</span><br><span class="line">SimpleMemobj::CPUSidePort::sendPacket(PacketPtr pkt)</span><br><span class="line">&#123;</span><br><span class="line">    // Note: This flow control is very simple since the memobj is blocking.</span><br><span class="line"></span><br><span class="line">    panic_if(blockedPacket != nullptr, &quot;Should never try to send if blocked!&quot;);</span><br><span class="line"></span><br><span class="line">    // If we can&#x27;t send the packet across the port, store it for later.</span><br><span class="line">    if (!sendTimingResp(pkt)) &#123;</span><br><span class="line">        blockedPacket = pkt;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-SimpleMemobj-CPUSidePort-trySendRetry"><a href="#4-SimpleMemobj-CPUSidePort-trySendRetry" class="headerlink" title="4. SimpleMemobj::CPUSidePort::trySendRetry"></a>4. SimpleMemobj::CPUSidePort::trySendRetry</h3><p>å°è¯•è®©CPUé‡å‘æœªèƒ½å‘é€çš„è¯·æ±‚</p><p>å¦‚æœneedRetryä¸ºTrueï¼Œåˆ™è¯´æ˜ä¹‹å‰CPUæœ‰æœªèƒ½å‘é€çš„è¯·æ±‚ï¼›å¦‚æœblockedPacketæŒ‡é’ˆä¸ºç©ºï¼Œè¯´æ˜SimpleMemobjæœªå¤„äºé˜»å¡çŠ¶æ€ï¼Œåˆ™å¯ä»¥é€šè¿‡sendRetryReqå‡½æ•°ï¼ˆçˆ¶ç±»ä¸­å·²ç»å®ç°ï¼Œå¯ç›´æ¥ä½¿ç”¨ï¼‰è®©CPUé‡å‘è¯·æ±‚ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">void</span><br><span class="line">SimpleMemobj::CPUSidePort::trySendRetry()</span><br><span class="line">&#123;</span><br><span class="line">    if (needRetry &amp;&amp; blockedPacket == nullptr) &#123;</span><br><span class="line">        // Only send a retry if the port is now completely free</span><br><span class="line">        needRetry = false;</span><br><span class="line">        DPRINTF(SimpleMemobj, &quot;Sending retry req for %d\n&quot;, id);</span><br><span class="line">        sendRetryReq();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5-SimpleMemobj-CPUSidePort-recvRespRetry"><a href="#5-SimpleMemobj-CPUSidePort-recvRespRetry" class="headerlink" title="5. SimpleMemobj::CPUSidePort::recvRespRetry"></a>5. SimpleMemobj::CPUSidePort::recvRespRetry</h3><p>CPUå¿™æ€ç»“æŸä»¥åï¼Œä¼šé€šè¿‡è°ƒç”¨CPUSidePortç±»çš„recvRespRetryå‡½æ•°é‚€è¯·CPUSidePorté‡æ–°å‘é€ä¹‹å‰è¢«é˜»å¡çš„å“åº”æ•°æ®åŒ…ï¼Œå³é‡å‘blockedPacketæ•°æ®åŒ…ã€‚æ³¨æ„ï¼šåœ¨é‡å‘å‰ï¼Œåº”è¯¥ä¸€å®šä¼šæœ‰è¢«é˜»å¡çš„æ•°æ®åŒ…ï¼Œå¦åˆ™æŠ¥é”™ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">void</span><br><span class="line">SimpleMemobj::CPUSidePort::recvRespRetry()</span><br><span class="line">&#123;</span><br><span class="line">    // We should have a blocked packet if this function is called.</span><br><span class="line">    assert(blockedPacket != nullptr);</span><br><span class="line"></span><br><span class="line">    // Grab the blocked packet.</span><br><span class="line">    PacketPtr pkt = blockedPacket;</span><br><span class="line">    blockedPacket = nullptr;</span><br><span class="line"></span><br><span class="line">    // Try to resend it. It&#x27;s possible that it fails again.</span><br><span class="line">    sendPacket(pkt);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="äº”ã€é…ç½®è„šæœ¬"><a href="#äº”ã€é…ç½®è„šæœ¬" class="headerlink" title="äº”ã€é…ç½®è„šæœ¬"></a>äº”ã€é…ç½®è„šæœ¬</h1><p>å®ä¾‹åŒ–SimpleMemobjå¯¹è±¡ï¼Œå¹¶è¿è¡Œhello worldè´Ÿè½½çš„é…ç½®è„šæœ¬å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">import m5</span><br><span class="line">from m5.objects import *</span><br><span class="line"></span><br><span class="line">system = System()</span><br><span class="line">system.clk_domain = SrcClockDomain()</span><br><span class="line">system.clk_domain.clock = &#x27;1GHz&#x27;</span><br><span class="line">system.clk_domain.voltage_domain = VoltageDomain()</span><br><span class="line">system.mem_mode = &#x27;timing&#x27;</span><br><span class="line">system.mem_ranges = [AddrRange(&#x27;512MB&#x27;)]</span><br><span class="line"></span><br><span class="line">system.cpu = TimingSimpleCPU()</span><br><span class="line"></span><br><span class="line">system.memobj = SimpleMemobj()</span><br><span class="line"></span><br><span class="line">system.cpu.icache_port = system.memobj.inst_port</span><br><span class="line">system.cpu.dcache_port = system.memobj.data_port</span><br><span class="line"></span><br><span class="line">system.membus = SystemXBar()</span><br><span class="line"></span><br><span class="line">system.memobj.mem_side = system.membus.slave</span><br><span class="line"></span><br><span class="line">system.cpu.createInterruptController()</span><br><span class="line">system.cpu.interrupts[0].pio = system.membus.master</span><br><span class="line">system.cpu.interrupts[0].int_master = system.membus.slave</span><br><span class="line">system.cpu.interrupts[0].int_slave = system.membus.master</span><br><span class="line"></span><br><span class="line">system.mem_ctrl = DDR3_1600_8x8()</span><br><span class="line">system.mem_ctrl.range = system.mem_ranges[0]</span><br><span class="line">system.mem_ctrl.port = system.membus.master</span><br><span class="line"></span><br><span class="line">system.system_port = system.membus.slave</span><br><span class="line"></span><br><span class="line">process = Process()</span><br><span class="line">process.cmd = [&#x27;tests/test-progs/hello/bin/x86/linux/hello&#x27;]</span><br><span class="line">system.cpu.workload = process</span><br><span class="line">system.cpu.createThreads()</span><br><span class="line"></span><br><span class="line">root = Root(full_system = False, system = system)</span><br><span class="line">m5.instantiate()</span><br><span class="line"></span><br><span class="line">print &quot;Beginning simulation!&quot;</span><br><span class="line">exit_event = m5.simulate()</span><br><span class="line">print &#x27;Exiting @ tick %i because %s&#x27; % (m5.curTick(), exit_event.getCause())</span><br></pre></td></tr></table></figure><ol><li>åœ¨å‘½ä»¤è¡Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå¯ä»¥è¿è¡Œæ¨¡æ‹Ÿç³»ç»Ÿ</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">build/X86/gem5.opt configs/learning_gem5/part2/simple_memobj.py</span><br></pre></td></tr></table></figure><p>è¾“å‡ºå†…å®¹å‡ºç°Hello Worldåˆ™æ¨¡æ‹ŸæˆåŠŸã€‚</p><ol start="2"><li>åœ¨å‘½ä»¤è¡Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå¯ä»¥åœ¨debugæ¨¡å¼ä¸‹è¿è¡Œæ¨¡æ‹Ÿç³»ç»Ÿï¼Œç”±äºè¾“å‡ºè¾ƒå¤šï¼Œåªè¾“å‡ºå‰äº”åè¡Œã€‚</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">build/X86/gem5.opt --debug-flags=SimpleMemobj configs/learning_gem5/part2/simple_memobj.py | head -n 50</span><br></pre></td></tr></table></figure><p>è¾“å‡ºå¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Beginning simulation!</span><br><span class="line">      0: system.memobj: Got request for addr 0x190</span><br><span class="line">  77000: system.memobj: Got response for addr 0x190</span><br><span class="line">  77000: system.memobj: Got request for addr 0x190</span><br><span class="line"> 126000: system.memobj: Got response for addr 0x190</span><br><span class="line"> 126000: system.memobj: Got request for addr 0x190</span><br><span class="line"> 175000: system.memobj: Got response for addr 0x190</span><br><span class="line"> 175000: system.memobj: Got request for addr 0x94db0</span><br><span class="line"> 238000: system.memobj: Got response for addr 0x94db0</span><br><span class="line"> 238000: system.memobj: Got request for addr 0x190</span><br><span class="line"> 287000: system.memobj: Got response for addr 0x190</span><br><span class="line"> 287000: system.memobj: Got request for addr 0x198</span><br><span class="line"> 336000: system.memobj: Got response for addr 0x198</span><br><span class="line"> 336000: system.memobj: Got request for addr 0x198</span><br><span class="line"> 385000: system.memobj: Got response for addr 0x198</span><br><span class="line"> ...</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Gem5æ¨¡æ‹Ÿå™¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Gem5 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°å­—å›¾åƒå¤„ç†â€”â€”å›¾ç‰‡æ‹¼æ¥</title>
      <link href="/2023/10/25/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%E2%80%94%E2%80%94%E5%9B%BE%E7%89%87%E6%8B%BC%E6%8E%A5/"/>
      <url>/2023/10/25/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%E2%80%94%E2%80%94%E5%9B%BE%E7%89%87%E6%8B%BC%E6%8E%A5/</url>
      
        <content type="html"><![CDATA[<h1 id="é—®é¢˜å¯¼å…¥"><a href="#é—®é¢˜å¯¼å…¥" class="headerlink" title="é—®é¢˜å¯¼å…¥"></a>é—®é¢˜å¯¼å…¥</h1><p>å›¾ç‰‡å…¨æ™¯æ‹¼æ¥</p><p>è§‚å¯Ÿè€…åœ¨åŒä¸€ä¸ªç‚¹ï¼Œä¸æ˜¯ç®€å•çš„å¹³ç§»æ—‹è½¬ï¼Œéœ€è¦è¿ç”¨æŠ•å°„å…³ç³»ï¼ˆè¿‘å¤§è¿œå°ï¼‰</p><h1 id="å›¾åƒå…¨å±€å˜æ¢"><a href="#å›¾åƒå…¨å±€å˜æ¢" class="headerlink" title="å›¾åƒå…¨å±€å˜æ¢"></a>å›¾åƒå…¨å±€å˜æ¢</h1><p>ç ”ç©¶å¯¹è±¡ä¸ºäºŒç»´å›¾åƒ</p><h2 id="1-çº¿æ€§å˜æ¢"><a href="#1-çº¿æ€§å˜æ¢" class="headerlink" title="1. çº¿æ€§å˜æ¢"></a>1. çº¿æ€§å˜æ¢</h2><p>ç¼©æ”¾ Scale</p><p>æ—‹è½¬ Rotation</p><p>å‰ªåˆ‡ Shear</p><p>é•œåƒ mirror</p><p>S &#x3D; 2 * 2çŸ©é˜µ<br>$$<br>S &#x3D; \begin{bmatrix}<br> a &amp; b\<br> c &amp; d<br>\end{bmatrix}<br>$$</p><h2 id="2-ä»¿å°„å˜æ¢"><a href="#2-ä»¿å°„å˜æ¢" class="headerlink" title="2. ä»¿å°„å˜æ¢"></a>2. ä»¿å°„å˜æ¢</h2><p>ä»¿å°„å˜æ¢ &#x3D; çº¿æ€§å˜æ¢+å¹³ç§»</p><p>S &#x3D; 3 * 3çŸ©é˜µ<br>$$<br> S &#x3D; \begin{bmatrix} a &amp; b &amp; c\ d &amp; e &amp; f\ 0 &amp; 0 &amp; 1\end{bmatrix}<br>$$<br>6ä¸ªæœªçŸ¥æ•°</p><h2 id="3-æŠ•å½±å˜æ¢"><a href="#3-æŠ•å½±å˜æ¢" class="headerlink" title="3. æŠ•å½±å˜æ¢"></a>3. æŠ•å½±å˜æ¢</h2><p>S &#x3D; 3 * 3çŸ©é˜µ<br>$$<br>S &#x3D; \begin{bmatrix}<br> a &amp; b &amp; c\<br> d &amp; e &amp; f\<br> g &amp; h &amp; 1<br>\end{bmatrix}<br>$$<br>8ä¸ªæœªçŸ¥æ•°ï¼Œå³8ä¸ªè‡ªç”±åº¦ï¼Œè¡¨ç¤ºèƒ½åŠ›æœ€å¼º</p>]]></content>
      
      
      <categories>
          
          <category> æ•°å­—å›¾åƒå¤„ç† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å›¾ç‰‡æ‹¼æ¥ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gem5æ¨¡æ‹Ÿå™¨å­¦ä¹ ï¼ˆä¸‰ï¼‰</title>
      <link href="/2023/10/24/Gem5%E6%A8%A1%E6%8B%9F%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%89%EF%BC%89/"/>
      <url>/2023/10/24/Gem5%E6%A8%A1%E6%8B%9F%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%89%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="Gem5å­¦ä¹ â€”â€”åˆ›å»ºä¸€ä¸ªç®€å•çš„SimObject"><a href="#Gem5å­¦ä¹ â€”â€”åˆ›å»ºä¸€ä¸ªç®€å•çš„SimObject" class="headerlink" title="Gem5å­¦ä¹ â€”â€”åˆ›å»ºä¸€ä¸ªç®€å•çš„SimObject"></a>Gem5å­¦ä¹ â€”â€”åˆ›å»ºä¸€ä¸ªç®€å•çš„SimObject</h1><h2 id="ä¸€ã€åè¯è§£é‡Š"><a href="#ä¸€ã€åè¯è§£é‡Š" class="headerlink" title="ä¸€ã€åè¯è§£é‡Š"></a>ä¸€ã€åè¯è§£é‡Š</h2><ul><li><p>$\textcolor[RGB]{200,50,50}{SimObject}$</p><p>åœ¨gem5ä¸­ï¼ŒSimObjectæ˜¯ä¸€ä¸ªåŸºç¡€ç±»ï¼Œç”¨äº<strong>åˆ›å»ºå’Œç®¡ç†æ¨¡æ‹Ÿå¯¹è±¡</strong>ã€‚</p></li><li><p>$\textcolor[RGB]{200,50,50}{SimObjects}$</p><p>SimObjectsæ˜¯gem5ä¸­ç”¨äºç®¡ç†æ¨¡æ‹Ÿå¯¹è±¡çš„ç»„ä»¶ã€‚é€šå¸¸ï¼Œgem5ä¸­çš„æ¨¡æ‹Ÿå¯¹è±¡éƒ½ä¼šç»§æ‰¿è‡ªSimpleObjectç±»ï¼Œå¹¶ä¸”é€šè¿‡SimObjectsç»„ä»¶æ¥è¿›è¡Œç®¡ç†ã€‚</p></li><li><p>$\textcolor[RGB]{200,50,50}{SimpleObject}$</p><p>SimpleObjectæ˜¯SimObjectç±»çš„ä¸€ä¸ªæ´¾ç”Ÿç±»ï¼Œå®ƒåœ¨SimObjectç±»çš„åŸºç¡€ä¸Šå¢åŠ äº†ä¸€äº›é¢å¤–çš„åŠŸèƒ½ï¼Œé€šå¸¸ï¼Œåœ¨gem5ä¸­åˆ›å»ºæ–°çš„æ¨¡æ‹Ÿå¯¹è±¡æ—¶ï¼Œéƒ½ä¼šä»SimpleObjectç±»è¿›è¡Œæ´¾ç”Ÿï¼Œä»¥ä¾¿è·å¾—è¿™äº›åŸºæœ¬çš„åŠŸèƒ½ã€‚</p></li></ul><h2 id="äºŒã€åˆ›å»ºä¸€ä¸ªç®€å•çš„SimObject"><a href="#äºŒã€åˆ›å»ºä¸€ä¸ªç®€å•çš„SimObject" class="headerlink" title="äºŒã€åˆ›å»ºä¸€ä¸ªç®€å•çš„SimObject"></a>äºŒã€åˆ›å»ºä¸€ä¸ªç®€å•çš„SimObject</h2><p>å³å®˜ç½‘æ•™ç¨‹åˆ›å»ºhelloobject<a href="https://www.gem5.org/documentation/learning_gem5/part2/helloobject/">gem5: Creating a very simple SimObject</a></p><p><strong>$\textcolor[RGB]{100,200,50}{Gem5ä½¿ç”¨äº†Pythonå’ŒC++ä¸¤ç§ç¼–ç¨‹è¯­è¨€æ··åˆç¼–ç¨‹}$</strong></p><p>gem5ä¸€æ–¹é¢é€šè¿‡pythonè¯­è¨€é…ç½®æ¨¡æ‹Ÿå™¨è¿è¡Œçš„å‚æ•°å’Œæ§åˆ¶æ¨¡æ‹Ÿè¿‡ç¨‹çš„è„šæœ¬ï¼Œä¼˜åŠ¿åœ¨äºä¾¿äºå¿«é€Ÿé˜…è¯»å’Œç¼–å†™é…ç½®è„šæœ¬ï¼›å¦ä¸€æ–¹é¢é€šè¿‡C++å®ç°gem5ä¸­çš„å„ç§æ¨¡å‹ï¼ˆSimObjectsï¼‰ï¼Œä¼˜åŠ¿åœ¨äºC++æ˜¯ä¸€ç§é«˜æ€§èƒ½çš„ç¼–ç¨‹è¯­è¨€ï¼Œèƒ½å¤Ÿä¿è¯å…¶æ¨¡æ‹Ÿæ€§èƒ½ã€‚æ··åˆç¼–ç¨‹å……åˆ†å‘æŒ¥äº†ä¸¤ç§è¯­è¨€çš„ä¼˜åŠ¿ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Gem5æ¨¡æ‹Ÿå™¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Gem5 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gem5æ¨¡æ‹Ÿå™¨å­¦ä¹ ï¼ˆäºŒï¼‰</title>
      <link href="/2023/10/24/Gem5%E6%A8%A1%E6%8B%9F%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%8C%EF%BC%89/"/>
      <url>/2023/10/24/Gem5%E6%A8%A1%E6%8B%9F%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="ç†è§£gem5çš„è¾“å‡º"><a href="#ç†è§£gem5çš„è¾“å‡º" class="headerlink" title="ç†è§£gem5çš„è¾“å‡º"></a>ç†è§£gem5çš„è¾“å‡º</h1><p>æœ¬æ–‡æ˜¯å¯¹å®˜ç½‘æ•™ç¨‹<a href="https://www.gem5.org/documentation/learning_gem5/part1/gem5_stats/">gem5: Understanding gem5 statistics and output</a>çš„æ•´ç†ï¼Œä¸»è¦ä»‹ç»äº†gem5çš„è¾“å‡ºæ–‡ä»¶</p><p>æ¨¡æ‹Ÿè¾“å‡ºé»˜è®¤å­˜æ”¾åœ¨<code>m5out</code>æ–‡ä»¶å¤¹ä¸­ï¼Œä¹Ÿå¯é€šè¿‡<code>-d dirname</code>å‘½ä»¤è¡Œé€‰é¡¹æ§åˆ¶è¾“å‡ºæ–‡ä»¶å¤¹ï¼Œä½†æ³¨æ„è¯¥é€‰é¡¹åªèƒ½åœ¨gem5.optå’Œé…ç½®è„šæœ¬ä¹‹é—´ã€‚ä¾‹å¦‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">build/X86/gem5.opt -d cache_out configs/learning_gem5/part1/two_level.py</span><br></pre></td></tr></table></figure><p>æ¨¡æ‹Ÿç³»ç»Ÿä¼šè‡ªåŠ¨åœ¨å½“å‰æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ªcache_outæ–‡ä»¶å¤¹ï¼Œå¹¶å­˜æ”¾æ‰€ç”¨è¾“å‡ºæ•°æ®</p><p>è¾“å‡ºå¦‚ä¸‹</p><h2 id="1-config-ini"><a href="#1-config-ini" class="headerlink" title="1. config.ini"></a>1. config.ini</h2><p>æ¨¡æ‹Ÿç³»ç»Ÿçš„å…¨éƒ¨é…ç½®å‚æ•°</p><h2 id="2-config-json"><a href="#2-config-json" class="headerlink" title="2. config.json"></a>2. config.json</h2><p>æ¨¡æ‹Ÿç³»ç»Ÿçš„å…¨éƒ¨é…ç½®å‚æ•°ï¼Œjsonæ–‡ä»¶æ ¼å¼</p><h2 id="3-stats-txt"><a href="#3-stats-txt" class="headerlink" title="3. stats.txt"></a>3. stats.txt</h2><p>æ¨¡æ‹Ÿè¿‡ç¨‹çš„æ•°æ®ç»Ÿè®¡ã€‚</p><p>SimObjectçš„æ¯ä¸ªå®ä¾‹åŒ–éƒ½æœ‰è‡ªå·±çš„ç»Ÿè®¡ä¿¡æ¯ã€‚æ¨¡æ‹Ÿç»“æŸæ—¶ï¼Œæˆ–å‘å‡ºç‰¹æ®Šç»Ÿè®¡è½¬å‚¨å‘½ä»¤æ—¶ï¼Œæ‰€æœ‰SimObjectsçš„ç»Ÿè®¡ä¿¡æ¯çš„å½“å‰çŠ¶æ€éƒ½ä¼šè½¬å‚¨åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚</p><p>ç»Ÿè®¡è½¬å‚¨ä»¥<del>â€”â€”â€”â€”â€”-å¼€å§‹æ¨¡æ‹Ÿç»Ÿè®¡â€”â€”â€”â€”â€”-</del>å¼€å§‹ã€‚å¦‚æœåœ¨gem5æ‰§è¡ŒæœŸé—´å­˜åœ¨å¤šä¸ªç»Ÿè®¡è½¬å‚¨ï¼Œåˆ™å•ä¸ªæ–‡ä»¶ä¸­å¯èƒ½å­˜åœ¨å¤šä¸ªæ­¤ç±»è½¬å‚¨ã€‚è¿™å¯¹äºé•¿æ—¶é—´è¿è¡Œçš„åº”ç”¨ç¨‹åºæˆ–ä»æ£€æŸ¥ç‚¹æ¢å¤æ—¶å¾ˆå¸¸è§ã€‚</p><p>æ¯ä¸ªç»Ÿè®¡ä¿¡æ¯éƒ½æœ‰ä¸€ä¸ªåç§°ï¼ˆç¬¬ä¸€åˆ—ï¼‰ã€ä¸€ä¸ªå€¼ï¼ˆç¬¬äºŒåˆ—ï¼‰å’Œä¸€ä¸ªæè¿°ï¼ˆæœ€åä¸€åˆ—ä»¥#å¼€å¤´ï¼‰ï¼Œåè·Ÿç»Ÿè®¡ä¿¡æ¯çš„å•ä½ã€‚</p><h4 id="ï¼ˆ1ï¼‰æœ‰å…³æ‰§è¡Œçš„ä¸€èˆ¬ç»Ÿè®¡ä¿¡æ¯ï¼š"><a href="#ï¼ˆ1ï¼‰æœ‰å…³æ‰§è¡Œçš„ä¸€èˆ¬ç»Ÿè®¡ä¿¡æ¯ï¼š" class="headerlink" title="ï¼ˆ1ï¼‰æœ‰å…³æ‰§è¡Œçš„ä¸€èˆ¬ç»Ÿè®¡ä¿¡æ¯ï¼š"></a>ï¼ˆ1ï¼‰æœ‰å…³æ‰§è¡Œçš„ä¸€èˆ¬ç»Ÿè®¡ä¿¡æ¯ï¼š</h4><p>é¦–å…ˆï¼Œç»Ÿè®¡ä¿¡æ¯æ–‡ä»¶åŒ…å«æœ‰å…³æ‰§è¡Œçš„ä¸€èˆ¬ç»Ÿè®¡ä¿¡æ¯ï¼š</p><p>æ¯”å¦‚æ€»æ¨¡æ‹Ÿæ—¶é—´<code>simSeconds</code>ï¼ŒCPUæäº¤çš„æŒ‡ä»¤æ•°<code>simInsts</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">---------- Begin Simulation Statistics ----------</span><br><span class="line">simSeconds                                   0.000057                       # Number of seconds simulated (Second)</span><br><span class="line">simTicks                                     57467000                       # Number of ticks simulated (Tick)</span><br><span class="line">finalTick                                    57467000                       # Number of ticks from beginning of simulation (restored from checkpoints and never reset) (Tick)</span><br><span class="line">simFreq                                  1000000000000                       # The number of ticks per simulated second ((Tick/Second))</span><br><span class="line">hostSeconds                                      0.03                       # Real time elapsed on the host (Second)</span><br><span class="line">hostTickRate                               2295882330                       # The number of ticks simulated per host second (ticks/s) ((Tick/Second))</span><br><span class="line">hostMemory                                     665792                       # Number of bytes of host memory used (Byte)</span><br><span class="line">simInsts                                         6225                       # Number of instructions simulated (Count)</span><br><span class="line">simOps                                          11204                       # Number of ops (including micro ops) simulated (Count)</span><br><span class="line">hostInstRate                                   247382                       # Simulator instruction rate (inst/s) ((Count/Second))</span><br><span class="line">hostOpRate                                     445086                       # Simulator op (including micro ops) rate (op/s) ((Count/Second))</span><br><span class="line"></span><br><span class="line">---------- Begin Simulation Statistics ----------</span><br><span class="line">simSeconds                                   0.000490                       # Number of seconds simulated (Second)</span><br><span class="line">simTicks                                    490394000                       # Number of ticks simulated (Tick)</span><br><span class="line">finalTick                                   490394000                       # Number of ticks from beginning of simulation (restored from checkpoints and never reset) (Tick)</span><br><span class="line">simFreq                                  1000000000000                       # The number of ticks per simulated second ((Tick/Second))</span><br><span class="line">hostSeconds                                      0.03                       # Real time elapsed on the host (Second)</span><br><span class="line">hostTickRate                              15979964060                       # The number of ticks simulated per host second (ticks/s) ((Tick/Second))</span><br><span class="line">hostMemory                                     657488                       # Number of bytes of host memory used (Byte)</span><br><span class="line">simInsts                                         6225                       # Number of instructions simulated (Count)</span><br><span class="line">simOps                                          11204                       # Number of ops (including micro ops) simulated (Count)</span><br><span class="line">hostInstRate                                   202054                       # Simulator instruction rate (inst/s) ((Count/Second))</span><br><span class="line">hostOpRate                                     363571                       # Simulator op (including micro ops) rate (op/s) ((Count/Second))</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ2ï¼‰SimObjectsçš„ç»Ÿè®¡ä¿¡æ¯"><a href="#ï¼ˆ2ï¼‰SimObjectsçš„ç»Ÿè®¡ä¿¡æ¯" class="headerlink" title="ï¼ˆ2ï¼‰SimObjectsçš„ç»Ÿè®¡ä¿¡æ¯"></a>ï¼ˆ2ï¼‰SimObjectsçš„ç»Ÿè®¡ä¿¡æ¯</h4><p>æ¥ä¸‹æ¥ï¼Œå°†æ‰“å°SimObjectsçš„ç»Ÿè®¡ä¿¡æ¯ï¼Œæ¯”å¦‚CPUã€å†…å­˜æ§åˆ¶å™¨ç­‰ç­‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">system.clk_domain.clock                          1000                       # Clock period in ticks (Tick)</span><br><span class="line">system.clk_domain.voltage_domain.voltage            1                       # Voltage in Volts (Volt)</span><br><span class="line">system.cpu.numCycles                            58236                       # Number of cpu cycles simulated (Cycle)</span><br><span class="line">system.cpu.numWorkItemsStarted                      0                       # Number of work items this cpu started (Count)</span><br><span class="line">system.cpu.numWorkItemsCompleted                    0                       # Number of work items this cpu completed (Count)</span><br><span class="line">system.cpu.dcache.demandHits::cpu.data           1951                       # number of demand (read+write) hits (Count)</span><br><span class="line">system.cpu.dcache.demandHits::total              1951                       # number of demand (read+write) hits (Count)</span><br><span class="line">system.cpu.dcache.overallHits::cpu.data          1951                       # number of overall hits (Count)</span><br><span class="line">system.cpu.dcache.overallHits::total             1951                       # number of overall hits (Count)</span><br><span class="line">system.cpu.dcache.demandMisses::cpu.data          136                       # number of demand (read+write) misses (Count)</span><br><span class="line">system.cpu.dcache.demandMisses::total             136                       # number of demand (read+write) misses (Count)</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">system.mem_ctrl.avgPriority_cpu.inst::samples       228.00                       # Average QoS priority value for accepted requests (Count)</span><br><span class="line">system.mem_ctrl.avgPriority_cpu.data::samples       136.00                       # Average QoS priority value for accepted requests (Count)</span><br><span class="line">system.mem_ctrl.priorityMinLatency       0.000000018750                       # per QoS priority minimum request to response latency (Second)</span><br><span class="line">system.mem_ctrl.priorityMaxLatency       0.000000489500                       # per QoS priority maximum request to response latency (Second)</span><br><span class="line">system.mem_ctrl.numReadWriteTurnArounds             0                       # Number of turnarounds from READ to WRITE (Count)</span><br><span class="line">system.mem_ctrl.numWriteReadTurnArounds             0                       # Number of turnarounds from WRITE to READ (Count)</span><br><span class="line">system.mem_ctrl.numStayReadState                  742                       # Number of times bus staying in READ state (Count)</span><br><span class="line">system.mem_ctrl.numStayWriteState                   0                       # Number of times bus staying in WRITE state (Count)</span><br><span class="line">system.mem_ctrl.readReqs                          364                       # Number of read requests accepted (Count)</span><br><span class="line">system.mem_ctrl.writeReqs                           0                       # Number of write requests accepted (Count)</span><br><span class="line">system.mem_ctrl.readBursts                        364                       # Number of controller read bursts, including those serviced by the write queue (Count)</span><br><span class="line">system.mem_ctrl.writeBursts                         0                       # Number of controller write bursts, including those merged in the write queue (Count)</span><br></pre></td></tr></table></figure><p>å®‰è£…pythonçš„PydotåŒ…ä¹‹åï¼Œå½“è¿è¡Œgem5è¿›è¡Œæ¨¡æ‹Ÿä»¿çœŸä¹‹åï¼Œå³å¯åœ¨m5outç›®å½•ä¸‹æ‰¾åˆ°config.pdfä¹‹ç±»çš„é…ç½®å›¾,å¦‚å›¾1æ‰€ç¤ºã€‚</p><p>è¿˜å¯ä»¥é€šè¿‡dotå‘½ä»¤å°†config.dotæ–‡ä»¶è½¬æ¢æˆè‡ªå·±éœ€è¦çš„æ ¼å¼</p><p>pip install pydot<br>cd m5out<br>dot -Tpng -o config.png config.dot</p><p>RISCV1024æ ¸æ¨¡æ‹ŸæŠ¥é”™</p><img src="/2023/10/24/Gem5%E6%A8%A1%E6%8B%9F%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%8C%EF%BC%89/image-20231118163457835.png" class="" title="image-20231118163457835">]]></content>
      
      
      <categories>
          
          <category> Gem5æ¨¡æ‹Ÿå™¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Gem5 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1211-</title>
      <link href="/2023/10/23/1211/"/>
      <url>/2023/10/23/1211/</url>
      
        <content type="html"><![CDATA[<h1 id="12æœˆ11æ—¥"><a href="#12æœˆ11æ—¥" class="headerlink" title="12æœˆ11æ—¥"></a>12æœˆ11æ—¥</h1><h2 id="1-fs-pyä»£ç é˜…è¯»"><a href="#1-fs-pyä»£ç é˜…è¯»" class="headerlink" title="1. fs.pyä»£ç é˜…è¯»"></a>1. fs.pyä»£ç é˜…è¯»</h2><p>fs.pyè‡ªå·±çš„è·¯å¾„<code>configs/example/fs.py</code>æ˜¯çŸ¥é“çš„ï¼Œå®ƒç”¨addToPath(â€œâ€¦&#x2F;â€¦&#x2F;â€)ï¼Œä½¿å¾—å¯ä»¥ç›´æ¥å¯¼å…¥<code>confis/</code>ä¸­çš„æ¨¡å—ï¼Œç„¶åå¼•ç”¨äº†configsé‡Œè‡ªå¸¦çš„ä¸€äº›pythonæ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">addToPath(&#x27;../&#x27;)</span><br><span class="line"># confis/ ä¸­å«æœ‰ruby/å’Œcommon/</span><br><span class="line">from ruby import Ruby</span><br><span class="line"></span><br><span class="line">from common.FSConfig import *</span><br><span class="line">from common.SysPaths import *</span><br><span class="line">from common.Benchmarks import *</span><br><span class="line">from common import Simulation</span><br><span class="line">from common import CacheConfig</span><br><span class="line">from common import MemConfig</span><br><span class="line">from common import CpuConfig</span><br><span class="line">from common import BPConfig</span><br><span class="line">from common.Caches import *</span><br><span class="line">from common import Options</span><br></pre></td></tr></table></figure><p>gem5é€šè¿‡pythonå†…ç½®çš„<code>optparse</code>æ¨¡å—æ·»åŠ å‘½ä»¤è¡Œé€‰é¡¹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># å®ä¾‹åŒ–å‘½ä»¤è¡Œæ¨¡å—</span><br><span class="line">parser = optparse.OptionParser</span><br><span class="line"># é€šè¿‡è°ƒç”¨configs/common/Options.pyæ¨¡å—ä¸­çš„æ–¹æ³•æ·»åŠ ç›¸åº”å‘½ä»¤è¡Œé€‰é¡¹</span><br><span class="line">Options.addCommonOptions(parser)   # æ·»åŠ å¸¸ç”¨å‚æ•°ã€‚å¦‚CPUç±»å‹ã€CPUæ—¶é’Ÿé¢‘ç‡ç­‰</span><br><span class="line">Options.addFSOptions(parser)       # æ·»åŠ FSæ¨¡æ‹Ÿå‚æ•°ã€‚å¦‚ä½¿ç”¨çš„å†…æ ¸ã€é•œåƒæ–‡ä»¶ç­‰</span><br><span class="line"></span><br><span class="line"># å¦‚æœå‘½ä»¤è¡Œå‚æ•°å«æœ‰&#x27;--ruby&#x27;ï¼Œåˆ™å¢åŠ rubyéœ€è¦çš„å‘½ä»¤è¡Œé€‰é¡¹</span><br><span class="line">if &#x27;--ruby&#x27; in sys.argv:</span><br><span class="line">    Ruby.define_options(parser)    </span><br><span class="line">    </span><br><span class="line"># è§£æå‚æ•°</span><br><span class="line"># parse_args()è¿”å›ä¸¤ä¸ªå€¼ï¼š</span><br><span class="line"># options, è¿™æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ˆoptpars.Values)ï¼Œä¿å­˜æœ‰å‘½ä»¤è¡Œå‚æ•°å€¼ã€‚åªè¦çŸ¥é“å‘½ä»¤è¡Œå‚æ•°åï¼Œå¦‚file,å°±å¯ä»¥è®¿é—®å…¶å¯¹åº”çš„å€¼ï¼šoptions.fileã€‚</span><br><span class="line"># argsï¼Œä¸€ä¸ªç”±positional argumentsç»„æˆçš„åˆ—è¡¨ã€‚ </span><br><span class="line">(options, args) = parser.parse_args()</span><br><span class="line"></span><br><span class="line">if args:</span><br><span class="line">    print(&quot;Error: script doesn&#x27;t take any positional arguments&quot;)</span><br><span class="line">    sys.exit(1)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>args æ˜¯ä¸€ä¸ªåŒ…å«æ‰€æœ‰å‘½ä»¤è¡Œå‚æ•°å€¼çš„å‘½åç©ºé—´å¯¹è±¡ã€‚æ¯ä¸ªå‘½ä»¤è¡Œå‚æ•°éƒ½æˆä¸ºè¿™ä¸ªå¯¹è±¡çš„ä¸€ä¸ªå±æ€§ï¼Œå¯ä»¥é€šè¿‡ args.å‚æ•°å çš„å½¢å¼è®¿é—®ã€‚<br>åœ¨ gem5 çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œè¿™æ„å‘³ç€ args åŒ…å«äº†æ¨¡æ‹Ÿå™¨è¿è¡Œæ‰€éœ€çš„æ‰€æœ‰é…ç½®ä¿¡æ¯ï¼Œå¦‚æ˜¯å¦å¯ç”¨ Ruby æ¨¡æ‹Ÿã€æ–‡ä»¶ç³»ç»Ÿçš„é…ç½®ç­‰ã€‚</p><p>ä»¥ä¸Šä»£ç å®šä¹‰äº†argparseè§£æå™¨å¹¶æ·»åŠ äº†å‘½ä»¤è¡Œå‚æ•°ã€‚ç„¶åå®ƒè§£æäº†è¿™äº›å‚æ•°ï¼Œå¹¶åŸºäºè¿™äº›å‚æ•°æ¥è®¾ç½®CPUç±»å’Œå†…å­˜ç±»ã€‚ä¹‹åï¼Œå®ƒæ„å»ºæµ‹è¯•ç³»ç»Ÿï¼Œå¯èƒ½è¿˜ä¼šæ„å»ºé©±åŠ¨ç³»ç»Ÿï¼Œæœ€ååˆ›å»ºä¸€ä¸ªrootæ ¹å¯¹è±¡æ¥å¯åŠ¨æ¨¡æ‹Ÿã€‚</p><p>åœ¨gem5ä¸­ï¼Œrootæ˜¯æ•´ä¸ªæ¨¡æ‹Ÿç¯å¢ƒçš„æœ€é¡¶å±‚å®¹å™¨ï¼Œå®ƒé€šå¸¸åŒ…å«äº†æ¨¡æ‹Ÿçš„è®¡ç®—æœºç³»ç»Ÿï¼ˆå¦‚å¤„ç†å™¨ã€å†…å­˜ã€æ€»çº¿ç­‰ï¼‰ä»¥åŠä¸è¿™äº›ç»„ä»¶è¿æ¥çš„æ‰€æœ‰è®¾å¤‡å’Œç³»ç»Ÿçš„é…ç½®ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">np = options.num_cpus</span><br><span class="line"></span><br><span class="line">test_sys = build_test_system(np)</span><br><span class="line">if len(bm) == 2:</span><br><span class="line">    drive_sys = build_drive_system(np)</span><br><span class="line">    root = makeDualRoot(True, test_sys, drive_sys, options.etherdump)</span><br><span class="line">elif len(bm) == 1 and options.dist:</span><br><span class="line">    # This system is part of a dist-gem5 simulation</span><br><span class="line">    root = makeDistRoot(test_sys,</span><br><span class="line">                        options.dist_rank,</span><br><span class="line">                        options.dist_size,</span><br><span class="line">                        options.dist_server_name,</span><br><span class="line">                        options.dist_server_port,</span><br><span class="line">                        options.dist_sync_repeat,</span><br><span class="line">                        options.dist_sync_start,</span><br><span class="line">                        options.ethernet_linkspeed,</span><br><span class="line">                        options.ethernet_linkdelay,</span><br><span class="line">                        options.etherdump);</span><br><span class="line">elif len(bm) == 1:</span><br><span class="line">    root = Root(full_system=True, system=test_sys)</span><br><span class="line">else:</span><br><span class="line">    print(&quot;Error I don&#x27;t know how to create more than 2 systems.&quot;)</span><br><span class="line">    sys.exit(1)</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªè„šæœ¬ä¸­ï¼Œrootå¯¹è±¡æ˜¯åœ¨ä¸åŒæ¡ä»¶ä¸‹è¢«åˆ›å»ºçš„ï¼š<br>å¦‚æœæ¨¡æ‹Ÿçš„æ˜¯ä¸€ä¸ªåŒç³»ç»Ÿï¼ˆdualç³»ç»Ÿï¼‰ï¼Œé‚£ä¹ˆrootä¼šé€šè¿‡è°ƒç”¨makeDualRoot()å‡½æ•°è¢«åˆ›å»ºï¼Œè¿™æ„å‘³ç€ä¼šæœ‰ä¸¤ä¸ªç³»ç»Ÿï¼ˆtest_syså’Œdrive_sysï¼‰å¹¶è¡Œè¿è¡Œåœ¨æ¨¡æ‹Ÿä¸­ã€‚<br>å¦‚æœå¯ç”¨äº†åˆ†å¸ƒå¼æ¨¡æ‹Ÿï¼ˆdistæ¨¡å¼ï¼‰ï¼Œåˆ™é€šè¿‡è°ƒç”¨makeDistRoot()å‡½æ•°åˆ›å»ºrootï¼Œæ­¤æ—¶rootä»£è¡¨çš„ç³»ç»Ÿä¼šä½œä¸ºåˆ†å¸ƒå¼æ¨¡æ‹Ÿä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹ã€‚<br>å¦‚æœæ¨¡æ‹Ÿçš„æ˜¯å•ä¸ªç³»ç»Ÿï¼Œé‚£ä¹ˆrootä¼šç®€å•åœ°é€šè¿‡Root(full_system&#x3D;True, system&#x3D;test_sys)åˆ›å»ºï¼Œå…¶ä¸­test_sysæ˜¯é€šè¿‡build_test_system()å‡½æ•°æ„å»ºçš„æµ‹è¯•ç³»ç»Ÿã€‚</p><p><a href="https://blog.csdn.net/qq_34898487/article/details/134318122">https://blog.csdn.net/qq_34898487/article/details/134318122</a></p>]]></content>
      
      
      <categories>
          
          <category> æ¯•è®¾å­¦ä¹ è®°å½• </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>SCons</title>
      <link href="/2023/10/23/SCons/"/>
      <url>/2023/10/23/SCons/</url>
      
        <content type="html"><![CDATA[<p>sconsæ˜¯ä¸€ä¸ªPythonå†™çš„è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·ï¼Œä½¿ç”¨SConstructæ–‡ä»¶è¿›è¡Œæ„å»ºã€‚</p><p>å®˜ç½‘ï¼š<a href="https://scons.org/">https://scons.org/</a></p><p>Wikiï¼š<a href="https://github.com/SCons/scons/wiki">https://github.com/SCons/scons/wiki</a></p><p>manual pageï¼š <a href="https://www.scons.org/doc/HTML/scons-man.html">SCons 4.6.0</a></p><p> SConstructæ–‡ä»¶ï¼Œç±»ä¼¼äºMakeç³»ç»Ÿä¸­çš„Makefileæ–‡ä»¶ï¼Œè¿™æ˜¯SConsè¯»å–å¹¶æ§åˆ¶ç¼–è¯‘æ„å»ºçš„è¾“å…¥æ–‡ä»¶ã€‚ SConstructå’ŒMakefileçš„æœ€å¤§ä¸åŒæ˜¯ï¼šSConstructæ–‡ä»¶æ˜¯pythonè„šæœ¬ï¼Œè¿™ä¼šå¤§å¤§ç®€åŒ–æ„å»ºçš„è¿‡ç¨‹ã€‚</p><p>æ˜¯ä»</p><p><strong>Sconså‡½æ•°ä¸æ„å»ºé¡ºåºæ— å…³</strong></p><p>   SConstructæœ‰ä¸€ç‚¹å’Œä¸€èˆ¬pythonè„šæœ¬ä¸åŒï¼ŒSConså‡½æ•°çš„ä¹¦å†™è°ƒç”¨é¡ºåºï¼Œå¹¶ä¸å½±å“SConsçœŸå®çš„æ„å»ºé¡ºåºï¼Œè¿™ç‚¹å’ŒMakefileæœ‰ç‚¹ç›¸ä¼¼ã€‚æ¢å¥è¯è¯´ï¼Œå½“ä½ è°ƒç”¨Programæ„å»ºæ—¶ï¼ˆæˆ–è€…å…¶ä»–æ„å»ºæ–¹æ³•ï¼‰ï¼ŒSConså¹¶éåœ¨æ­¤åˆ»æ„å»ºå¯æ‰§è¡Œæ–‡ä»¶ï¼Œç›¸åï¼Œè¿™ä»…ä»…æ˜¯å‘Šè¯‰SConsä½ æƒ³è¦è·å¾—ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶çš„æ„å»ºç»“æœã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œéœ€è¦æ„å»ºhello.cçš„æºæ–‡ä»¶ï¼ŒSConsä¹Ÿä»…ä»…æ˜¯è·å–äº†æ„å»ºå¯æ‰§è¡Œæ–‡ä»¶helloå’Œæºç hello.cä¹‹é—´çš„å…³ç³»ã€‚</p><h1 id="ä¸€ã€Sconsæ„å»ºæ–¹æ³•"><a href="#ä¸€ã€Sconsæ„å»ºæ–¹æ³•" class="headerlink" title="ä¸€ã€Sconsæ„å»ºæ–¹æ³•"></a>ä¸€ã€Sconsæ„å»ºæ–¹æ³•</h1><h2 id="1-Programæ„å»ºäºŒè¿›åˆ¶æ–‡ä»¶"><a href="#1-Programæ„å»ºäºŒè¿›åˆ¶æ–‡ä»¶" class="headerlink" title="1. Programæ„å»ºäºŒè¿›åˆ¶æ–‡ä»¶"></a>1. Programæ„å»ºäºŒè¿›åˆ¶æ–‡ä»¶</h2><p>å¦‚æœæƒ³æ„å»ºhello.cç¨‹åºï¼Œæ–°å»ºä¸€ä¸ª</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Program(&#x27;hello.c&#x27;)</span><br></pre></td></tr></table></figure><p>åœ¨SConså‘½ä»¤è¡Œä¸­æ‰§è¡Œ<code>scons</code>å‘½ä»¤è¿›è¡Œæ„å»ºï¼Œä¼šæœ‰sconsä¼šæ‰§è¡Œä»¥ä¸‹ç¼–è¯‘å‘½ä»¤ï¼Œé»˜è®¤å¾—åˆ°<code>hello</code>äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt; scons</span><br><span class="line">scons: Reading SConscript files ...</span><br><span class="line">scons: done reading SConscript files.</span><br><span class="line">scons: Building targets ...</span><br><span class="line">cc -o hello.o -c hello.c</span><br><span class="line">cc -o hello hello.o</span><br><span class="line">scons: done building targets. </span><br></pre></td></tr></table></figure><h3 id="1-1-æŒ‡å®šäºŒè¿›åˆ¶æ–‡ä»¶åç§°"><a href="#1-1-æŒ‡å®šäºŒè¿›åˆ¶æ–‡ä»¶åç§°" class="headerlink" title="1.1 æŒ‡å®šäºŒè¿›åˆ¶æ–‡ä»¶åç§°"></a>1.1 æŒ‡å®šäºŒè¿›åˆ¶æ–‡ä»¶åç§°</h3><p>å¦‚æœæƒ³è¦<strong>æŒ‡å®šäºŒè¿›åˆ¶æ–‡ä»¶çš„æ–‡ä»¶å</strong>ï¼Œåˆ™éœ€è¦åœ¨æºæ–‡ä»¶çš„å‰é¢ï¼ŒæŒ‡æ˜è¾“å‡ºåç§°å³å¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Program(&#x27;new_hello&#x27;, &#x27;hello.c&#x27;)</span><br></pre></td></tr></table></figure><h3 id="1-2-ç®€åŒ–æ„å»ºè¾“å‡º"><a href="#1-2-ç®€åŒ–æ„å»ºè¾“å‡º" class="headerlink" title="1.2 ç®€åŒ–æ„å»ºè¾“å‡º"></a>1.2 ç®€åŒ–æ„å»ºè¾“å‡º</h3><p>å¦‚æœæƒ³è¦<strong>ç®€åŒ–æ„å»ºæ—¶å‘½ä»¤è¡Œçš„è¾“å‡º</strong>ï¼Œåªçœ‹å®é™…æ‰§è¡Œçš„ç¼–è¯‘å‘½ä»¤ï¼Œåˆ™åœ¨æ„å»ºæ—¶ä½¿ç”¨-Qé€‰é¡¹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; scons -Q</span><br><span class="line">cc -o hello.o -c hello.c</span><br><span class="line">cc -o new_hello hello.o</span><br></pre></td></tr></table></figure><h3 id="1-3-ç¼–è¯‘å¤šä¸ªæºæ–‡ä»¶"><a href="#1-3-ç¼–è¯‘å¤šä¸ªæºæ–‡ä»¶" class="headerlink" title="1.3 ç¼–è¯‘å¤šä¸ªæºæ–‡ä»¶"></a>1.3 ç¼–è¯‘å¤šä¸ªæºæ–‡ä»¶</h3><p><strong>ç¼–è¯‘å¤šä¸ªæºæ–‡ä»¶</strong>ï¼Œå¯ä»¥é‡‡ç”¨åˆ—è¡¨çš„æ–¹å¼æŒ‡å®šå¤šä¸ªæºæ–‡ä»¶å</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># build hello.c only</span><br><span class="line">Program(&quot;My_hello&quot;, &quot;hello.c&quot;)</span><br><span class="line"></span><br><span class="line"># build hello.c name.c</span><br><span class="line">Program(&quot;My_hello&quot;, [&quot;hello.c&quot;, &quot;name.c&quot;])</span><br><span class="line"></span><br><span class="line"># build all the .c file in the current dir</span><br><span class="line">Program(&quot;My_hello&quot;, Glob(&#x27;*.c&#x27;))</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¯ä»¥ç”¨sconså†…ç½®çš„Splitå‡½æ•°è‡ªåŠ¨åˆ†å‰²å­—ç¬¦ä¸²</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># Split function help divide the file string</span><br><span class="line">Program(&#x27;program&#x27;, Split(&#x27;main.c file1.c file2.c&#x27;))</span><br><span class="line"></span><br><span class="line">src_file = Split(&quot;&quot;&quot;&quot; main.c</span><br><span class="line">                      file1.c </span><br><span class="line">                      file2.c&quot;&quot;&quot;)</span><br><span class="line">Program(&#x27;program&#x27;, src_files)</span><br></pre></td></tr></table></figure><h3 id="1-4-å…³é”®å­—å‚æ•°"><a href="#1-4-å…³é”®å­—å‚æ•°" class="headerlink" title="1.4 å…³é”®å­—å‚æ•°"></a>1.4 å…³é”®å­—å‚æ•°</h3><p>SConsåŒæ ·æ”¯æŒè¾“å…¥æˆ–è¾“å‡ºæ–‡ä»¶çš„å…³é”®å­—å®šä¹‰ã€‚è¾“å‡ºæ–‡ä»¶çš„å…³é”®å­—æ˜¯<em>target</em>ï¼Œè¾“å…¥æºæ–‡ä»¶çš„å…³é”®å­—æ˜¯<em>source</em>ï¼Œ å› ä¸ºå…³é”®å­—å·²ç»æŒ‡æ˜äº†è¯¥å‚æ•°çš„å«ä¹‰ï¼Œå› æ­¤å…³é”®å­—çš„é¡ºåºä¸åšè¦æ±‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">src_files = Split(&#x27;main.c file1.c file2.c&#x27;)</span><br><span class="line">Program(source=src_files, target=&#x27;program&#x27;)</span><br></pre></td></tr></table></figure><h3 id="1-5-æ„å»ºå¤šä¸ªå·¥ç¨‹"><a href="#1-5-æ„å»ºå¤šä¸ªå·¥ç¨‹" class="headerlink" title="1.5  æ„å»ºå¤šä¸ªå·¥ç¨‹"></a>1.5  æ„å»ºå¤šä¸ªå·¥ç¨‹</h3><p>ç”¨ä¸€ä¸ªSConstructæ–‡ä»¶ï¼Œæ„å»ºå¤šä¸ªå·¥ç¨‹ï¼Œæœ€ç®€å•çš„æ–¹å¼æ˜¯è°ƒç”¨Programå¤šæ¬¡æ„å»ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Program(&#x27;foo.c&#x27;)</span><br><span class="line">Program(&#x27;bar&#x27;, [&#x27;bar1.c&#x27;, &#x27;bar2.c&#x27;])</span><br></pre></td></tr></table></figure><h3 id="1-6-å¤šå·¥ç¨‹ç¼–è¯‘å…±äº«ä¸­é—´æ–‡ä»¶"><a href="#1-6-å¤šå·¥ç¨‹ç¼–è¯‘å…±äº«ä¸­é—´æ–‡ä»¶" class="headerlink" title="1.6 å¤šå·¥ç¨‹ç¼–è¯‘å…±äº«ä¸­é—´æ–‡ä»¶"></a>1.6 å¤šå·¥ç¨‹ç¼–è¯‘å…±äº«ä¸­é—´æ–‡ä»¶</h3><p>   åŒä¸€ä»½æºç æ–‡ä»¶å¯¹åº”å¤šä¸ªå·¥ç¨‹ï¼Œæœ€ç›´æ¥çš„æ–¹å¼æ˜¯æ¯ä¸ªå·¥ç¨‹éƒ½åŠ å…¥è¯¥æºç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Program(Split(<span class="string">&#x27;foo.c common1.c common2.c&#x27;</span>))</span><br><span class="line">Program(<span class="string">&#x27;bar&#x27;</span>, Split(<span class="string">&#x27;bar1.c bar2.c common1.c common2.c&#x27;</span>))</span><br></pre></td></tr></table></figure><p>   å½“é‡‡ç”¨è¿™ç§æ–¹å¼æ„å»ºæ—¶ï¼ŒSConsä¼šæ„è¯†åˆ°common1.cå’Œcommon2.cçš„å¤ç”¨ï¼Œå› æ­¤ä¼šå°†å…¶ä»…ä»…ç¼–è¯‘ä¸€ä»½ä¸­é—´æ–‡ä»¶ï¼Œå°½ç®¡ç”Ÿæˆçš„ç›®æ ‡æ–‡ä»¶åˆ†åˆ«é“¾æ¥åˆ°å„è‡ªçš„ä¸­é—´æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">% scons -Q</span><br><span class="line">cc -o bar1.o -c bar1.c</span><br><span class="line">cc -o bar2.o -c bar2.c</span><br><span class="line">cc -o common1.o -c common1.c</span><br><span class="line">cc -o common2.o -c common2.c</span><br><span class="line">cc -o bar bar1.o bar2.o common1.o common2.o</span><br><span class="line">cc -o foo.o -c foo.c</span><br><span class="line">cc -o foo foo.o common1.o common2.o</span><br></pre></td></tr></table></figure><h3 id="1-7-æ¸…ç†æ„å»ºçš„å·¥ç¨‹"><a href="#1-7-æ¸…ç†æ„å»ºçš„å·¥ç¨‹" class="headerlink" title="1.7 æ¸…ç†æ„å»ºçš„å·¥ç¨‹"></a>1.7 æ¸…ç†æ„å»ºçš„å·¥ç¨‹</h3><p>é‡‡ç”¨SConsæˆ‘ä»¬ä¸éœ€è¦å¢åŠ ç‰¹æ®Šçš„æŒ‡ä»¤åœ¨æ„å»ºåæ‰§è¡Œæ¸…é™¤æ“ä½œï¼Œç›¸åï¼Œä½ å¯ä»¥ç®€å•ä½¿ç”¨-cæˆ–è€…â€“cleané€‰é¡¹ï¼Œæ­¤æ—¶SConsä¼šè‡ªåŠ¨åˆ é™¤æ„å»ºçš„æ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&gt; scons</span><br><span class="line">scons: Reading SConscript files ...</span><br><span class="line">scons: done reading SConscript files.</span><br><span class="line">scons: Building targets ...</span><br><span class="line">cc -o hello.o -c hello.c</span><br><span class="line">cc -o hello hello.o</span><br><span class="line">scons: done building targets.</span><br><span class="line"></span><br><span class="line">&gt; scons -c</span><br><span class="line">scons: Reading SConscript files ...</span><br><span class="line">scons: done reading SConscript files.</span><br><span class="line">scons: Cleaning targets ...</span><br><span class="line">Removed hello.o</span><br><span class="line">Removed hello</span><br><span class="line">scons: done cleaning targets.</span><br></pre></td></tr></table></figure><h2 id="2-Objectæ„å»ºä¸­é—´æ–‡ä»¶"><a href="#2-Objectæ„å»ºä¸­é—´æ–‡ä»¶" class="headerlink" title="2. Objectæ„å»ºä¸­é—´æ–‡ä»¶"></a>2. Objectæ„å»ºä¸­é—´æ–‡ä»¶</h2><p>Objectç”¨äºæ„å»ºä¸­é—´æ–‡ä»¶ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Object(<span class="string">&#x27;hello.c&#x27;</span>)</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œsconså‘½ä»¤ï¼Œå»æ„å»ºæ•´ä¸ªå·¥ç¨‹ï¼Œåœ¨LINUXå·¥ç¨‹ä¸­è¿™å°†ä¼šä»…ä»…æ„å»ºhello.oã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt; scons</span><br><span class="line">scons: Reading SConscript files ...</span><br><span class="line">scons: <span class="keyword">done</span> reading SConscript files.</span><br><span class="line">scons: Building targets ...</span><br><span class="line">cc -o hello.o -c hello.c</span><br><span class="line">scons: <span class="keyword">done</span> building targets.</span><br></pre></td></tr></table></figure><h2 id="3-Libaryç¼–è¯‘åº“æ–‡ä»¶"><a href="#3-Libaryç¼–è¯‘åº“æ–‡ä»¶" class="headerlink" title="3. Libaryç¼–è¯‘åº“æ–‡ä»¶"></a>3. Libaryç¼–è¯‘åº“æ–‡ä»¶</h2><p>ä¸Programæ ¼å¼ç›¸åŒ</p><h3 id="3-1-å…¨éƒ¨é€šè¿‡æºæ–‡ä»¶æ¥ç¼–è¯‘åº“"><a href="#3-1-å…¨éƒ¨é€šè¿‡æºæ–‡ä»¶æ¥ç¼–è¯‘åº“" class="headerlink" title="3.1 å…¨éƒ¨é€šè¿‡æºæ–‡ä»¶æ¥ç¼–è¯‘åº“"></a>3.1 å…¨éƒ¨é€šè¿‡<code>æºæ–‡ä»¶</code>æ¥ç¼–è¯‘åº“</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Library(<span class="string">&#x27;foo&#x27;</span>, [<span class="string">&#x27;f1.c&#x27;</span>, <span class="string">&#x27;f2.c&#x27;</span>, <span class="string">&#x27;f3.c&#x27;</span>])</span><br></pre></td></tr></table></figure><p>SConsä¼šè‡ªåŠ¨æ ¹æ®ç³»ç»Ÿæ¥åˆ›å»ºåˆé€‚çš„åº“æ–‡ä»¶å‰ç¼€å’Œåç¼€ï¼Œå› æ­¤åœ¨Linuxç³»ç»Ÿä¸Šï¼Œä¸Šè¿°ç¤ºä¾‹å°†ä¼šæ„å»ºä»¥ä¸‹å†…å®¹ï¼š</p><p>SConsä¼šè‡ªåŠ¨ç»™åº“æ–‡ä»¶åŠ å…¥å‰ç¼€å’Œåç¼€ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt; scons -Q</span><br><span class="line">cc -o f1.o -c f1.c</span><br><span class="line">cc -o f2.o -c f2.c</span><br><span class="line">cc -o f3.o -c f3.c</span><br><span class="line">ar rc libfoo.a f1.o f2.o f3.o</span><br><span class="line">ranlib libfoo.a</span><br></pre></td></tr></table></figure><p>å¦‚æœä¸ç‰¹åˆ«æŒ‡å®šç›®æ ‡åº“æ–‡ä»¶åç§°ï¼ŒSConså°†ä¼šä»æºæ–‡ä»¶åˆ—è¡¨ä¸­é€‰æ‹©ç¬¬ä¸€ä¸ªä½œä¸ºåº“æ–‡ä»¶åç§°ã€‚</p><h3 id="3-2-é€šè¿‡ä¸­é—´æ–‡ä»¶æˆ–æºæ–‡ä»¶å’Œä¸­é—´æ–‡ä»¶æ¥ç¼–è¯‘åº“"><a href="#3-2-é€šè¿‡ä¸­é—´æ–‡ä»¶æˆ–æºæ–‡ä»¶å’Œä¸­é—´æ–‡ä»¶æ¥ç¼–è¯‘åº“" class="headerlink" title="3.2 é€šè¿‡ä¸­é—´æ–‡ä»¶æˆ–æºæ–‡ä»¶å’Œä¸­é—´æ–‡ä»¶æ¥ç¼–è¯‘åº“"></a>3.2 é€šè¿‡<code>ä¸­é—´æ–‡ä»¶</code>æˆ–<code>æºæ–‡ä»¶å’Œä¸­é—´æ–‡ä»¶</code>æ¥ç¼–è¯‘åº“</h3><p>ä¸Šè¿°ç¤ºä¾‹ä»‹ç»äº†é€šè¿‡æºæ–‡ä»¶åˆ—è¡¨æ„å»ºåº“æ–‡ä»¶ï¼ŒSConsåŒæ ·ä¹Ÿæ”¯æŒé€šè¿‡ä¸­é—´æ–‡ä»¶æ„å»ºï¼Œæˆ–è€…æºæ–‡ä»¶å’Œä¸­é—´æ–‡ä»¶æ··åœ¨ä¸€èµ·æ„å»ºä¹Ÿå¯ä»¥ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Library(<span class="string">&#x27;foo&#x27;</span>, [<span class="string">&#x27;f1.c&#x27;</span>, <span class="string">&#x27;f2.o&#x27;</span>, <span class="string">&#x27;f3.c&#x27;</span>, <span class="string">&#x27;f4.o&#x27;</span>])</span><br><span class="line">Library(<span class="string">&#x27;foo&#x27;</span>, [<span class="string">&#x27;f1.c&#x27;</span>, <span class="string">&#x27;f2.o&#x27;</span>, <span class="string">&#x27;f3.c&#x27;</span>, <span class="string">&#x27;f4.o&#x27;</span>])</span><br></pre></td></tr></table></figure><p>   åŒæ—¶SConsä¹Ÿä¼šæ„è¯†åˆ°ï¼Œåªæœ‰æºæ–‡ä»¶æ‰éœ€è¦è¿›ä¸€æ­¥æ„å»ºæˆä¸­é—´æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; scons -Q</span><br><span class="line">cc -o f1.o -c f1.c</span><br><span class="line">cc -o f3.o -c f3.c</span><br><span class="line">ar rc libfoo.a f1.o f2.o f3.o f4.o</span><br><span class="line">ranlib libfoo.a</span><br></pre></td></tr></table></figure><h2 id="4-StaticLibraryç¼–è¯‘é™æ€åº“"><a href="#4-StaticLibraryç¼–è¯‘é™æ€åº“" class="headerlink" title="4. StaticLibraryç¼–è¯‘é™æ€åº“"></a>4. StaticLibraryç¼–è¯‘é™æ€åº“</h2><p> å¯¹äº<strong>Library</strong>å’Œ<strong>StaticLibrary</strong>ï¼Œä»–ä»¬å®Œå…¨ç­‰ä»·ï¼Œæ²¡æœ‰ä»»ä½•åŒºåˆ«ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">StaticLibrary(&#x27;foo&#x27;, [&#x27;f1.c&#x27;, &#x27;f2.c&#x27;, &#x27;f3.c&#x27;])</span><br></pre></td></tr></table></figure><h2 id="5-SharedLibraryæ„å»ºåŠ¨æ€åº“æ–‡ä»¶"><a href="#5-SharedLibraryæ„å»ºåŠ¨æ€åº“æ–‡ä»¶" class="headerlink" title="5. SharedLibraryæ„å»ºåŠ¨æ€åº“æ–‡ä»¶"></a>5. SharedLibraryæ„å»ºåŠ¨æ€åº“æ–‡ä»¶</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SharedLibrary(&#x27;foo&#x27;, [&#x27;f1.c&#x27;, &#x27;f2.c&#x27;, &#x27;f3.c&#x27;])</span><br></pre></td></tr></table></figure><p>Linuxç³»ç»Ÿä¸Šè¾“å‡ºä¸ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; scons -Q</span><br><span class="line">cc -o f1.os -c f1.c</span><br><span class="line">cc -o f2.os -c f2.c</span><br><span class="line">cc -o f3.os -c f3.c</span><br><span class="line">cc -o libfoo.so -shared f1.os f2.os f3.os</span><br></pre></td></tr></table></figure><h1 id="äºŒã€é“¾æ¥åº“æ–‡ä»¶"><a href="#äºŒã€é“¾æ¥åº“æ–‡ä»¶" class="headerlink" title="äºŒã€é“¾æ¥åº“æ–‡ä»¶"></a>äºŒã€é“¾æ¥åº“æ–‡ä»¶</h1><h2 id="1-LIBSå…³é”®å­—æŒ‡æ˜åº“æ–‡ä»¶"><a href="#1-LIBSå…³é”®å­—æŒ‡æ˜åº“æ–‡ä»¶" class="headerlink" title="1. LIBSå…³é”®å­—æŒ‡æ˜åº“æ–‡ä»¶"></a>1. LIBSå…³é”®å­—æŒ‡æ˜åº“æ–‡ä»¶</h2><p>é€šè¿‡æŒ‡æ˜<strong>LIBS</strong>å˜é‡å…³é”®å­—ï¼Œæ¥æŒ‡å®šéœ€è¦é“¾æ¥çš„åº“æ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Library(&#x27;foo&#x27;, [&#x27;f1.c&#x27;, &#x27;f2.c&#x27;, &#x27;f3.c&#x27;])</span><br><span class="line">Program(&#x27;prog.c&#x27;, LIBS=[&#x27;foo&#x27;, &#x27;bar&#x27;], LIBPATH=&#x27;.&#x27;)</span><br></pre></td></tr></table></figure><p>ä¸éœ€è¦ç‰¹åˆ«å£°æ˜åº“æ–‡ä»¶çš„å‰ç¼€ï¼ˆå¦‚libï¼‰ï¼Œæˆ–è€…åç¼€ï¼ˆå¦‚.aæˆ–.libï¼‰ï¼ŒSConsä¼šè‡ªåŠ¨æ ¹æ®ç³»ç»Ÿæ¥æŸ¥æ‰¾ç›¸å…³å‰ç¼€æˆ–åç¼€ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt; scons -Q</span><br><span class="line">cc -o f1.o -c f1.c</span><br><span class="line">cc -o f2.o -c f2.c</span><br><span class="line">cc -o f3.o -c f3.c</span><br><span class="line">ar rc libfoo.a f1.o f2.o f3.o</span><br><span class="line">ranlib libfoo.a</span><br><span class="line">cc -o prog.o -c prog.c</span><br><span class="line">cc -o prog prog.o -L. -lfoo -lbar</span><br></pre></td></tr></table></figure><h2 id="2-LIBPATHå…³é”®å­—æŒ‡æ˜åº“æ–‡ä»¶çš„æŸ¥æ‰¾è·¯å¾„"><a href="#2-LIBPATHå…³é”®å­—æŒ‡æ˜åº“æ–‡ä»¶çš„æŸ¥æ‰¾è·¯å¾„" class="headerlink" title="2.LIBPATHå…³é”®å­—æŒ‡æ˜åº“æ–‡ä»¶çš„æŸ¥æ‰¾è·¯å¾„"></a>2.LIBPATHå…³é”®å­—æŒ‡æ˜åº“æ–‡ä»¶çš„æŸ¥æ‰¾è·¯å¾„</h2><p>é€šè¿‡æŒ‡æ˜<strong>LIBPATH</strong>å˜é‡å…³é”®å­—ï¼Œæ¥æŒ‡å®šåº“æ–‡ä»¶çš„æŸ¥æ‰¾è·¯å¾„</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿æ¥å™¨åªä¼šåœ¨ç³»ç»Ÿè·¯å¾„ä¸­æŸ¥æ‰¾åº“æ–‡ä»¶ï¼ŒSConså¯ä»¥é€šè¿‡ç”¨æˆ·æŒ‡å®šçš„LIBPATHå˜é‡ï¼Œæ¥æŸ¥æ‰¾ç”¨æˆ·å®šä¹‰è·¯å¾„ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Program(<span class="string">&#x27;prog.c&#x27;</span>, LIBS = <span class="string">&#x27;m&#x27;</span>,</span><br><span class="line">                  LIBPATH = [<span class="string">&#x27;/usr/lib&#x27;</span>, <span class="string">&#x27;usr/local/lib&#x27;</span>])</span><br></pre></td></tr></table></figure><p>Linux ä¸­è¾“å‡ºå¦‚ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; scons -Q</span><br><span class="line">cc -o prog.o -c prog.c</span><br><span class="line">cc -o prog prog.o -L/usr/lib -L/usr/local/lib -lm</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæ¨èä½¿ç”¨pythonçš„åˆ—è¡¨ï¼ˆlistï¼‰ï¼Œå› ä¸ºpythonæ˜¯è·¨å¹³å°çš„ï¼Œè¿™è¦è¿ç§»èµ·æ¥æ¯”è¾ƒæ–¹ä¾¿ã€‚å½“ç„¶æ‚¨ä¹Ÿå¯ä»¥å°†æœç´¢è·¯å¾„æ”¾åˆ°ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œé‡‡ç”¨ç³»ç»ŸæŒ‡å®šçš„åˆ†å‰²ç¬¦åˆ†å¼€ï¼Œå¦‚POSIXç³»ç»Ÿä¸­é‡‡ç”¨å†’å·ï¼ŒWindowsç³»ç»Ÿä¸­é‡‡ç”¨åˆ†å·ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># POSIX</span></span><br><span class="line">LIBPATH = <span class="string">&#x27;/usr/lib:/usr/local/lib&#x27;</span></span><br><span class="line"><span class="comment"># Windows</span></span><br><span class="line">LIBPATH = <span class="string">&#x27;C:\\lib;D:\\lib&#x27;</span>  </span><br></pre></td></tr></table></figure><p>pythonåœ¨Windowsè·¯å¾„ä¸­è¦æ±‚é‡‡ç”¨<strong>åæ–œæ </strong>è½¬ä¹‰ç¬¦</p><h1 id="ä¸‰ã€èŠ‚ç‚¹å¯¹è±¡"><a href="#ä¸‰ã€èŠ‚ç‚¹å¯¹è±¡" class="headerlink" title="ä¸‰ã€èŠ‚ç‚¹å¯¹è±¡"></a>ä¸‰ã€èŠ‚ç‚¹å¯¹è±¡</h1><p>åœ¨SConså†…éƒ¨ï¼Œæ‰€æœ‰çš„æ–‡ä»¶å’Œè·¯å¾„éƒ½è¢«çœ‹ä½œæ˜¯èŠ‚ç‚¹ï¼ˆ<em>Nodes</em>ï¼‰ï¼Œè¿™ç§æ–¹å¼è®©SConscriptè„šæœ¬æ›´åŠ ä¾¿äº<strong>è¿ç§»</strong>å’Œ<strong>é˜…è¯»</strong>ã€‚</p><h2 id="1-è·¨å¹³å°æ—¶å‡ºç°çš„é—®é¢˜"><a href="#1-è·¨å¹³å°æ—¶å‡ºç°çš„é—®é¢˜" class="headerlink" title="1. è·¨å¹³å°æ—¶å‡ºç°çš„é—®é¢˜"></a>1. è·¨å¹³å°æ—¶å‡ºç°çš„é—®é¢˜</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Object(&#x27;hello.c&#x27;, CCFLAGS=&#x27;-DHELLO&#x27;)</span><br><span class="line">Object(&#x27;goodbye.c&#x27;, CCFLAGS=&#x27;-DGOODBYE&#x27;)</span><br><span class="line">Program([&#x27;hello.o&#x27;, &#x27;goodbye.o&#x27;])</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šä»£ç åœ¨linuxä¸Šæ˜¯å¯ä»¥æ­£å¸¸ç¼–è¯‘çš„ï¼Œä½†åœ¨windowsä¸Šä¸å¯ä»¥ï¼Œå› ä¸ºåœ¨Windowså¹³å°ä¸Šï¼Œç”Ÿæˆçš„ä¸­é—´æ–‡ä»¶æ˜¯hello.objå’Œgoodbye.objï¼Œè€Œéhello.oå’Œgoodby.oã€‚</p><p>è¾ƒå¥½çš„å¤„ç†æ–¹å¼æ˜¯å°†<strong>Object</strong>çš„æ„å»ºè¾“å‡ºå­˜å…¥å˜é‡ä¸­ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥ä¸æ–­åœ¨åˆ—è¡¨åè¿½åŠ æ–°çš„å†…å®¹ï¼Œå°†å…¶ä½œä¸º<strong>Program</strong>çš„è¾“å…¥ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hello_list = Object(&#x27;hello.c&#x27;, CCFLAGS=&#x27;-DHELLO&#x27;)</span><br><span class="line">goodbye_list = Object(&#x27;goodbye.c&#x27;, CCFLAGS=&#x27;-DGOODBYE&#x27;)</span><br><span class="line">Program(hello_list + goodbye_list)</span><br></pre></td></tr></table></figure><p>è¿™æ ·SConstructè„šæœ¬çš„è·¨å¹³å°æ€§å¯ä»¥å¾—åˆ°ä¿è¯ï¼Œå…¶åœ¨Linuxå¹³å°è¾“å‡ºå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; scons -Q</span><br><span class="line">cc -o goodbye.o -c -DGOODBYE goodbye.c</span><br><span class="line">cc -o hello.o -c -DHELLO hello.c</span><br><span class="line">cc -o hello hello.o goodbye.o</span><br></pre></td></tr></table></figure><p>   Windowså¹³å°è¾“å‡ºå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">C:\&gt;scons -Q</span><br><span class="line">cl /Fogoodbye.obj /c goodbye.c -DGOODBYE</span><br><span class="line">cl /Fohello.obj /c hello.c -DHELLO</span><br><span class="line"><span class="built_in">link</span> /nologo /OUT:hello.exe hello.obj goodbye.obj</span><br><span class="line">embedManifestExeCheck(target, <span class="built_in">source</span>, <span class="built_in">env</span>)</span><br></pre></td></tr></table></figure><h2 id="2-æ„å»ºæ–¹æ³•è¿”å›ç›®æ ‡èŠ‚ç‚¹åˆ—è¡¨"><a href="#2-æ„å»ºæ–¹æ³•è¿”å›ç›®æ ‡èŠ‚ç‚¹åˆ—è¡¨" class="headerlink" title="2. æ„å»ºæ–¹æ³•è¿”å›ç›®æ ‡èŠ‚ç‚¹åˆ—è¡¨"></a>2. æ„å»ºæ–¹æ³•è¿”å›ç›®æ ‡èŠ‚ç‚¹åˆ—è¡¨</h2><p>æ‰€æœ‰çš„æ„å»ºæ–¹æ³•è¿”å›ä¸€ä¸ªèŠ‚ç‚¹å¯¹è±¡åˆ—è¡¨ï¼Œè¿™äº›èŠ‚ç‚¹å¯ä»¥è¢«ç”¨ä½œå…¶ä»–æ„å»ºæ–¹æ³•çš„å‚æ•°ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">object_list = Object(&#x27;hello.c&#x27;)</span><br><span class="line">program_list = Program(object_list)</span><br><span class="line">print(type(object_list))</span><br><span class="line">print(object_list)</span><br></pre></td></tr></table></figure><p>linuxå¹³å°è¾“å‡ºå¦‚ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; scons -Q</span><br><span class="line">&lt;class &#x27;SCons.Node.NodeList&#x27;&gt;</span><br><span class="line">[&#x27;hello.o&#x27;]</span><br><span class="line">The object file is: hello.o</span><br><span class="line">The program file is: hello</span><br></pre></td></tr></table></figure><h2 id="3-Fileåˆ›å»ºæ–‡ä»¶èŠ‚ç‚¹-Diråˆ›å»ºè·¯å¾„èŠ‚ç‚¹"><a href="#3-Fileåˆ›å»ºæ–‡ä»¶èŠ‚ç‚¹-Diråˆ›å»ºè·¯å¾„èŠ‚ç‚¹" class="headerlink" title="3. Fileåˆ›å»ºæ–‡ä»¶èŠ‚ç‚¹ &amp; Diråˆ›å»ºè·¯å¾„èŠ‚ç‚¹"></a>3. Fileåˆ›å»ºæ–‡ä»¶èŠ‚ç‚¹ &amp; Diråˆ›å»ºè·¯å¾„èŠ‚ç‚¹</h2><p>SConsæ˜ç¡®äº†æ–‡ä»¶èŠ‚ç‚¹å’Œè·¯å¾„èŠ‚ç‚¹çš„ä¸åŒï¼ŒSConsæ”¯æŒ<strong>File</strong> å’Œ<strong>Dir</strong>ä¸¤ä¸ªå‡½æ•°ï¼Œç”¨äºè¿”å›æ–‡ä»¶å’Œè·¯å¾„èŠ‚ç‚¹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">hello_c = File(&#x27;hello.c&#x27;)</span><br><span class="line">Program(hello_c)</span><br><span class="line"></span><br><span class="line">classes = Dir(&#x27;classes&#x27;)</span><br><span class="line">Java(classes, &#x27;src&#x27;)</span><br></pre></td></tr></table></figure><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œæ‚¨ä¸éœ€è¦æ‰‹åŠ¨è°ƒç”¨Fileæˆ–Dirï¼Œå› ä¸ºè°ƒç”¨æ„å»ºæ–¹æ³•æ—¶ï¼Œä¼šè‡ªåŠ¨å°†è¾“å…¥ä½œä¸ºæ–‡ä»¶æˆ–ç›®å½•çš„åç§°ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºä¸€ä¸ªNodeå¯¹è±¡ã€‚</p><p>æœ‰æ—¶å¯¹è±¡å¯èƒ½æ˜¯æ–‡ä»¶ä¹Ÿå¯èƒ½æ˜¯ä¸€ä¸ªè·¯å¾„ï¼Œæ­¤æ—¶SConsæä¾›äº†ä¸€ä¸ª<strong>Entry</strong>å‡½æ•°ï¼Œç”¨äºè¿”å›ä¸€ä¸ªæ–‡ä»¶èŠ‚ç‚¹æˆ–è€…è·¯å¾„èŠ‚ç‚¹ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xyzzy = Entry(&#x27;xyzzy&#x27;)</span><br></pre></td></tr></table></figure><h2 id="4-æ‰“å°èŠ‚ç‚¹å¯¹è±¡åç§°"><a href="#4-æ‰“å°èŠ‚ç‚¹å¯¹è±¡åç§°" class="headerlink" title="4. æ‰“å°èŠ‚ç‚¹å¯¹è±¡åç§°"></a>4. æ‰“å°èŠ‚ç‚¹å¯¹è±¡åç§°</h2><p>å¤§å¤šæ•°æƒ…å†µä¸‹æˆ‘ä»¬éœ€è¦è°ƒç”¨èŠ‚ç‚¹å»æ‰“å°å…¶å†…éƒ¨çš„æ–‡ä»¶åç§°ï¼Œä½†æ˜¯è¯·æ³¨æ„<strong>æ­¤æ—¶çš„å¯¹è±¡æ˜¯èŠ‚ç‚¹åˆ—è¡¨ï¼Œè€Œéæ–‡ä»¶å¯¹è±¡</strong>ï¼Œå› æ­¤æ‰“å°çš„æ—¶å€™éœ€è¦å¢åŠ <strong>ä¸‹æ ‡è®¿é—®</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">object_list = Object(<span class="string">&#x27;hello.c&#x27;</span>)</span><br><span class="line">program_list = Program(object_list)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;The object file is: %s&quot;</span>%object_list[<span class="number">0</span>])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;The program file is: %s&quot;</span>%program_list[<span class="number">0</span>])</span><br></pre></td></tr></table></figure><p>   åœ¨Linuxç³»ç»Ÿè¾“å‡ºå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; scons -Q</span><br><span class="line">The object files is: hello.o</span><br><span class="line">The program file is: hello</span><br><span class="line">cc - o hello.o -c hello.c</span><br><span class="line">cc -o hello hello.o</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œobject_list[0]ä»åˆ—è¡¨ä¸­æå–äº†ä¸€ä¸ªå®é™…çš„Nodeå¯¹è±¡ï¼ŒPythonçš„printè¯­å¥å°†è¯¥å¯¹è±¡è½¬æ¢ä¸ºè¦æ‰“å°çš„å­—ç¬¦ä¸²ã€‚</p><h2 id="5-èŠ‚ç‚¹å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²"><a href="#5-èŠ‚ç‚¹å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²" class="headerlink" title="5. èŠ‚ç‚¹å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²"></a>5. èŠ‚ç‚¹å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²</h2><p>å¦‚ä¸ŠèŠ‚ä»‹ç»æ‰€ç¤ºï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æ‰“å°èŠ‚ç‚¹çš„æ–‡ä»¶ä¿¡æ¯ï¼Œä½†æ˜¯å¦‚æœæ‚¨æƒ³å¾—åˆ°ä¸€ä¸ªèŠ‚ç‚¹å­—ç¬¦ä¸²ï¼Œè€Œéåˆ—è¡¨ï¼Œåˆ™å¯ä»¥é€šè¿‡pythonå†…ç½®çš„<strong><em>str</em>å‡½æ•°</strong>å®ç°ã€‚ä¸¾ä¾‹è€Œè¨€ï¼Œå¦‚æœæ‚¨å¸Œæœ›ä½¿ç”¨Pythonçš„<em>os.path.exists</em>æ¥ç¡®è®¤æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œæ‚¨å¯ä»¥é‡‡ç”¨å¦‚ä¸‹æ–¹å¼ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os.path</span><br><span class="line">program_list = Program(<span class="string">&#x27;hello.c&#x27;</span>)</span><br><span class="line">program_name = <span class="built_in">str</span>(program_list[<span class="number">0</span>])</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(program_name):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;%s doses not exist!&quot;</span>%program_name)</span><br></pre></td></tr></table></figure><p>   æ­¤æ—¶ï¼Œåœ¨Linuxç³»ç»Ÿä¸­å°†ä¼šå¾—åˆ°å¦‚ä¸‹è¾“å‡ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; scons -Q</span><br><span class="line">hello does not exist!</span><br><span class="line">cc -o hello.o -c hello.c</span><br><span class="line">cc - o hello hello.o</span><br></pre></td></tr></table></figure><h1 id="å››ã€åˆ¤æ–­æ˜¯å¦éœ€è¦é‡æ–°ç¼–è¯‘"><a href="#å››ã€åˆ¤æ–­æ˜¯å¦éœ€è¦é‡æ–°ç¼–è¯‘" class="headerlink" title="å››ã€åˆ¤æ–­æ˜¯å¦éœ€è¦é‡æ–°ç¼–è¯‘"></a>å››ã€åˆ¤æ–­æ˜¯å¦éœ€è¦é‡æ–°ç¼–è¯‘</h1><p>SConså¾ˆæ™ºèƒ½ï¼Œåªä¼šç¼–è¯‘éœ€è¦ç¼–è¯‘çš„å†…å®¹ã€‚æ¯”å¦‚æˆ‘åˆšæ‰§è¡Œå®Œsconsï¼Œå†æ¬¡æ‰§è¡Œï¼Œåˆ™ä¼šæç¤º<code>scons: . is up to date.</code>ã€‚ é‚£ä¹ˆä»–æ˜¯å¦‚ä½•åšåˆ°çš„å‘¢ï¼Ÿä¹Ÿä¸å¤æ‚ï¼Œä¾èµ–ä¸€ä¸ªDeciderçš„æ–¹æ³•ï¼Œä»¥åŠä¸€ä¸ª<code>.sconsign.dblite</code>æ–‡ä»¶ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœæ–‡ä»¶çš„<a href="https://so.csdn.net/so/search?q=md5&spm=1001.2101.3001.7020">md5</a>å€¼æ”¹å˜äº†ï¼Œæ‰ä¼šé‡æ–°ç¼–è¯‘ã€‚æ¯æ¬¡ç¼–è¯‘ï¼ŒSConséƒ½ä¼šæŠŠmd5å­˜èµ·æ¥ï¼Œå†æ¬¡æ‰§è¡Œæ—¶ï¼Œå¦‚æœmd5æ²¡å˜ï¼Œåˆ™ä¸éœ€è¦rebuildã€‚</p><h1 id="äº”ã€è§£æå‘½ä»¤è¡Œé€‰é¡¹"><a href="#äº”ã€è§£æå‘½ä»¤è¡Œé€‰é¡¹" class="headerlink" title="äº”ã€è§£æå‘½ä»¤è¡Œé€‰é¡¹"></a>äº”ã€è§£æå‘½ä»¤è¡Œé€‰é¡¹</h1><h2 id="1-AddOption"><a href="#1-AddOption" class="headerlink" title="1. AddOption"></a>1. AddOption</h2><p>ä½œç”¨ï¼šæ·»åŠ ä¸€é¡¹å‘½ä»¤è¡Œé€‰é¡¹</p><p>ç”¨æ³•ç±»ä¼¼pythonä¸­optparseåº“è§£æå‘½ä»¤è¡Œå‚æ•°çš„æ–¹æ³•<code>add_option</code></p><p><a href="https://blog.csdn.net/lwnylslwnyls/article/details/8199454">https://blog.csdn.net/lwnylslwnyls/article/details/8199454</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">AddOption(</span><br><span class="line">    &#x27;--prefix&#x27;,</span><br><span class="line">    dest=&#x27;prefix&#x27;,</span><br><span class="line">    nargs=1,</span><br><span class="line">    type=&#x27;string&#x27;,</span><br><span class="line">    action=&#x27;store&#x27;,</span><br><span class="line">    metavar=&#x27;DIR&#x27;,</span><br><span class="line">    help=&#x27;installation prefix&#x27;,</span><br><span class="line">)</span><br><span class="line">env = Environment(PREFIX=GetOption(&#x27;prefix&#x27;))</span><br></pre></td></tr></table></figure><p>æ·»åŠ ä»¥ä¸Šå‘½ä»¤è¡Œé€‰é¡¹åï¼Œæ‰§è¡Œscons -håå¯ä»¥çœ‹åˆ°æ·»åŠ çš„é€‰é¡¹è¯´æ˜</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Local Options:</span><br><span class="line">  --prefix=DIR                installation prefix</span><br></pre></td></tr></table></figure><h2 id="2-GetOption"><a href="#2-GetOption" class="headerlink" title="2. GetOption"></a>2. GetOption</h2><p>ä½œç”¨ï¼šè¯»å–ç›¸åº”çš„å‘½ä»¤è¡Œé€‰é¡¹</p><p>é€šè¿‡AddOptionå¾—åˆ°çš„å‘½ä»¤è¡Œå‚æ•°ï¼Œå¯ä»¥é€šè¿‡GetOption(â€˜å‚æ•°åâ€™)æ¥è·å¾—ï¼Œå¦‚ä¸Šä¾‹æ‰€ç¤º</p><h2 id="3-SetOption"><a href="#3-SetOption" class="headerlink" title="3. SetOption"></a>3. SetOption</h2><p>ä½œç”¨ï¼šè®¾ç½®ç›¸åº”çš„å‘½ä»¤è¡Œé€‰é¡¹ã€‚</p><p>é€šè¿‡å‘½ä»¤è¡Œé€‰é¡¹è®¾ç½®çš„å€¼å°†ä¼˜å…ˆäºä½¿ç”¨SetOptionè®¾ç½®çš„å€¼</p><p>SetOptionå…è®¸åœ¨è„šæœ¬ä¸­è®¾ç½®é¡¹ç›®é»˜è®¤å€¼ï¼Œå¹¶é€šè¿‡å‘½ä»¤è¡Œä¸´æ—¶è¦†ç›–å®ƒã€‚SetOptionè°ƒç”¨ä¹Ÿå¯ä»¥æ”¾åœ¨site_init.pyæ–‡ä»¶ä¸­ã€‚</p><h2 id="4-Help"><a href="#4-Help" class="headerlink" title="4. Help"></a>4. Help</h2><p>åœ¨ä¸€ä¸ªå‘½ä»¤ä¸çŸ¥é“æ€ä¹ˆä½¿ç”¨æ—¶ï¼Œä½¿ç”¨ â€“help æ¥è·å–å½“å‰å‘½ä»¤çš„é€‰é¡¹å¸®åŠ©æ˜¯æœ€å¥½çš„æ–¹æ³•ã€‚SCons ä¹Ÿæ˜¯æä¾›äº† help é€‰é¡¹çš„ç¼–å†™ï¼Œå¯ä»¥å¸®åŠ©ç”¨æˆ·ç®€å•çš„åˆ›å»º â€“help çš„è¯­å¥ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Help(&quot;&quot;&quot;</span><br><span class="line">Type: &#x27;scons program&#x27; to build the production program,</span><br><span class="line">&#x27;scons debug&#x27; to build the debug version.</span><br><span class="line">&quot;&quot;&quot;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>scons -hè¾“å‡ºå¦‚ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt; scons -h</span><br><span class="line">scons: Reading SConscript files ...</span><br><span class="line">scons: done reading SConscript files.</span><br><span class="line"></span><br><span class="line">Type: &#x27;scons program&#x27; to build the production program,</span><br><span class="line">&#x27;scons debug&#x27; to build the debug version.</span><br><span class="line"></span><br><span class="line">Use scons -H for help about command-line options.</span><br></pre></td></tr></table></figure><h1 id="å…­ã€site-sconsç›®å½•"><a href="#å…­ã€site-sconsç›®å½•" class="headerlink" title="å…­ã€site_sconsç›®å½•"></a>å…­ã€site_sconsç›®å½•</h1><p>åœ¨sconsè§£æSConscriptæ–‡ä»¶ä¹‹å‰ï¼Œsconså°†é¦–å…ˆåœ¨<code>å„ç§ç³»ç»Ÿç›®å½•</code>ï¼Œ<code>å«æœ‰SConstructæ–‡ä»¶çš„ç›®å½•</code>å’Œ<code>scons çš„å‘½ä»¤è¡Œé€‰é¡¹--site-diræŒ‡å®šçš„ç›®å½•</code>è¿™ä¸‰ç§ç›®å½•ä¸‹å¯»æ‰¾site_sconsç›®å½•ï¼Œå¹¶å°†æ‰¾åˆ°çš„site_sconsç›®å½•æ”¾åˆ°pythonæ¨¡å—çš„æœç´¢è·¯å¾„ä¸­ï¼Œå³sys.pathã€‚è¿™æ ·å°±ä½¿å¾—SConscriptæ–‡ä»¶å¯ä»¥å¼•å…¥site_sconsç›®å½•ä¸‹çš„æ¨¡å—å¹¶ä½¿ç”¨ã€‚</p><p>æ­¤å¤–ï¼Œæœ‰çš„site_sconsç›®å½•è¿˜å¯èƒ½å«æœ‰ <code>site_init.py</code>æ–‡ä»¶å’Œ<code>site_tools</code>ç›®å½•</p><h2 id="1-site-init-py"><a href="#1-site-init-py" class="headerlink" title="1.site_init.py"></a>1.site_init.py</h2><p>site_init.pyæ–‡ä»¶å°†ä¼šå…ˆäºSConscriptæ–‡ä»¶è¢«æ‰§è¡Œ</p><h2 id="2-site-tools"><a href="#2-site-tools" class="headerlink" title="2. site_tools"></a>2. site_tools</h2><p>site_toolsç›®å½•çš„è·¯å¾„ä¼šè¢«é¢„å…ˆæ·»åŠ åˆ°é»˜è®¤å·¥ä½œè·¯å¾„</p><h1 id="ä¸ƒã€SConså†…ç½®å‡½æ•°"><a href="#ä¸ƒã€SConså†…ç½®å‡½æ•°" class="headerlink" title="ä¸ƒã€SConså†…ç½®å‡½æ•°"></a>ä¸ƒã€SConså†…ç½®å‡½æ•°</h1><h2 id="1-GetCurrentDir"><a href="#1-GetCurrentDir" class="headerlink" title="1 GetCurrentDir()"></a>1 GetCurrentDir()</h2><p>è·å–å½“å‰è·¯å¾„ã€‚</p><h2 id="2-Glob"><a href="#2-Glob" class="headerlink" title="2 Glob()"></a>2 Glob()</h2><p>è·å–å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰ C æ–‡ä»¶ã€‚ä¿®æ”¹å‚æ•°çš„å€¼ä¸ºå…¶ä»–åç¼€å°±å¯ä»¥åŒ¹é…å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æŸç±»å‹çš„æ–‡ä»¶ã€‚</p><h2 id="3-Split-str"><a href="#3-Split-str" class="headerlink" title="3 Split(str)"></a>3 Split(str)</h2><p>å°†å­—ç¬¦ä¸² str åˆ†å‰²æˆä¸€ä¸ªåˆ—è¡¨ listã€‚</p><h1 id="å…«ã€ç¯å¢ƒ"><a href="#å…«ã€ç¯å¢ƒ" class="headerlink" title="å…«ã€ç¯å¢ƒ"></a>å…«ã€ç¯å¢ƒ</h1><p>ç¯å¢ƒæ˜¯å¯ä»¥å½±å“ç¨‹åºæ‰§è¡Œæ–¹å¼çš„å€¼çš„é›†åˆï¼ŒSConsåŒºåˆ†äº†ä¸‰ç§ä¸åŒç±»å‹çš„ç¯å¢ƒï¼Œè¿™äº›ç¯å¢ƒéƒ½å¯èƒ½ä¼šå½±å“SConsæœ¬èº«çš„è¡Œä¸ºã€å®ƒæ‰§è¡Œçš„ç¼–è¯‘å™¨ä»¥åŠå…¶ä»–å·¥å…·ã€‚</p><h2 id="1-å¤–éƒ¨ç¯å¢ƒ-External-Environment"><a href="#1-å¤–éƒ¨ç¯å¢ƒ-External-Environment" class="headerlink" title="1. å¤–éƒ¨ç¯å¢ƒ External Environment"></a>1. å¤–éƒ¨ç¯å¢ƒ External Environment</h2><p>å¤–éƒ¨ç¯å¢ƒæ˜¯ç”¨æˆ·è¿è¡ŒSConsæ—¶ç”¨æˆ·ç¯å¢ƒä¸­çš„ä¸€ç»„å˜é‡ã€‚è¿™äº›å˜é‡ä¸æ˜¯SConsæ„å»ºçš„è‡ªåŠ¨ç»„æˆéƒ¨åˆ†ï¼Œä½†åœ¨éœ€è¦æ—¶å¯ä»¥è¿›è¡Œæ£€æŸ¥ã€‚</p><p>å¤–éƒ¨ç¯å¢ƒå³ä¸ºPython ä¸­osæ¨¡å—çš„environå­—å…¸ï¼Œå®ƒæä¾›äº†ç”¨æˆ·åœ¨æ‰§è¡ŒSConsæ—¶æœ‰æ•ˆçš„å¤–éƒ¨ç¯å¢ƒå˜é‡è®¾ç½®ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import os</span><br><span class="line">print(&quot;Shell is&quot;, os.environ[&#x27;SHELL&#x27;])</span><br></pre></td></tr></table></figure><p><strong>os.environ æ˜¯ä¸€ä¸ªå­—å…¸ï¼Œæ˜¯ç¯å¢ƒå˜é‡çš„å­—å…¸</strong>ï¼Œç¯å¢ƒå˜é‡æ˜¯ç¨‹åºå’Œæ“ä½œç³»ç»Ÿä¹‹é—´çš„é€šä¿¡æ–¹å¼</p><p>å¸¸è§ key å­—æ®µ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">windowsï¼š</span><br><span class="line">os.environ[&#x27;HOMEPATH&#x27;]:å½“å‰ç”¨æˆ·ä¸»ç›®å½•ã€‚</span><br><span class="line">os.environ[&#x27;TEMP&#x27;]:ä¸´æ—¶ç›®å½•è·¯å¾„ã€‚</span><br><span class="line">os.environ[&quot;PATHEXT&quot;]:å¯æ‰§è¡Œæ–‡ä»¶ã€‚</span><br><span class="line">os.environ[&#x27;SYSTEMROOT&#x27;]:ç³»ç»Ÿä¸»ç›®å½•ã€‚</span><br><span class="line">os.environ[&#x27;LOGONSERVER&#x27;]:æœºå™¨åã€‚</span><br><span class="line">os.environ[&#x27;PROMPT&#x27;]:è®¾ç½®æç¤ºç¬¦ã€‚</span><br><span class="line"></span><br><span class="line">linuxï¼š</span><br><span class="line">os.environ[&#x27;USER&#x27;]:å½“å‰ä½¿ç”¨ç”¨æˆ·ã€‚</span><br><span class="line">os.environ[&#x27;LC_COLLATE&#x27;]:è·¯å¾„æ‰©å±•çš„ç»“æœæ’åºæ—¶çš„å­—æ¯é¡ºåºã€‚</span><br><span class="line">os.environ[&#x27;SHELL&#x27;]:ä½¿ç”¨shellçš„ç±»å‹ã€‚</span><br><span class="line">os.environ[&#x27;LAN&#x27;]:ä½¿ç”¨çš„è¯­è¨€ã€‚</span><br><span class="line">os.environ[&#x27;SSH_AUTH_SOCK&#x27;]:sshçš„æ‰§è¡Œè·¯å¾„ã€‚</span><br></pre></td></tr></table></figure><h2 id="2-æ„é€ ç¯å¢ƒ-Construction-Environment"><a href="#2-æ„é€ ç¯å¢ƒ-Construction-Environment" class="headerlink" title="2. æ„é€ ç¯å¢ƒ Construction Environment"></a>2. æ„é€ ç¯å¢ƒ Construction Environment</h2><p>æ„é€ ç¯å¢ƒæ˜¯åœ¨SConscriptæ–‡ä»¶ä¸­åˆ›å»ºçš„ä¸€ä¸ªä¸åŒå¯¹è±¡ï¼Œå®ƒåŒ…å«çš„å€¼ä¼šå½±å“SConså¦‚ä½•å†³å®šä½¿ç”¨ä»€ä¹ˆæ“ä½œæ¥æ„å»ºç›®æ ‡ï¼Œç”šè‡³å®šä¹‰åº”è¯¥ä»å“ªäº›æºæ„å»ºå“ªäº›ç›®æ ‡ã€‚SConsæœ€å¼ºå¤§çš„åŠŸèƒ½ä¹‹ä¸€æ˜¯èƒ½å¤Ÿåˆ›å»ºå¤šä¸ªæ„é€ ç¯å¢ƒï¼ŒåŒ…æ‹¬ä»ç°æœ‰æ„é€ ç¯å¢ƒå…‹éš†æ–°çš„è‡ªå®šä¹‰æ„é€ ç¯å¢ƒçš„èƒ½åŠ›ã€‚</p><p>æ„é€ ç¯å¢ƒæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒæœ‰è®¸å¤šç›¸å…³çš„æ„é€ å˜é‡ï¼Œæ¯ä¸ªå˜é‡éƒ½æœ‰ä¸€ä¸ªåç§°å’Œä¸€ä¸ªå€¼ï¼Œå°±åƒå­—å…¸ä¸€æ ·ã€‚</p><h3 id="2-1-è®¾ç½®ç¯å¢ƒæ„é€ å˜é‡"><a href="#2-1-è®¾ç½®ç¯å¢ƒæ„é€ å˜é‡" class="headerlink" title="2.1 è®¾ç½®ç¯å¢ƒæ„é€ å˜é‡"></a>2.1 è®¾ç½®ç¯å¢ƒæ„é€ å˜é‡</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># ç”±Environment()æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ„é€ ç¯å¢ƒå¯¹è±¡</span><br><span class="line">env = Environment()</span><br><span class="line"># é»˜è®¤æƒ…å†µä¸‹ï¼ŒSConsä½¿ç”¨ä¸€ç»„é€‚ç”¨äºå½“å‰å¹³å°çš„æ„å»ºå™¨æ–¹æ³•å’Œæ„å»ºå˜é‡åˆå§‹åŒ–æ¯ä¸ªæ–°çš„æ„é€ ç¯å¢ƒ</span><br><span class="line"># åˆå§‹åŒ–æ„é€ ç¯å¢ƒæ—¶ï¼Œå¯ä»¥è®¾ç½®ç¯å¢ƒæ„é€ å˜é‡çš„å€¼ï¼Œä»¥æ§åˆ¶ç¨‹åºçš„ç”Ÿæˆæ–¹å¼ã€‚</span><br><span class="line">env = Environment(CC=&#x27;gcc&#x27;, CCFLAGS=&#x27;-O2&#x27;)</span><br><span class="line">env.Program(&#x27;foo.c&#x27;)</span><br></pre></td></tr></table></figure><p>ç”¨æˆ·å·²æ˜ç¡®æŒ‡å®šä½¿ç”¨GNU Cç¼–è¯‘å™¨gccï¼Œå¹¶ä¸”åœ¨ç¼–è¯‘å¯¹è±¡æ–‡ä»¶æ—¶åº”ä½¿ç”¨-O2ï¼ˆä¼˜åŒ–çº§åˆ«2ï¼‰æ ‡å¿—ã€‚æ¢å¥è¯è¯´ï¼Œ$CCå’Œ$CCFLAGSçš„æ˜¾å¼åˆå§‹åŒ–ä¼šè¦†ç›–æ–°åˆ›å»ºçš„æ„é€ ç¯å¢ƒä¸­çš„é»˜è®¤å€¼ã€‚æ­¤æ—¶ä½¿ç”¨sconsè¾“å‡ºå¦‚ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; scons -Q</span><br><span class="line">gcc -o foo.o -c -O2 foo.c</span><br><span class="line">gcc -o foo foo.o</span><br></pre></td></tr></table></figure><h3 id="2-2-è·å–ç¯å¢ƒæ„é€ å˜é‡çš„å€¼"><a href="#2-2-è·å–ç¯å¢ƒæ„é€ å˜é‡çš„å€¼" class="headerlink" title="2.2 è·å–ç¯å¢ƒæ„é€ å˜é‡çš„å€¼"></a>2.2 è·å–ç¯å¢ƒæ„é€ å˜é‡çš„å€¼</h3><p>Pythonæ‰“å°è°ƒç”¨å°†ä¸ºæˆ‘ä»¬è¾“å‡ºCCå’ŒLATEXçš„å€¼</p><p>ps:ä½¿ç”¨.getï¼ˆxxx, Noneï¼‰æ–¹æ³•è¿›è¡Œè·å–æ„å‘³ç€ï¼Œå¦‚æœæœªè®¾ç½®å˜é‡ï¼Œæˆ‘ä»¬å°†è¿”å›Noneï¼Œè€Œä¸æ˜¯å¤±è´¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">env = Environment()</span><br><span class="line">print(&quot;CC is: %s&quot; % env[&#x27;CC&#x27;])</span><br><span class="line">print(&quot;LATEX is: %s&quot; % env.get(&#x27;LATEX&#x27;, None))</span><br></pre></td></tr></table></figure><p>æ„é€ ç¯å¢ƒå®é™…ä¸Šæ˜¯ä¸€ä¸ªå…·æœ‰å…³è”æ–¹æ³•å’Œå±æ€§çš„å¯¹è±¡ã€‚å¦‚æœæ‚¨åªæƒ³ç›´æ¥è®¿é—®æ„é€ å˜é‡çš„å­—å…¸ï¼Œåˆ™å¯ä»¥ä½¿ç”¨envçš„Dictionaryæ–¹æ³•è·å–è¯¥å­—å…¸ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">env = Environment(FOO=&#x27;foo&#x27;, BAR=&#x27;bar&#x27;)</span><br><span class="line">cvars = env.Dictionary()</span><br><span class="line">for key in [&#x27;OBJSUFFIX&#x27;, &#x27;LIBSUFFIX&#x27;, &#x27;PROGSUFFIX&#x27;]:</span><br><span class="line">    print(&quot;key = %s, value = %s&quot; % (key, cvars[key]))</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨dump()æ–¹æ³•æ ¼å¼åŒ–è¾“å‡ºæ„é€ ç¯å¢ƒçš„ä¿¡æ¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">env = Environment()</span><br><span class="line">print(env.Dump())</span><br></pre></td></tr></table></figure><p><strong>substæ–¹æ³•</strong></p><p>ç›´æ¥é€šè¿‡å­—å…¸ç´¢å¼•çš„æ–¹å¼è¾“å‡ºç¯å¢ƒæ„é€ å˜é‡çš„å€¼æ—¶ï¼Œæœ‰äº›ç¯å¢ƒæ„é€ å˜é‡ä¸ä¼šå±•å¼€ï¼Œä½¿å¾—é˜…è¯»å­˜åœ¨å›°éš¾</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">env = Environment(CCFLAGS=&#x27;-DFOO&#x27;)</span><br><span class="line">print(&quot;CCCOM is: %s&quot; % env[&#x27;CCCOM&#x27;])</span><br><span class="line"></span><br><span class="line">&gt; scons -Q</span><br><span class="line">CCCOM is: $CC $CCFLAGS $CPPFLAGS $_CPPDEFFLAGS $_CPPINCFLAGS -c -o $TARGET $SOURCES</span><br><span class="line">scons: `.&#x27; is up to date.</span><br></pre></td></tr></table></figure><p>è€Œä½¿ç”¨substæ–¹æ³•è¾“å‡ºï¼Œåˆ™ä¼šå±•å¼€å…¨éƒ¨ç¯å¢ƒæ„é€ å˜é‡</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">env = Environment(CCFLAGS=&#x27;-DFOO&#x27;)</span><br><span class="line">print(&quot;CCCOM is: %s&quot; % env.subst(&#x27;$CCCOM&#x27;))</span><br><span class="line"></span><br><span class="line">&gt; scons -Q</span><br><span class="line">CCCOM is: gcc -DFOO -c -o</span><br><span class="line">scons: `.&#x27; is up to date.</span><br></pre></td></tr></table></figure><p>å¯è§ï¼ŒCCè¢«å±•å¼€ä¸ºgccï¼ŒCCFLAGSè¢«å±•å¼€ä¸º-DFOO</p><h3 id="2-3-é»˜è®¤æ„é€ ç¯å¢ƒ"><a href="#2-3-é»˜è®¤æ„é€ ç¯å¢ƒ" class="headerlink" title="2.3 é»˜è®¤æ„é€ ç¯å¢ƒ"></a>2.3 é»˜è®¤æ„é€ ç¯å¢ƒ</h3><p>å¦‚æœæ²¡æœ‰æŒ‡å®šæ„é€ ç¯å¢ƒï¼ŒProgramå’ŒLibraryç­‰æ„é€ æ–¹æ³•éƒ½æ˜¯ä½¿ç”¨é»˜è®¤æ„é€ ç¯å¢ƒ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># ä½¿ç”¨é»˜è®¤æ„é€ ç¯å¢ƒ</span><br><span class="line">Program(&#x27;foo&#x27;, &#x27;foo.c&#x27;)</span><br><span class="line"></span><br><span class="line"># ä½¿ç”¨æŒ‡å®šæ„é€ ç¯å¢ƒ</span><br><span class="line">opt = Environment(CCFLAGS=&#x27;-O2&#x27;)</span><br><span class="line">opt.Program(&#x27;foo&#x27;, &#x27;foo.c&#x27;)</span><br></pre></td></tr></table></figure><p>è€Œæ§åˆ¶é»˜è®¤æ„é€ å’Œç¯å¢ƒçš„æ–¹æ³•ä¸º<code>DefaultEnvironment</code></p><p>DefaultEnvironmentå‡½æ•°è¿”å›åˆå§‹åŒ–çš„é»˜è®¤æ„é€ ç¯å¢ƒå¯¹è±¡ï¼Œç„¶åå¯ä»¥åƒä»»ä½•å…¶ä»–æ„é€ ç¯å¢ƒä¸€æ ·å¯¹å…¶è¿›è¡Œæ“ä½œï¼Œä¾‹å¦‚ä»¥ä¸‹ç¤ºä¾‹æŒ‡å®šäº†é»˜è®¤æ„é€ ç¯å¢ƒä½¿ç”¨çš„ç¼–è¯‘å™¨ä¸ºâ€™&#x2F;usr&#x2F;local&#x2F;bin&#x2F;gccâ€™</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># æ–¹å¼ä¸€</span><br><span class="line">DefaultEnvironment(CC=&#x27;/usr/local/bin/gcc&#x27;)</span><br><span class="line"># æ–¹å¼äºŒ</span><br><span class="line">def_env = DefaultEnvironment()</span><br><span class="line">def_env[&#x27;CC&#x27;] = &#x27;/usr/local/bin/gcc&#x27;</span><br><span class="line"># ä¸¤ç§æ–¹å¼ç­‰ä»·</span><br></pre></td></tr></table></figure><h3 id="2-4-åˆ›å»ºå¤šä¸ªæ„é€ ç¯å¢ƒ"><a href="#2-4-åˆ›å»ºå¤šä¸ªæ„é€ ç¯å¢ƒ" class="headerlink" title="2.4 åˆ›å»ºå¤šä¸ªæ„é€ ç¯å¢ƒ"></a>2.4 åˆ›å»ºå¤šä¸ªæ„é€ ç¯å¢ƒ</h3><p>SConsçš„ä¸€å¤§ä¼˜åŠ¿æ˜¯å¯ä»¥åˆ›é€ å¤šä¸ªæ„é€ ç¯å¢ƒã€‚</p><p>ä¸åŒçš„æºæ–‡ä»¶å¯èƒ½éœ€è¦åœ¨å‘½ä»¤è¡Œä¸Šå¯ç”¨ä¸åŒçš„é€‰é¡¹ï¼Œæˆ–è€…ä¸åŒçš„å¯æ‰§è¡Œç¨‹åºéœ€è¦ä¸ä¸åŒçš„åº“é“¾æ¥ã€‚SConså…è®¸æ‚¨åˆ›å»ºå’Œé…ç½®æ§åˆ¶è½¯ä»¶æ„å»ºæ–¹å¼çš„å¤šä¸ªæ„å»ºç¯å¢ƒï¼Œä»è€Œæ»¡è¶³è¿™äº›ä¸åŒçš„æ„å»ºéœ€æ±‚ã€‚</p><p>æ¯ä¸ªæ„å»ºç¯å¢ƒæ ¹æ®æ„å»ºæŸä¸ªè½¯ä»¶æˆ–å…¶ä»–æ–‡ä»¶çš„ä¸åŒæ–¹å¼è¿›è¡Œå®šåˆ¶ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦ç”¨ -O2æ ‡å¿—æ„å»ºä¸€ä¸ªç¨‹åºï¼Œç”¨ -g (debug)æ ‡å¿—æ„å»ºå¦ä¸€ä¸ªç¨‹åºï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·åš:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">opt = Environment(CCFLAGS=&#x27;-O2&#x27;)</span><br><span class="line">dbg = Environment(CCFLAGS=&#x27;-g&#x27;)</span><br><span class="line">opt.Program(&#x27;foo&#x27;, &#x27;foo.c&#x27;)</span><br><span class="line">dbg.Program(&#x27;bar&#x27;, &#x27;bar.c&#x27;)</span><br><span class="line">        </span><br><span class="line">&gt; scons -Q</span><br><span class="line">cc -o bar.o -c -g bar.c</span><br><span class="line">cc -o bar bar.o</span><br><span class="line">cc -o foo.o -c -O2 foo.c</span><br><span class="line">cc -o foo foo.o</span><br></pre></td></tr></table></figure><p>ç”šè‡³å¯ä»¥æ„å»ºåŒä¸€ä¸ªæºæ–‡ä»¶çš„ä¸åŒç‰ˆæœ¬ç¨‹åº</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">opt = Environment(CCFLAGS=&#x27;-O2&#x27;)</span><br><span class="line">dbg = Environment(CCFLAGS=&#x27;-g&#x27;)</span><br><span class="line">opt.Program(&#x27;foo&#x27;, &#x27;foo.c&#x27;)</span><br><span class="line">dbg.Program(&#x27;foo&#x27;, &#x27;foo.c&#x27;)</span><br><span class="line"></span><br><span class="line">&gt; scons -Q</span><br><span class="line">scons: *** Two environments with different actions were specified for the same target: foo.o</span><br><span class="line">File &quot;/home/my/project/SConstruct&quot;, line 6, in &lt;module&gt;</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯å› ä¸ºäº§ç”Ÿäº†ç›¸åŒåå­—çš„ä¸åŒä¸­é—´æ–‡ä»¶è€ŒæŠ¥é”™ï¼Œä¸ºäº†é¿å…è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¿…é¡»æ˜ç¡®æŒ‡å®šæ¯ä¸ªç¯å¢ƒä½¿ç”¨objectç”Ÿæˆå™¨å°†foo.cç¼–è¯‘ä¸ºä¸€ä¸ªå•ç‹¬å‘½åçš„å¯¹è±¡æ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">opt = Environment(CCFLAGS=&#x27;-O2&#x27;)</span><br><span class="line">dbg = Environment(CCFLAGS=&#x27;-g&#x27;)</span><br><span class="line">o = opt.Object(&#x27;foo-opt&#x27;, &#x27;foo.c&#x27;)</span><br><span class="line">opt.Program(o)</span><br><span class="line">d = dbg.Object(&#x27;foo-dbg&#x27;, &#x27;foo.c&#x27;)</span><br><span class="line">dbg.Program(d)</span><br><span class="line">        </span><br><span class="line">&gt; scons -Q</span><br><span class="line">cc -o foo-dbg.o -c -g foo.c</span><br><span class="line">cc -o foo-dbg foo-dbg.o</span><br><span class="line">cc -o foo-opt.o -c -O2 foo.c</span><br><span class="line">cc -o foo-opt foo-opt.o</span><br></pre></td></tr></table></figure><h3 id="2-5-å¤åˆ¶æ„é€ ç¯å¢ƒ"><a href="#2-5-å¤åˆ¶æ„é€ ç¯å¢ƒ" class="headerlink" title="2.5 å¤åˆ¶æ„é€ ç¯å¢ƒ"></a>2.5 å¤åˆ¶æ„é€ ç¯å¢ƒ</h3><p>æœ‰æ—¶ï¼Œæ‚¨å¸Œæœ›å¤šä¸ªæ„é€ ç¯å¢ƒå…±äº«ä¸€ä¸ªæˆ–å¤šä¸ªå˜é‡çš„ç›¸åŒå€¼ã€‚åœ¨åˆ›å»ºæ¯ä¸ªæ„é€ ç¯å¢ƒæ—¶ï¼Œä¸å¿…æ€»æ˜¯é‡å¤æ‰€æœ‰å…¬å…±å˜é‡ï¼Œè€Œæ˜¯å¯ä»¥ä½¿ç”¨envæ„é€ ç¯å¢ƒçš„Cloneæ–¹æ³•æ¥åˆ›å»ºæ„é€ ç¯å¢ƒçš„å‰¯æœ¬ã€‚</p><p>ä¸åˆ›å»ºæ„é€ ç¯å¢ƒçš„Environmentè°ƒç”¨ä¸€æ ·ï¼ŒCloneæ–¹æ³•æ¥å—æ„é€ å˜é‡èµ‹å€¼ï¼Œè¯¥èµ‹å€¼å°†è¦†ç›–å¤åˆ¶çš„æ„é€ ç¯å¢ƒä¸­çš„å€¼ã€‚</p><p>ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬æƒ³ä½¿ç”¨gccåˆ›å»ºä¸€ä¸ªç¨‹åºçš„ä¸‰ä¸ªç‰ˆæœ¬ï¼Œä¸€ä¸ªæ˜¯ä¼˜åŒ–çš„ï¼Œä¸€ä¸ªè°ƒè¯•çš„ï¼Œè¿˜æœ‰ä¸€ä¸ªä¸¤è€…éƒ½æ²¡æœ‰ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ªâ€œåŸºæœ¬â€æ„é€ ç¯å¢ƒæ¥å®ç°è¿™ä¸€ç‚¹ï¼Œè¯¥ç¯å¢ƒå°†CCè®¾ç½®ä¸ºgccï¼Œç„¶ååˆ›å»ºä¸¤ä¸ªå‰¯æœ¬ï¼Œä¸€ä¸ªè®¾ç½®CCFLAGSç”¨äºä¼˜åŒ–ï¼Œå¦ä¸€ä¸ªè®¾ç½®CCFLAGSç”¨äºè°ƒè¯•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">env = Environment(CC=&#x27;gcc&#x27;)</span><br><span class="line">opt = env.Clone(CCFLAGS=&#x27;-O2&#x27;)</span><br><span class="line">dbg = env.Clone(CCFLAGS=&#x27;-g&#x27;)</span><br><span class="line"></span><br><span class="line">env.Program(&#x27;foo&#x27;, &#x27;foo.c&#x27;)</span><br><span class="line">o = opt.Object(&#x27;foo-opt&#x27;, &#x27;foo.c&#x27;)</span><br><span class="line">opt.Program(o)</span><br><span class="line">d = dbg.Object(&#x27;foo-dbg&#x27;, &#x27;foo.c&#x27;)</span><br><span class="line">dbg.Program(d)</span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">&gt; scons -Q</span><br><span class="line">gcc -o foo.o -c foo.c</span><br><span class="line">gcc -o foo foo.o</span><br><span class="line">gcc -o foo-dbg.o -c -g foo.c</span><br><span class="line">gcc -o foo-dbg foo-dbg.o</span><br><span class="line">gcc -o foo-opt.o -c -O2 foo.c</span><br><span class="line">gcc -o foo-opt foo-opt.o</span><br></pre></td></tr></table></figure><h3 id="2-6-æ›´æ”¹ç¯å¢ƒæ„é€ å˜é‡"><a href="#2-6-æ›´æ”¹ç¯å¢ƒæ„é€ å˜é‡" class="headerlink" title="2.6 æ›´æ”¹ç¯å¢ƒæ„é€ å˜é‡"></a>2.6 æ›´æ”¹ç¯å¢ƒæ„é€ å˜é‡</h3><p>é€šè¿‡envçš„Replaceæ–¹æ³•å¯ä»¥æ›´æ”¹envæ„é€ ç¯å¢ƒä¸­ç¯å¢ƒæ„é€ å˜é‡çš„å€¼ï¼Œå¦‚æœè¿™ä¸ªç¯å¢ƒæ„é€ å˜é‡ä¸å­˜åœ¨ï¼Œåˆ™æ–°å¢ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">env = Environment(CCFLAGS=&#x27;-DDEFINE1&#x27;)</span><br><span class="line">env.Replace(CCFLAGS=&#x27;-DDEFINE2&#x27;)</span><br><span class="line">env.Program(&#x27;foo.c&#x27;)</span><br><span class="line"></span><br><span class="line">&gt; scons -Q</span><br><span class="line">cc -o foo.o -c -DDEFINE2 foo.c</span><br><span class="line">cc -o foo foo.o</span><br></pre></td></tr></table></figure><p>åœ¨æ„å»ºç¯å¢ƒå®é™…ç”¨äºæ„å»ºç›®æ ‡ä¹‹å‰ï¼Œå˜é‡ä¸ä¼šå±•å¼€ï¼Œè€Œä¸”SConså‡½æ•°å’Œæ–¹æ³•è°ƒç”¨ä¸é¡ºåºæ— å…³ï¼Œæ‰€ä»¥æœ€åä¸€ä¸ªæ›¿æ¢â€œè·èƒœâ€å¹¶ç”¨äºæ„å»ºæ‰€æœ‰ç›®æ ‡ï¼Œè€Œä¸ç®¡å¯¹Replaceï¼ˆï¼‰çš„è°ƒç”¨ä¸å¯¹æ„å»ºå™¨æ–¹æ³•çš„è°ƒç”¨ä¹‹é—´çš„é¡ºåºå¦‚ä½•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">env = Environment(CCFLAGS=&#x27;-DDEFINE1&#x27;)</span><br><span class="line">print(&quot;CCFLAGS = %s&quot; % env[&#x27;CCFLAGS&#x27;])</span><br><span class="line">env.Program(&#x27;foo.c&#x27;)</span><br><span class="line"></span><br><span class="line">env.Replace(CCFLAGS=&#x27;-DDEFINE2&#x27;)</span><br><span class="line">print(&quot;CCFLAGS = %s&quot; % env[&#x27;CCFLAGS&#x27;])</span><br><span class="line">env.Program(&#x27;bar.c&#x27;)</span><br><span class="line"></span><br><span class="line">&gt; scons</span><br><span class="line">scons: Reading SConscript files ...</span><br><span class="line">CCFLAGS = -DDEFINE1</span><br><span class="line">CCFLAGS = -DDEFINE2</span><br><span class="line">scons: done reading SConscript files.</span><br><span class="line">scons: Building targets ...</span><br><span class="line">cc -o bar.o -c -DDEFINE2 bar.c</span><br><span class="line">cc -o bar bar.o</span><br><span class="line">cc -o foo.o -c -DDEFINE2 foo.c</span><br><span class="line">cc -o foo foo.o</span><br><span class="line">scons: done building targets.</span><br></pre></td></tr></table></figure><h2 id="3-æ‰§è¡Œç¯å¢ƒ-Execution-Environment"><a href="#3-æ‰§è¡Œç¯å¢ƒ-Execution-Environment" class="headerlink" title="3. æ‰§è¡Œç¯å¢ƒ Execution Environment"></a>3. æ‰§è¡Œç¯å¢ƒ Execution Environment</h2><p>æ‰§è¡Œç¯å¢ƒæ˜¯SConsåœ¨æ‰§è¡Œå¤–éƒ¨å‘½ä»¤ï¼ˆå¦‚ç¼–è¯‘å™¨æˆ–é“¾æ¥å™¨ï¼‰ä»¥æ„å»ºä¸€ä¸ªæˆ–å¤šä¸ªç›®æ ‡æ—¶è®¾ç½®çš„å€¼ã€‚</p><p>å‚è€ƒèµ„æ–™ï¼š</p><p><a href="https://www.jianshu.com/u/ddb7903b52e4">VictorWANG1992 - ç®€ä¹¦ (jianshu.com)</a></p><p><a href="https://blog.csdn.net/danshiming/article/details/122771064?ops_request_misc=%7B%22request_id%22:%22169805899416777224422665%22,%22scm%22:%2220140713.130102334..%22%7D&request_id=169805899416777224422665&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-1-122771064-null-null.142%5Ev96%5Epc_search_result_base2&utm_term=SCons&spm=1018.2226.3001.4187">SConsç®€å•å…¥é—¨ï¼ˆä¸€ï¼‰-CSDNåšå®¢</a></p><p><a href="https://www.scons.org/doc/production/HTML/scons-user/index.html">SCons 4.5.2å®˜æ–¹æ–‡æ¡£</a></p><p><a href="https://blog.csdn.net/jeek_we/category_12034807.html">scons_jeek_weçš„åšå®¢-CSDNåšå®¢</a></p><p><a href="https://zhuanlan.zhihu.com/p/645748713">ã€åƒé”‹RT-Threadã€‘ç¬¬31ç«  SCons æ„å»ºå·¥å…· - çŸ¥ä¹ (zhihu.com)</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Scons </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬äºŒç« ï¼šæŒ‡ä»¤ç³»ç»Ÿ</title>
      <link href="/2023/10/22/%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F/"/>
      <url>/2023/10/22/%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F/</url>
      
        <content type="html"><![CDATA[<h1 id="1-æŒ‡ä»¤ç³»ç»Ÿç»“æ„çš„åˆ†ç±»"><a href="#1-æŒ‡ä»¤ç³»ç»Ÿç»“æ„çš„åˆ†ç±»" class="headerlink" title="1 æŒ‡ä»¤ç³»ç»Ÿç»“æ„çš„åˆ†ç±»"></a>1 æŒ‡ä»¤ç³»ç»Ÿç»“æ„çš„åˆ†ç±»</h1><p>CPUä¸­ç”¨æ¥å­˜æ”¾æ“ä½œæ•°çš„å­˜å‚¨å•å…ƒä¸»è¦æœ‰ä¸‰ç§ï¼š<strong>å †æ ˆ</strong>ã€<strong>ç´¯åŠ å™¨</strong>ã€<strong>é€šç”¨å¯„å­˜å™¨ç»„</strong>ã€‚æ®æ­¤ï¼ŒæŒ‡ä»¤ç³»ç»Ÿï¼ˆInstruction Set Architectureï¼‰å¯åˆ†ä¸ºä¸‰ç§ï¼š</p><ul><li><strong>$\color[RGB]{40,120,181}{å †æ ˆå‹ç»“æ„}$ï¼š</strong>å †æ ˆæ ˆé¡¶å’Œæ¬¡æ ˆé¡¶ä¸­çš„æ•°æ®ï¼Œè¿ç®—åå†™å…¥æ ˆé¡¶ã€‚ä¸¤ä¸ªæ“ä½œæ•°éƒ½æ˜¯éšå¼çš„ã€‚<strong>ä¼˜ç‚¹ï¼š</strong>æŒ‡ä»¤å­—æ¯”è¾ƒçŸ­ï¼Œç¨‹åºå ç”¨çš„ç©ºé—´å°ï¼›<strong>ç¼ºç‚¹ï¼š</strong>ä¸èƒ½éšæœºåœ°è®¿é—®å †æ ˆï¼Œéš¾ä»¥ç”Ÿæˆæœ‰æ•ˆçš„ä»£ç ï¼Œè€Œä¸”å¯¹æ ˆé¡¶çš„è®¿é—®æ˜¯ä¸ªç“¶é¢ˆã€‚</li><li><strong>$\color[RGB]{40,120,181}{ç´¯åŠ å™¨å‹ç»“æ„}$ï¼š</strong>ä¸€ä¸ªæ“ä½œæ•°æ˜¯éšå¼çš„ï¼Œå³ç´¯åŠ å™¨ï¼›å¦ä¸€ä¸ªæ˜¯æ˜¾ç¤ºç»™å‡ºçš„ã€‚<strong>ä¼˜ç‚¹ï¼š</strong>æŒ‡ä»¤å­—æ¯”è¾ƒçŸ­ï¼Œç¨‹åºå ç”¨çš„ç©ºé—´å°ï¼›<strong>ç¼ºç‚¹ï¼š</strong>åªæœ‰ä¸€ä¸ªä¸­é—´ç»“æœæš‚å­˜åœ¨ç´¯åŠ å™¨ä¸­ï¼Œéœ€è¦é¢‘ç¹è®¿é—®å­˜å‚¨å™¨ã€‚</li></ul><p>æ—©æœŸè®¡ç®—æœºå¤§å¤šé‡‡ç”¨å †æ ˆå‹ç»“æ„æˆ–ç´¯åŠ å™¨å‹ç»“æ„</p><ul><li><strong>$\color[RGB]{40,120,181}{é€šç”¨å¯„å­˜å™¨å‹ç»“æ„}$ï¼š</strong>æ‰€æœ‰æ“ä½œæ•°éƒ½æ˜¯æ˜¾ç¤ºç»™å‡ºçš„ã€‚<strong>ä¼˜ç‚¹ï¼š</strong>1.å¯„å­˜å™¨çš„è®¿é—®æ¯”å­˜å‚¨å™¨å¿«å¾—å¤š 2. ç¼–è¯‘å™¨èƒ½å¤Ÿæ›´åŠ å®¹æ˜“ã€æœ‰æ•ˆåœ°åˆ†é…å¯„å­˜å™¨ ã€‚æ ¹æ®æ“ä½œæ•°æ˜¾å¼ç»™å‡ºçš„æ¥æºä¸åŒï¼Œåˆå¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼š<ul><li>$\color[RGB]{248,172,140}{å¯„å­˜å™¨-å­˜å‚¨å™¨å‹ç»“æ„(RMç»“æ„)}:$ä¸€ä¸ªæ“ä½œæ•°æ¥è‡ªå¯„å­˜å™¨ï¼Œå¦ä¸€ä¸ªæ¥è‡ªå­˜å‚¨å™¨ã€‚</li><li>$\color[RGB]{248,172,140}{å¯„å­˜å™¨-å¯„å­˜å™¨å‹ç»“æ„(RRç»“æ„)}:$ä¸¤ä¸ªæ“ä½œæ•°éƒ½æ¥è‡ªå¯„å­˜å™¨ã€‚</li></ul></li></ul><p>**æ˜¾å¼ç»™å‡º:**ç”¨æŒ‡ä»¤å­—ä¸­çš„æ“ä½œæ•°å­—æ®µç»™å‡º</p><p>**éšå¼ç»™å‡º:**ç”¨äº‹å…ˆçº¦å®šå¥½çš„å•å…ƒ</p><span id="more"></span><h1 id="2-å¯»å€æ–¹å¼"><a href="#2-å¯»å€æ–¹å¼" class="headerlink" title="2. å¯»å€æ–¹å¼"></a>2. å¯»å€æ–¹å¼</h1><p>å¯»å€æ–¹å¼ï¼ˆAddressing Modeï¼‰æ˜¯æŒ‡æŒ‡ä»¤ç³»ç»Ÿä¸­äº§ç”Ÿæ‰€è¦è®¿é—®çš„æ•°æ®åœ°å€çš„æ–¹æ³•ã€‚å¯»å€æ–¹å¼å¯ä»¥æŒ‡æ˜æŒ‡ä»¤ä¸­çš„æ“ä½œæ•°æ˜¯ä¸€ä¸ª<strong>ç«‹å³æ•°</strong>ã€ä¸€ä¸ª<strong>å¯„å­˜å™¨æ“ä½œæ•°</strong>æˆ–è€…æ˜¯ä¸€ä¸ª<strong>å­˜å‚¨å™¨æ“ä½œæ•°</strong></p><h2 id="2-1-å¯»å€æ–¹å¼ä¸¾ä¾‹"><a href="#2-1-å¯»å€æ–¹å¼ä¸¾ä¾‹" class="headerlink" title="2.1 å¯»å€æ–¹å¼ä¸¾ä¾‹"></a>2.1 å¯»å€æ–¹å¼ä¸¾ä¾‹</h2><ul><li>å¯„å­˜å™¨å¯»å€</li><li>ç«‹å³æ•°å¯»å€</li><li>åç§»å¯»å€</li></ul><p>ç­‰ç­‰</p><h2 id="2-2-å­—èŠ‚å¯¹é½"><a href="#2-2-å­—èŠ‚å¯¹é½" class="headerlink" title="2.2 å­—èŠ‚å¯¹é½"></a>2.2 å­—èŠ‚å¯¹é½</h2><p>è®¡ç®—æœºä¸­ä¿¡æ¯çš„å•ä½å¯åˆ†ä¸ºå­—èŠ‚(8bit)ã€åŠå­—(16bit)ã€å•å­—(32bit)ã€åŒå­—(64bit)ã€‚è®¡ç®—æœºä¸­é‡‡ç”¨æŒ‰å­—èŠ‚ç¼–å€ï¼Œå„ç±»ä¿¡æ¯éƒ½æ˜¯ç”¨æ”¹ä¿¡æ¯çš„é¦–å­—èŠ‚åœ°å€æ¥å¯»å€çš„ã€‚</p><h3 id="ä¿¡æ¯å­˜å‚¨çš„æ•´æ•°è¾¹ç•Œ"><a href="#ä¿¡æ¯å­˜å‚¨çš„æ•´æ•°è¾¹ç•Œ" class="headerlink" title="ä¿¡æ¯å­˜å‚¨çš„æ•´æ•°è¾¹ç•Œ"></a>ä¿¡æ¯å­˜å‚¨çš„æ•´æ•°è¾¹ç•Œ</h3><p>æ­¤å¤–è¿˜éœ€è¦å¯¹å®ƒä»¬çš„å­˜å‚¨æ–¹å¼è¿›è¡Œé™åˆ¶ï¼Œå¦‚æœå…è®¸å®ƒä»¬ä»»æ„å­˜å‚¨ï¼Œå°±å¯èƒ½å‡ºç°ä¸€ä¸ªä¿¡æ¯è·¨å­˜å‚¨å­—è¾¹ç•Œè€Œå­˜å‚¨ä¸ä¸¤ä¸ªå­˜å‚¨å•å…ƒçš„æƒ…å†µï¼Œè€Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¯»å–è¯¥ä¿¡æ¯å°±éœ€è¦èŠ±è´¹ä¸¤ä¸ªå­˜å‚¨å‘¨æœŸï¼Œä¸ºäº†é¿å…å‡ºç°è¿™ä¸ªé—®é¢˜ï¼Œå°±è¦æ±‚<strong>å®½åº¦ä¸è¶…è¿‡ä¸»å­˜å®½åº¦çš„ä¿¡æ¯å¿…é¡»å­˜æ”¾åœ¨ä¸€ä¸ªå­˜å‚¨å­—å†…ï¼Œä¿¡æ¯åœ¨ä¸»å­˜ä¸­å­˜æ”¾çš„èµ·å§‹åœ°å€å¿…é¡»æ˜¯è¯¥ä¿¡æ¯å®½åº¦ï¼ˆå­—èŠ‚æ•°ï¼‰çš„æ•´æ•°å€</strong>ï¼Œä»è€Œé¿å…äº†è·¨è¾¹ç•Œï¼Œä¿è¯äº†è®¿é—®é€Ÿåº¦ã€‚</p><p>å¯¹äºä¸€ä¸ª32ä½æœºå™¨ï¼ˆä¸»å­˜å®½åº¦ä¸º32ä½ï¼‰ï¼Œè¦æ±‚ï¼š</p><h5 id="å­—èŠ‚ä¿¡æ¯çš„èµ·å§‹åœ°å€ä¸ºï¼šxâ€¦xxxx"><a href="#å­—èŠ‚ä¿¡æ¯çš„èµ·å§‹åœ°å€ä¸ºï¼šxâ€¦xxxx" class="headerlink" title="å­—èŠ‚ä¿¡æ¯çš„èµ·å§‹åœ°å€ä¸ºï¼šxâ€¦xxxx"></a>å­—èŠ‚ä¿¡æ¯çš„èµ·å§‹åœ°å€ä¸ºï¼šxâ€¦xxxx</h5><h5 id="åŠå­—ä¿¡æ¯çš„èµ·å§‹åœ°å€ä¸ºï¼šxâ€¦xxx0"><a href="#åŠå­—ä¿¡æ¯çš„èµ·å§‹åœ°å€ä¸ºï¼šxâ€¦xxx0" class="headerlink" title="åŠå­—ä¿¡æ¯çš„èµ·å§‹åœ°å€ä¸ºï¼šxâ€¦xxx0"></a>åŠå­—ä¿¡æ¯çš„èµ·å§‹åœ°å€ä¸ºï¼šxâ€¦xxx0</h5><h5 id="å•å­—ä¿¡æ¯çš„èµ·å§‹åœ°å€ä¸ºï¼šxâ€¦xx00"><a href="#å•å­—ä¿¡æ¯çš„èµ·å§‹åœ°å€ä¸ºï¼šxâ€¦xx00" class="headerlink" title="å•å­—ä¿¡æ¯çš„èµ·å§‹åœ°å€ä¸ºï¼šxâ€¦xx00"></a>å•å­—ä¿¡æ¯çš„èµ·å§‹åœ°å€ä¸ºï¼šxâ€¦xx00</h5><h5 id="åŒå­—ä¿¡æ¯çš„èµ·å§‹åœ°å€ä¸ºï¼šxâ€¦x000"><a href="#åŒå­—ä¿¡æ¯çš„èµ·å§‹åœ°å€ä¸ºï¼šxâ€¦x000" class="headerlink" title="åŒå­—ä¿¡æ¯çš„èµ·å§‹åœ°å€ä¸ºï¼šxâ€¦x000"></a>åŒå­—ä¿¡æ¯çš„èµ·å§‹åœ°å€ä¸ºï¼šxâ€¦x000</h5>]]></content>
      
      
      <categories>
          
          <category> ã€Šè®¡ç®—æœºä½“ç³»ç»“æ„ã€‹å­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¡ç®—æœºä½“ç³»ç»“æ„ </tag>
            
            <tag> æŒ‡ä»¤ç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®è—åšå®¢</title>
      <link href="/2023/10/19/1019-1021/"/>
      <url>/2023/10/19/1019-1021/</url>
      
        <content type="html"><![CDATA[<p><a href="https://dongshao.blog.csdn.net/?type=blog">è‘£å“¥çš„é»‘æ¿æŠ¥_APUEç¼–ç¨‹,TCP&#x2F;IPå·ä¸€,C++-CSDNåšå®¢</a></p><p><a href="https://csdiy.wiki/">CSè‡ªå­¦æŒ‡å— (csdiy.wiki)</a></p>]]></content>
      
      
      <categories>
          
          <category> æ”¶è— </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>hexoä¸»é¢˜å’Œæ’ä»¶</title>
      <link href="/2023/10/18/hexo%E4%B8%BB%E9%A2%98%E5%92%8C%E6%8F%92%E4%BB%B6/"/>
      <url>/2023/10/18/hexo%E4%B8%BB%E9%A2%98%E5%92%8C%E6%8F%92%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<h1 id="1-Hexoä¸»é¢˜"><a href="#1-Hexoä¸»é¢˜" class="headerlink" title="1. Hexoä¸»é¢˜"></a>1. Hexoä¸»é¢˜</h1><p>hexoå®˜æ–¹æä¾›äº†å¾ˆå¤šçš„ä¸»é¢˜æ¨¡æ¿ï¼Œå¯ä»¥åœ¨<a href="https://hexo.io/themes/index.html">hexoä¸»é¢˜å®˜ç½‘</a>ä¸­çœ‹åˆ°ï¼Œ<a href="https://hexo.io/zh-cn/docs/themes.html">å®˜æ–¹æ•™ç¨‹</a>ä¸­ä¹Ÿæœ‰é…ç½®ä¸»é¢˜æ“ä½œ</p><span id="more"></span><h2 id="Nextä¸»é¢˜"><a href="#Nextä¸»é¢˜" class="headerlink" title="Nextä¸»é¢˜"></a><strong>Nextä¸»é¢˜</strong></h2><p>åœ¨ä¼—å¤šä¸»é¢˜ä¸­ï¼ŒNextæ˜¯æœ€å—æ¬¢è¿çš„ä¸»é¢˜ä¹‹ä¸€ï¼Œå®ƒæä¾›äº†è®¸å¤šçš„ç•Œé¢æ¨¡æ¿ï¼Œå¹¶ä¸”æ”¯æŒå®‰è£…è®¸å¤šçš„æ’ä»¶ã€‚</p><h2 id="Nextä¸»é¢˜ä¸‹è½½"><a href="#Nextä¸»é¢˜ä¸‹è½½" class="headerlink" title="Nextä¸»é¢˜ä¸‹è½½"></a><strong>Nextä¸»é¢˜ä¸‹è½½</strong></h2><ol><li><p>$\color[RGB]{200, 100, 10}{ä¸‹è½½}$ã€‚åœ¨git bashçª—å£ä¸­é€šè¿‡git cloneå³å¯ä¸‹è½½</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/next-theme/hexo-theme-next themes/next</span><br></pre></td></tr></table></figure><p>ä¸‹è½½æˆåŠŸåï¼Œåœ¨<strong>blog&#x2F;themes</strong>æ–‡ä»¶å¤¹ä¸‹å³å¯æ‰¾åˆ°ä¸‹è½½çš„nextä¸»é¢˜æ–‡ä»¶å¤¹ï¼Œå…¶ä¸­åŒ…å«äº†nextä¸»é¢˜çš„é…ç½®ä¿¡æ¯</p></li><li><p>$\color[RGB]{200, 100, 10}{ä¿®æ”¹Hexoä¸»é¢˜}$ã€‚è¿”å›<strong>bolgæ ¹ç›®å½•</strong>ï¼Œæ‰“å¼€**_config.yml æ–‡ä»¶**ï¼Œå¹¶å°†å…¶ä¸­çš„themeé¡¹çš„å€¼æ”¹ä¸ºnext</p></li></ol><center>    <img style="border-radius: 0.3125em;    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);"     src=hexoä¸»é¢˜å’Œæ’ä»¶/image-20231019001323077.png>    <br>    <div style="color:orange; border-bottom: 1px solid #d9d9d9;    display: inline-block;    color: #FFF;    padding: 2px;">hexoä¸»é¢˜ä¿®æ”¹ä¸ºnext</div></center><p>ç»è¿‡ä»¥ä¸Šä¸¤æ­¥ï¼Œhexoçš„ä¸»é¢˜å°±æˆåŠŸæ›´æ¢ä¸ºnextå•¦ï¼ç„¶åå°±é€šè¿‡hexo gé‡æ–°ç”Ÿæˆåšå®¢ï¼Œå†é€šè¿‡hexo s æˆ– hexo då‘å¸ƒæ–°çš„åšå®¢ï¼Œçœ‹çœ‹æ–°ä¸»é¢˜çš„æ ·å­ã€‚</p><hr><h1 id="2-æ·»åŠ åˆ†ç±»ã€æ ‡ç­¾ã€å…³äº"><a href="#2-æ·»åŠ åˆ†ç±»ã€æ ‡ç­¾ã€å…³äº" class="headerlink" title="2. æ·»åŠ åˆ†ç±»ã€æ ‡ç­¾ã€å…³äº"></a>2. æ·»åŠ åˆ†ç±»ã€æ ‡ç­¾ã€å…³äº</h1><p><a href="https://blog.csdn.net/weixin_48927364/article/details/123295436">ã€Hexoã€‘nexTä¸»é¢˜ä½¿ç”¨æ”»ç•¥åŸºç¡€â€”â€”æ·»åŠ åˆ†ç±»ã€æ ‡ç­¾åŠå…³äº_hexo åˆ†ç±»-CSDNåšå®¢</a></p><h1 id="3-Hexoå¸¸ç”¨æ’ä»¶"><a href="#3-Hexoå¸¸ç”¨æ’ä»¶" class="headerlink" title="3. Hexoå¸¸ç”¨æ’ä»¶"></a>3. Hexoå¸¸ç”¨æ’ä»¶</h1><h2 id="ï¼ˆ1ï¼‰æ’å…¥æ•°å­¦å…¬å¼"><a href="#ï¼ˆ1ï¼‰æ’å…¥æ•°å­¦å…¬å¼" class="headerlink" title="ï¼ˆ1ï¼‰æ’å…¥æ•°å­¦å…¬å¼"></a>ï¼ˆ1ï¼‰æ’å…¥æ•°å­¦å…¬å¼</h2><p>åœ¨ç”¨markdownå†™æŠ€æœ¯æ–‡æ¡£æ—¶ï¼Œå…ä¸äº†ä¼šç¢°åˆ°æ•°å­¦å…¬å¼ã€‚Nextè¿™ç§å¤§ä¸»é¢˜ä¹Ÿé›†æˆäº†æ¸²æŸ“æ•°å­¦å…¬å¼çš„åŠŸèƒ½</p><p>ç›®å‰Nextæä¾›ä¸¤ç§æ•°å­¦å…¬å¼æ¸²æŸ“å¼•æ“ï¼Œåˆ†åˆ«æ˜¯Mathjaxå’ŒKatexã€‚</p><p>å¯ä»¥åœ¨Nextä¸»é¢˜çš„é…ç½®æ–‡ä»¶_config.ymlä¸­çœ‹åˆ°è¿™ä¸¤ä¸ªé¡¹</p><img src="/2023/10/18/hexo%E4%B8%BB%E9%A2%98%E5%92%8C%E6%8F%92%E4%BB%B6/image-20231019132036641.png" class="" title="Nextä¸»é¢˜çš„é…ç½®æ–‡ä»¶_config.yml"><p>é»˜è®¤æƒ…å†µä¸‹ä¸¤ä¸ªå¼•æ“çš„enableä½¿èƒ½é€‰é¡¹å‡ä¸ºfalseï¼Œåªéœ€è¦æ”¹ä¸ºtrueå°±å¯ä»¥æ¸²æŸ“æ•°å­¦å…¬å¼äº†</p><p>å…¶ä¸­every_pageé¡¹ç½®ä¸ºtrueçš„æ—¶å€™ï¼Œå¼•æ“ä¼šé»˜è®¤å¯¹æ¯ç¯‡åšå®¢ä¸­çš„æ•°å­¦å…¬å¼è¿›è¡Œæ¸²æŸ“ï¼Œä½†å¯¹äºä¸å«æ•°å­¦å…¬å¼çš„åšå®¢ï¼ŒåŠ è½½é€Ÿåº¦ä¼šé¢å¤–å˜æ…¢ï¼›è€Œå½“ç½®ä¸ºfalseæ˜¯ï¼Œåªä¼šå¯¹åœ¨å¼€å¤´å¤„å£°æ˜ä½¿ç”¨mathjaxå¼•æ“çš„åšå®¢è¿›è¡Œæ¸²æŸ“ã€‚</p><img src="/2023/10/18/hexo%E4%B8%BB%E9%A2%98%E5%92%8C%E6%8F%92%E4%BB%B6/image-20231019145600478.png" class="" title="åšå®¢å¼€å¤´å£°æ˜ä½¿ç”¨mathjaxå¼•æ“"><p><strong>æ•ˆæœå±•ç¤ºï¼š</strong></p><ul><li><p>è¡Œå†…å…¬å¼ï¼š</p><p>$f\left( x \right) &#x3D; \sum\limits_{i &#x3D; 1}^n {X_i^2} $</p><p>$MD\left(n_{i, j}, n_{x, y}\right)&#x3D;|i-x|+|j-y|$</p></li><li><p>è¡Œé—´å…¬å¼ï¼š</p><p>$$ f\left( x \right) &#x3D; \sum\limits_{i &#x3D; 1}^n {X_i^2} $$</p><p>$$ MD\left(n_{i, j}, n_{x, y}\right)&#x3D;|i-x|+|j-y|$$</p></li></ul><p>ï¼ˆ2ï¼‰</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntuè™šæ‹Ÿæœº</title>
      <link href="/2023/10/17/Ubuntu%E8%99%9A%E6%8B%9F%E6%9C%BA/"/>
      <url>/2023/10/17/Ubuntu%E8%99%9A%E6%8B%9F%E6%9C%BA/</url>
      
        <content type="html"><![CDATA[<h1 id="è™šæ‹Ÿæœºisoé•œåƒä¸‹è½½"><a href="#è™šæ‹Ÿæœºisoé•œåƒä¸‹è½½" class="headerlink" title="è™šæ‹Ÿæœºisoé•œåƒä¸‹è½½"></a>è™šæ‹Ÿæœºisoé•œåƒä¸‹è½½</h1><p><a href="https://developer.aliyun.com/mirror/?spm=a2c6h.265751.1364563.38.728e2621iHKW48">é˜¿é‡Œå·´å·´å¼€æºé•œåƒç«™-OPSXé•œåƒç«™-é˜¿é‡Œäº‘å¼€å‘è€…ç¤¾åŒº (aliyun.com)</a></p><p>è¿›å…¥é˜¿é‡Œå·´å·´å¼€æºé•œåƒç«™ï¼Œç‚¹å‡»OSï¼Œè¾“å…¥æƒ³è¦ä¸‹è½½çš„å‘è¡Œç‰ˆé•œåƒåŠç‰ˆæœ¬å·ï¼Œå³å¯ä¸‹è½½ã€‚</p><span id="more"></span><h1 id="Ubuntu20-04æ›´æ¢æ¸…åæº"><a href="#Ubuntu20-04æ›´æ¢æ¸…åæº" class="headerlink" title="Ubuntu20.04æ›´æ¢æ¸…åæº"></a>Ubuntu20.04æ›´æ¢æ¸…åæº</h1><p>Ubuntuå®‰è£…å®Œä¹‹åè¿›è¡Œæ›´æ¢ä¸ºå›½å†…æºå¯ä»¥è®©ä¸‹è½½æ›´æ–°çš„çš„é€Ÿåº¦å¿«ä¸€ç‚¹ã€‚</p><p>ä»¥ä¸‹æ˜¯å…·ä½“æ“ä½œçš„åšå®¢</p><p><a href="https://www.cnblogs.com/Lxk0825/p/9520002.html">ubuntu æ‰§è¡Œapt-get updateæŠ¥é”™Failed to fetch - Lxk- - åšå®¢å›­ (cnblogs.com)</a></p><p>ä½¿ç”¨æ¸…åæºï¼Œå°†ä»¥ä¸‹ä»£ç è¾“å…¥&#x2F;etc&#x2F;apt&#x2F;sources.listæ–‡ä»¶ä¸­ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># é»˜è®¤æ³¨é‡Šäº†æºç é•œåƒä»¥æé«˜ apt update é€Ÿåº¦ï¼Œå¦‚æœ‰éœ€è¦å¯è‡ªè¡Œå–æ¶ˆæ³¨é‡Š</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ trusty main restricted universe multiverse</span><br><span class="line"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ trusty main restricted universe multiverse</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ trusty-updates main restricted universe multiverse</span><br><span class="line"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ trusty-updates main restricted universe multiverse</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ trusty-backports main restricted universe multiverse</span><br><span class="line"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ trusty-backports main restricted universe multiverse</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ trusty-security main restricted universe multiverse</span><br><span class="line"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ trusty-security main restricted universe multiverse</span><br><span class="line"></span><br><span class="line"># é¢„å‘å¸ƒè½¯ä»¶æºï¼Œä¸å»ºè®®å¯ç”¨</span><br><span class="line"># deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ trusty-proposed main restricted universe multiverse</span><br><span class="line"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ trusty-proposed main restricted universe multiverse</span><br></pre></td></tr></table></figure><h1 id="è§£å†³Linux-ä¸‹ä½¿ç”¨-ifconfig-æŸ¥çœ‹ä¸åˆ°-ip-åœ°å€"><a href="#è§£å†³Linux-ä¸‹ä½¿ç”¨-ifconfig-æŸ¥çœ‹ä¸åˆ°-ip-åœ°å€" class="headerlink" title="è§£å†³Linux ä¸‹ä½¿ç”¨ ifconfig æŸ¥çœ‹ä¸åˆ° ip åœ°å€"></a>è§£å†³Linux ä¸‹ä½¿ç”¨ ifconfig æŸ¥çœ‹ä¸åˆ° ip åœ°å€</h1><p>ubuntuä¸‹ifconfigæŸ¥æ‰¾ä¸åˆ°ens33</p><img src="/2023/10/17/Ubuntu%E8%99%9A%E6%8B%9F%E6%9C%BA/image-20231106094703783.png" class="" title="image-20231106094703783"><p>è§£å†³æ–¹æ¡ˆï¼š<strong>åœ¨ç»ˆç«¯ä¸‹ä½¿ç”¨ dhclient ens33 å‘½ä»¤è·å–ï¼š</strong></p><p>æ•ˆæœç«‹ç«¿è§å½±ï¼š</p><img src="/2023/10/17/Ubuntu%E8%99%9A%E6%8B%9F%E6%9C%BA/image-20231106094829938.png" class="" title="image-20231106094829938"><p>å‚è€ƒé“¾æ¥ğŸ”—ï¼š<a href="https://zhuanlan.zhihu.com/p/614401443">è§£å†³Linux ä¸‹ä½¿ç”¨ ifconfig æŸ¥çœ‹ä¸åˆ° ip åœ°å€ - çŸ¥ä¹ (zhihu.com)</a></p><h1 id="python-ç‰ˆæœ¬åˆ‡æ¢"><a href="#python-ç‰ˆæœ¬åˆ‡æ¢" class="headerlink" title="python ç‰ˆæœ¬åˆ‡æ¢"></a>python ç‰ˆæœ¬åˆ‡æ¢</h1><p>ä½¿ç”¨update-alternatives æ¥ä¸ºæ•´ä¸ªç³»ç»Ÿæ›´æ”¹Python ç‰ˆæœ¬</p><p><a href="https://blog.csdn.net/qq_43744723/article/details/122090500">Ubuntuä¸‹å®Œç¾åˆ‡æ¢Pythonç‰ˆï¼Œå³è®¾ç½®ç³»ç»Ÿé»˜è®¤çš„pythonç‰ˆæœ¬(äº²æµ‹æœ‰æ•ˆ)_ubuntu åˆ‡æ¢pythonç‰ˆæœ¬-CSDNåšå®¢</a></p><h1 id="é…ç½®ã€æŸ¥çœ‹ç¯å¢ƒå˜é‡"><a href="#é…ç½®ã€æŸ¥çœ‹ç¯å¢ƒå˜é‡" class="headerlink" title="é…ç½®ã€æŸ¥çœ‹ç¯å¢ƒå˜é‡"></a>é…ç½®ã€æŸ¥çœ‹ç¯å¢ƒå˜é‡</h1><p><a href="https://blog.csdn.net/white_idiot/article/details/78253004">ã€Ubuntuã€‘Ubuntuè®¾ç½®å’ŒæŸ¥çœ‹ç¯å¢ƒå˜é‡_ubuntu ç¯å¢ƒå˜é‡-CSDNåšå®¢</a></p><h1 id="ç£ç›˜æ‰©å®¹"><a href="#ç£ç›˜æ‰©å®¹" class="headerlink" title="ç£ç›˜æ‰©å®¹"></a>ç£ç›˜æ‰©å®¹</h1><p><a href="https://blog.csdn.net/qq_45853229/article/details/124595300">Ubuntuç£ç›˜æ‰©å®¹(ç®€å•äº²æµ‹æœ‰æ•ˆï¼‰_ubuntuæ‰©å±•ç£ç›˜ç©ºé—´___ä¹”æœ¨çš„åšå®¢-CSDNåšå®¢</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Gem5æ¨¡æ‹Ÿå™¨å­¦ä¹ ï¼ˆä¸€ï¼‰</title>
      <link href="/2023/10/17/Gem5%E6%A8%A1%E6%8B%9F%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89/"/>
      <url>/2023/10/17/Gem5%E6%A8%A1%E6%8B%9F%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€Gem5æ¨¡æ‹Ÿå™¨ç®€ä»‹"><a href="#ä¸€ã€Gem5æ¨¡æ‹Ÿå™¨ç®€ä»‹" class="headerlink" title="ä¸€ã€Gem5æ¨¡æ‹Ÿå™¨ç®€ä»‹"></a>ä¸€ã€Gem5æ¨¡æ‹Ÿå™¨ç®€ä»‹</h1><p>gem5æ˜¯ä¸€ä¸ªå¼€æºã€æ¨¡å—åŒ–çš„æ—¶é’Ÿç²¾ç¡®çš„å…¨ç³»ç»Ÿæ¨¡æ‹Ÿå™¨ï¼Œåº”ç”¨äºè®¡ç®—æœºä½“ç³»ç»“æ„ç ”ç©¶ã€‚è¯¥æ¨¡æ‹Ÿå™¨å¯ä»¥å¯¹CPUã€å­˜å‚¨ç³»ç»Ÿã€ç‰‡ä¸Šäº’è¿ç³»ç»Ÿã€I&#x2F;Oç­‰ç³»ç»Ÿç»„ä»¶è¿›è¡Œè¯¦ç»†çš„å»ºæ¨¡ï¼Œå¹¶é€šè¿‡ä¿®æ”¹ä¸åŒç»„ä»¶çš„å…·ä½“å®ç°å’Œå„ä¸ªç»„ä»¶çš„é…ç½®å‚æ•°å¯ä»¥çµæ´»é…ç½®ä¸åŒçš„è®¡ç®—ç³»ç»Ÿã€‚</p><span id="more"></span><h2 id="1-1-æ¨¡æ‹Ÿç»„ä»¶"><a href="#1-1-æ¨¡æ‹Ÿç»„ä»¶" class="headerlink" title="1.1 æ¨¡æ‹Ÿç»„ä»¶"></a>1.1 æ¨¡æ‹Ÿç»„ä»¶</h2><ul><li><p><strong>$\color[RGB]{0,150,255}{å¤šç§ISA}$</strong> ï¼šgem5æ”¯æŒå¸¸è§çš„å„ç§æŒ‡ä»¤é›†ï¼šX86ã€ARMã€RISCVã€SPARCã€POWERã€MIPSã€‚ä¸åŒçš„æŒ‡ä»¤é›†åŒ…å«äº†æ¯æ¡æŒ‡ä»¤æ‰§è¡Œçš„å®Œæ•´è¿‡ç¨‹ã€‚å½“å‰gem5ä¸­å¯ç”¨äºå…¨ç³»ç»Ÿæ¨¡æ‹Ÿçš„ISAä¸»è¦æœ‰ARMã€X86å’ŒRISCVï¼›</p></li><li><p><strong>$\color[RGB]{0,150,255}{å¤šç§CPUæ¨¡å‹}$</strong> ï¼šgem5æ”¯æŒ4ç§CPUæ¨¡å‹ï¼šSimpleã€In-Orderã€Out-of-Order(ç®€ç§°O3)å’ŒKVMã€‚æ¯ç§CPUçš„å…·ä½“å®ç°å’ŒISAä¸å…³è”ï¼Œå› æ­¤CPUæ¨¡å‹å’ŒISAé—´å¯ä»¥ä»»æ„æ­é…ä»¥ç»„æˆå¤šç§è®¡ç®—æœºç³»ç»Ÿï¼›</p></li><li><p><strong>$\color[RGB]{0,150,255}{Port  Interface}$</strong> ï¼šè¯¥ç»„ä»¶çš„ä¸»è¦åŠŸèƒ½æ˜¯å°†ç³»ç»Ÿä¸­å„ä¸ªç»„ä»¶é€šè¿‡ç«¯å£è¿›è¡Œè¿æ¥ï¼Œå±è”½ä¸åŒæ¶æ„ç¡¬ä»¶å®ç°ç»†èŠ‚ï¼Œç®€åŒ–ä¸åŒç»„ä»¶é—´çš„è¿æ¥æ–¹å¼å¹¶å¢å¼ºç³»ç»Ÿé€šç”¨æ€§ï¼›</p></li><li><p><strong>$\color[RGB]{0,150,255}{Cacheæ¨¡å‹}$</strong> ï¼šåœ¨gem5ä¸­æ”¯æŒRubyå’ŒClassic Cacheä¸¤ç§æ¨¡å‹ã€‚</p></li><li><p><strong>Rubyå­˜å‚¨æ¨¡å‹</strong>:ç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰ä¸åŒCacheä¸€è‡´æ€§åè®®ï¼Œå¹¶å¯¹ç‰‡ä¸Šç½‘ç»œ(Network-of-Chip, NoC)è¿›è¡Œäº†è¯¦ç»†å»ºæ¨¡ï¼›</p></li><li><p><strong>Classicå­˜å‚¨æ¨¡å‹</strong>: æ”¯æŒç¡¬ç¼–ç çš„å±‚æ¬¡MOESIä¸€è‡´æ€§åè®®</p></li><li><p><strong>$\color[RGB]{0,150,255}{DRAMæ¨¡å‹}$</strong> ï¼šgem5ä¸­çš„DRAMæ¨¡å‹æ˜¯äº‹ä»¶é©±åŠ¨çš„ï¼Œæ”¯æŒå¤šç§å¸‚é¢ä¸Šå¸¸è§çš„DRAMï¼Œå¦‚DDR3ã€DDR4ã€DDR5ã€GDDRã€HMCã€HBMç­‰ã€‚åœ¨gem5ä¸­ï¼ŒDRAMæ¨¡å‹ä¸æ˜¯æ—¶é’Ÿç²¾ç¡®çš„ï¼Œä½†æ˜¯å¯ä»¥å’Œæ—¶é’Ÿç²¾ç¡®çš„DRAMæ¨¡æ‹Ÿå™¨DRAMSim3ç»“åˆä½¿ç”¨ï¼Œgem5ä¸­æä¾›äº†å’ŒDRAMSimè¿æ¥çš„æ¥å£ï¼›</p></li><li><p><strong>$\color[RGB]{0,150,255}{GPUæ¨¡å‹}$</strong> ï¼šå…¶GPUæ¨¡å‹åŸºäºAMDçš„Graphic Core Next(GCN),æ˜¯ä¸€ç§åŸºäºè®¡ç®—çš„æ—¶é’Ÿçº§GPUï¼Œæ”¯æŒå¤šç§å¼‚æ„ç³»ç»Ÿçš„è®¡ç®—åº”ç”¨ç¨‹åºï¼Œä¸æ”¯æŒå›¾å½¢åº”ç”¨ç¨‹åºã€‚ä¸€èˆ¬éƒ½ä½¿ç”¨AMDçš„APUæ¨¡æ‹Ÿå™¨(åŸºäºgem5)å¯¹GPUè¿›è¡Œæ¨¡æ‹Ÿï¼›</p></li><li><p><strong>$\color[RGB]{0,150,255}{I&#x2F;Oè®¾å¤‡}$</strong> ï¼šæ”¯æŒå¸¸è§çš„ç£ç›˜æ§åˆ¶å™¨ã€PCIã€Ethernetç­‰ç­‰ï¼Œæ˜¯è¿›è¡Œå…¨ç³»ç»Ÿæ¨¡æ‹Ÿå¿…ä¸å¯å°‘çš„ç³»ç»Ÿç»„ä»¶ï¼›</p></li><li><p><strong>$\color[RGB]{0,150,255}{ä¸°å¯Œçš„æ¥å£}$</strong>  ï¼šè™½ç„¶gem5æ¨¡æ‹Ÿå™¨åŠŸèƒ½å…¨é¢ã€é…ç½®çµæ´»ï¼Œä½†æ˜¯åœ¨å¯¹å„ä¸ªç»„ä»¶è¿›è¡Œå»ºæ¨¡çš„è¿‡ç¨‹ä¸­ï¼Œè€ƒè™‘å¤æ‚æ€§å’Œå®ç°ç­‰æ–¹é¢å› ç´ ï¼Œå¹¶ä¸æ˜¯å¯¹æ‰€æœ‰ç³»ç»Ÿç»„ä»¶è¿›è¡Œè¯¦ç»†å»ºæ¨¡ï¼Œå› æ­¤é…ç½®äº†å¤šç§å…¶ä»–ä½“ç³»ç»“æ„æ¨¡æ‹Ÿå™¨çš„ç»“æ„ï¼Œå¦‚SSTã€SystemCã€DRAMSysã€DRAMSimã€‚</p></li></ul><h2 id="1-2-æ¨¡æ‹Ÿæ¨¡å¼"><a href="#1-2-æ¨¡æ‹Ÿæ¨¡å¼" class="headerlink" title="1.2 æ¨¡æ‹Ÿæ¨¡å¼"></a>1.2 æ¨¡æ‹Ÿæ¨¡å¼</h2><p>gem5æ”¯æŒä¸¤ç§ç³»ç»Ÿæ¨¡æ‹Ÿæ–¹å¼ï¼Œä¸€ç§æ˜¯System Call Emulation(SE)ï¼Œä¹Ÿå«ç³»ç»Ÿè°ƒç”¨æ¨¡æ‹Ÿæ¨¡å¼ï¼›å¦ä¸€ç§æ˜¯Full System Simuluation(FS)ï¼Œä¹Ÿå«å…¨ç³»ç»Ÿæ¨¡æ‹Ÿæ¨¡å¼ã€‚</p><ul><li><p>ç³»ç»Ÿè°ƒç”¨æ¨¡æ‹Ÿæ¨¡å¼ System Call Emulation(SE)</p></li><li><p>å…¨ç³»ç»Ÿæ¨¡æ‹Ÿæ¨¡å¼ Full System Simuluation(FS)</p></li></ul><h1 id="äºŒã€Gem5å®‰è£…ä¸æµ‹è¯•"><a href="#äºŒã€Gem5å®‰è£…ä¸æµ‹è¯•" class="headerlink" title="äºŒã€Gem5å®‰è£…ä¸æµ‹è¯•"></a>äºŒã€Gem5å®‰è£…ä¸æµ‹è¯•</h1><p>å®˜ç½‘æ•™ç¨‹<a href="https://www.gem5.org/documentation/learning_gem5/part1/building/">gem5: Building gem5</a></p><h2 id="2-1-ä¸‹è½½gem5æºç "><a href="#2-1-ä¸‹è½½gem5æºç " class="headerlink" title="2.1 ä¸‹è½½gem5æºç "></a>2.1 ä¸‹è½½gem5æºç </h2><p>é€šè¿‡giteeç½‘ç«™ä¸‹è½½æºç ï¼Œé€Ÿåº¦è¾ƒå¿«</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://gitee.com/koverlu/gem5.git</span><br></pre></td></tr></table></figure><h2 id="2-2-å®‰è£…ä¾èµ–"><a href="#2-2-å®‰è£…ä¾èµ–" class="headerlink" title="2.2 å®‰è£…ä¾èµ–"></a>2.2 å®‰è£…ä¾èµ–</h2><p>æ ¹æ®å®˜ç½‘çš„å®‰è£…å‘½ä»¤ä¸€é”®å®‰è£…å…¨éƒ¨ä¾èµ–ï¼Œä¸»è¦åŒ…æ‹¬git,gcc,python,protobuf,Boost</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install build-essential git m4 scons zlib1g zlib1g-dev \</span><br><span class="line">    libprotobuf-dev protobuf-compiler libprotoc-dev libgoogle-perftools-dev \</span><br><span class="line">    python3-dev python-is-python3 libboost-all-dev pkg-config</span><br></pre></td></tr></table></figure><h2 id="2-3-è®¾ç½®swapäº¤æ¢åˆ†åŒº"><a href="#2-3-è®¾ç½®swapäº¤æ¢åˆ†åŒº" class="headerlink" title="2.3 è®¾ç½®swapäº¤æ¢åˆ†åŒº"></a>2.3 è®¾ç½®swapäº¤æ¢åˆ†åŒº</h2><p>å…³äºè®¾ç½®äº¤æ¢åˆ†åŒºï¼Œè¯»è€…å¯ä»¥è‡ªè¡Œç™¾åº¦æˆ–è€…çœ‹è¿™ç¯‡åšå®¢<a href="https://www.vpsgo.com/linux-swap.html">Linux Swapäº¤æ¢åˆ†åŒºè®¾ç½®æ•™ç¨‹</a>ã€‚ç®€å•è¯´ï¼ŒSwapåˆ†åŒºçš„ä½œç”¨å°±æ˜¯åœ¨å†…å­˜ä¸å¤Ÿçš„æƒ…å†µä¸‹ï¼Œæ“ä½œç³»ç»Ÿå…ˆæŠŠå†…å­˜ä¸­æš‚æ—¶ä¸ç”¨çš„æ•°æ®ï¼Œå­˜åˆ°ç¡¬ç›˜çš„äº¤æ¢ç©ºé—´ï¼Œè…¾å‡ºå†…å­˜æ¥è®©åˆ«çš„ç¨‹åºè¿è¡Œã€‚è€Œæ„å»ºgem5ç¯å¢ƒæ˜¯éœ€è¦å¾ˆå¤§çš„å†…å­˜ï¼Œå› æ­¤å¾ˆéœ€è¦é€šè¿‡äº¤æ¢åˆ†åŒºæ¥â€œæ‰©å¤§â€å†…å­˜ã€‚å¦åˆ™ä¼šå› ä¸ºå†…å­˜è¡¥ä¸è¶³è€ŒæŠ¥é”™å¦‚ä¸‹ï¼š</p><img src="/2023/10/17/Gem5%E6%A8%A1%E6%8B%9F%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89/image-20231025185902443.png" class="" title="error"><p>linuxä¸‹è®¾ç½®swapåˆ†åŒºçš„æ“ä½œå¦‚ä¸‹ï¼š</p><ul><li><p><strong>æ¸…ç©ºé»˜è®¤çš„Swapåˆ†åŒº</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">swapoff -a</span><br></pre></td></tr></table></figure></li><li><p><strong>åˆ›å»ºåˆ†åŒºæ–‡ä»¶å¹¶æŒ‡å®šå¤§å°</strong></p><p>&#x2F;var&#x2F;swapfileæ˜¯åˆ†åŒºæ–‡ä»¶çš„ä½ç½®ï¼Œbs*countä¸ºæ–‡ä»¶å¤§å°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dd if=/dev/zero of=/var/swapfile bs=1M count=10240</span><br></pre></td></tr></table></figure></li><li><p>æ ¼å¼åŒ–ä¸ºSwapåˆ†åŒºæ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mkswap /var/swapfile</span><br></pre></td></tr></table></figure></li><li><p>å¯åŠ¨Swapåˆ†åŒº</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo swapon /var/swapfile</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥çœ‹åˆ†åŒº</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">free -h</span><br></pre></td></tr></table></figure><p>è¾“å‡ºå¦‚ä¸‹æ‰€ç¤ºï¼Œåˆ†åŒºåˆ›å»ºæˆåŠŸï¼Œæˆ‘çš„è™šæ‹Ÿæœºè®¾ç½®çš„2GBå†…å­˜+10GBåˆ†åŒº</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ubuntu:~/Desktop/gem5$ free -h</span><br><span class="line">              total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:          1.9Gi       1.2Gi       116Mi        33Mi       567Mi       471Mi</span><br><span class="line">Swap:           9Gi       351Mi       9.7Gi</span><br></pre></td></tr></table></figure></li><li><p>è®¾ç½®å¼€æœºå¯åŠ¨</p><p>åªéœ€è¦åœ¨&#x2F;etc&#x2F;fstabä¸­çš„æœ«å°¾å¢åŠ ä¸€è¡Œ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/var/swapfile swap swap defaults 0 0</span><br></pre></td></tr></table></figure></li></ul><h2 id="2-4-ç¼–è¯‘gem5ç¯å¢ƒ"><a href="#2-4-ç¼–è¯‘gem5ç¯å¢ƒ" class="headerlink" title="2.4 ç¼–è¯‘gem5ç¯å¢ƒ"></a>2.4 ç¼–è¯‘gem5ç¯å¢ƒ</h2><p>ä¸‹é¢åˆ›å»ºä¸€ä¸ªç®€å•çš„x86ç¯å¢ƒè¯•ä¸€ä¸‹ï¼Œé¦–å…ˆè¿›å…¥gem5ç›®å½•ï¼Œç„¶åé€šè¿‡ä»¥ä¸‹å‘½ä»¤æ„å»ºç¯å¢ƒ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scons build/X86/gem5.opt -j[NumberOfThread]</span><br></pre></td></tr></table></figure><p>è¿™é‡Œä½¿ç”¨SConsæ„å»ºå·¥å…·ï¼ŒSConsä½¿ç”¨å½“å‰ç›®å½•å’Œæ¯ä¸ªå­ç›®å½•çš„SConstructæ–‡ä»¶æŸ¥æ‰¾å’Œç¼–è¯‘æ‰€æœ‰gem5æºä»£ç ã€‚</p><p>å‘½ä»¤ä¸­build&#x2F;X86&#x2F;gem5.optæ˜¯æ„å»ºç¯å¢ƒçš„ç›®æ ‡æ–‡ä»¶ï¼ˆoptåç¼€ä»£è¡¨å®ƒæ˜¯ä¸€ä¸ªå¸¦æœ‰è°ƒè¯•ç¬¦å·çš„ä¼˜åŒ–äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå…¶ä»–åç¼€åé¢ä¼šä»‹ç»ï¼‰ã€‚</p><p>[NumberOfThread]æ˜¯ç”¨æˆ·æœŸæœ›è¯¥ç¼–è¯‘ä½¿ç”¨å¤šå°‘ä¸ªçº¿ç¨‹è¿›è¡Œç¼–è¯‘ï¼Œå»æ‰-j é€‰é¡¹é»˜è®¤å•çº¿ç¨‹ï¼Œå»ºè®®è¯»è€…é‡‡ç”¨å¤šçº¿ç¨‹ç¼–è¯‘ï¼Œä¸€èˆ¬é€‰ä¸ºç”µè„‘ CPU æ ¸æ•° - 1 æœ€ä½³ã€‚</p><p>ç¼–è¯‘æ—¶é—´æˆ–è®¸ä¼šæœ‰äº›é•¿ï¼ˆæˆ‘çš„ç ´ç”µè„‘è·‘äº†ä¹ä¹å…«åä¸€å¤©ç»ˆäºç‚¼å‡ºæ¥äº†ï¼‰</p><p>å‡ºç°ä»¥ä¸‹logåˆ™è¡¨ç¤ºæ¨¡æ‹Ÿç¯å¢ƒæ„å»ºæˆåŠŸï¼</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">Checking for C header file Python.h... yes</span><br><span class="line">Checking for C library pthread... yes</span><br><span class="line">Checking for C library dl... yes</span><br><span class="line">Checking for C library util... yes</span><br><span class="line">Checking for C library m... yes</span><br><span class="line">Checking for C library python2.7... yes</span><br><span class="line">Checking for accept(0,0,0) in C++ library None... yes</span><br><span class="line">Checking for zlibVersion() in C++ library z... yes</span><br><span class="line">Checking for GOOGLE_PROTOBUF_VERIFY_VERSION in C++ library protobuf... yes</span><br><span class="line">Checking for clock_nanosleep(0,0,NULL,NULL) in C library None... yes</span><br><span class="line">Checking for timer_create(CLOCK_MONOTONIC, NULL, NULL) in C library None... no</span><br><span class="line">Checking for timer_create(CLOCK_MONOTONIC, NULL, NULL) in C library rt... yes</span><br><span class="line">Checking for C library tcmalloc... yes</span><br><span class="line">Checking for backtrace_symbols_fd((void*)0, 0, 0) in C library None... yes</span><br><span class="line">Checking for C header file fenv.h... yes</span><br><span class="line">Checking for C header file linux/kvm.h... yes</span><br><span class="line">Checking size of struct kvm_xsave ... yes</span><br><span class="line">Checking for member exclude_host in struct perf_event_attr...yes</span><br><span class="line">Building in /local.chinook/gem5/gem5-tutorial/gem5/build/X86</span><br><span class="line">Variables file /local.chinook/gem5/gem5-tutorial/gem5/build/variables/X86 not found,</span><br><span class="line">  using defaults in /local.chinook/gem5/gem5-tutorial/gem5/build_opts/X86</span><br><span class="line">scons: done reading SConscript files.</span><br><span class="line">scons: Building targets ...</span><br><span class="line"> [ISA DESC] X86/arch/x86/isa/main.isa -&gt; generated/inc.d</span><br><span class="line"> [NEW DEPS] X86/arch/x86/generated/inc.d -&gt; x86-deps</span><br><span class="line"> [ENVIRONS] x86-deps -&gt; x86-environs</span><br><span class="line"> [     CXX] X86/sim/main.cc -&gt; .o</span><br><span class="line"> ....</span><br><span class="line"> .... &lt;lots of output&gt;</span><br><span class="line"> ....</span><br><span class="line"> [   SHCXX] nomali/lib/mali_midgard.cc -&gt; .os</span><br><span class="line"> [   SHCXX] nomali/lib/mali_t6xx.cc -&gt; .os</span><br><span class="line"> [   SHCXX] nomali/lib/mali_t7xx.cc -&gt; .os</span><br><span class="line"> [      AR]  -&gt; drampower/libdrampower.a</span><br><span class="line"> [   SHCXX] nomali/lib/addrspace.cc -&gt; .os</span><br><span class="line"> [   SHCXX] nomali/lib/mmu.cc -&gt; .os</span><br><span class="line"> [  RANLIB]  -&gt; drampower/libdrampower.a</span><br><span class="line"> [   SHCXX] nomali/lib/nomali_api.cc -&gt; .os</span><br><span class="line"> [      AR]  -&gt; nomali/libnomali.a</span><br><span class="line"> [  RANLIB]  -&gt; nomali/libnomali.a</span><br><span class="line"> [     CXX] X86/base/date.cc -&gt; .o</span><br><span class="line"> [    LINK]  -&gt; X86/gem5.opt</span><br><span class="line">scons: done building targets. &lt;è¿™ä¸ªä»£è¡¨ç¯å¢ƒæ„å»ºæˆåŠŸ&gt;</span><br></pre></td></tr></table></figure><h2 id="2-5-æµ‹è¯•gem5"><a href="#2-5-æµ‹è¯•gem5" class="headerlink" title="2.5 æµ‹è¯•gem5"></a>2.5 æµ‹è¯•gem5</h2><p>ç¯å¢ƒæ„å»ºæˆåŠŸä»¥åï¼Œå°±å¯ä»¥æ ¹æ®å®˜ç½‘çš„æŒ‡å—ç¼–å†™pythoné…ç½®æ–‡ä»¶è¿›è¡Œç³»ç»Ÿæ¨¡æ‹Ÿäº†ã€‚</p><p>è¿™é‡Œå€ŸåŠ©å®˜ç½‘æä¾›çš„é»˜è®¤é…ç½®æ–‡ä»¶se.pyè¿›è¡Œé…ç½®ï¼Œå¹¶è¿è¡Œhello worldç¨‹åº</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./build/X86/gem5.opt ./configs/example/se.py -c ./tests/test-progs/hello/bin/x86/linux/hello</span><br></pre></td></tr></table></figure><p>å‡ºç°ä»¥ä¸‹è¾“å‡ºåˆ™è¡¨ç¤ºæ¨¡æ‹Ÿæ­£ç¡®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">gem5 Simulator System.  https://www.gem5.org</span><br><span class="line">gem5 is copyrighted software; use the --copyright option for details.</span><br><span class="line"></span><br><span class="line">gem5 version 22.1.0.0</span><br><span class="line">gem5 compiled Oct 24 2023 01:52:12</span><br><span class="line">gem5 started Oct 24 2023 02:00:27</span><br><span class="line">gem5 executing on ubuntu, pid 28261</span><br><span class="line">command line: ./build/X86/gem5.opt ./configs/example/se.py -c ./tests/test-progs/hello/bin/x86/linux/hello</span><br><span class="line"></span><br><span class="line">warn: The `get_runtime_isa` function is deprecated. Please migrate away from using this function.</span><br><span class="line">warn: The `get_runtime_isa` function is deprecated. Please migrate away from using this function.</span><br><span class="line">Global frequency set at 1000000000000 ticks per second</span><br><span class="line">warn: No dot file generated. Please install pydot to generate the dot file and pdf.</span><br><span class="line">build/X86/mem/dram_interface.cc:690: warn: DRAM device capacity (8192 Mbytes) does not match the address range assigned (512 Mbytes)</span><br><span class="line">0: system.remote_gdb: listening for remote gdb on port 7000</span><br><span class="line">**** REAL SIMULATION ****</span><br><span class="line">build/X86/sim/simulate.cc:192: info: Entering event queue @ 0.  Starting simulation...</span><br><span class="line">Hello world!</span><br><span class="line">Exiting @ tick 5985500 because exiting with last active thread context</span><br></pre></td></tr></table></figure><h1 id="å­¦ä¹ ç½‘ç«™"><a href="#å­¦ä¹ ç½‘ç«™" class="headerlink" title="å­¦ä¹ ç½‘ç«™"></a>å­¦ä¹ ç½‘ç«™</h1><p><a href="https://blog.csdn.net/qq_45726331/article/details/129757815?spm=1001.2101.3001.6650.2&utm_medium=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~Rate-2-129757815-blog-128272972.235%5Ev38%5Epc_relevant_sort_base2&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~Rate-2-129757815-blog-128272972.235%5Ev38%5Epc_relevant_sort_base2&utm_relevant_index=5">æœ‰å…³gem5æ¨¡æ‹Ÿå™¨çš„èµ„æ–™å¯¼èˆª</a></p><p><a href="https://www.gem5.org/">Gem5å®˜ç½‘</a></p><p><a href="https://www.gem5.org/documentation/learning_gem5/introduction/">Gem5å®˜æ–¹å­¦ä¹ å‘å¯¼</a></p><p><a href="https://mp.weixin.qq.com/s/VoPI0jbAERg8VK98oVff4Q">gem5å­¦ä¹ ç¬”è®°ä¸€ï¼šæ¨¡æ‹Ÿå™¨å®‰è£…ä¸ä½¿ç”¨ (qq.com)</a></p><p><a href="https://www.terapines.com/post/767/">å…†æ¾ç§‘æŠ€ç ”å‘çš„åŸºäºgem5çš„æ¨¡æ‹Ÿå™¨zemu</a></p><p><a href="https://blog.csdn.net/qq_43381135/article/details/104371236">GEM5æ•™ç¨‹â€“gem5å¼€å§‹ä¹‹æ—…ï¼ˆä¸€ï¼‰-CSDNåšå®¢</a></p><p><a href="https://blog.csdn.net/qq_46675545/category_12120503.html">Gem5æ¨¡æ‹Ÿå™¨_å¥½å•Šå•Šå•Šå•Šçš„åšå®¢-CSDNåšå®¢</a></p><p><a href="https://blog.csdn.net/ivy_reny/category_6666068.html">gem5_ivy_renyçš„åšå®¢-CSDNåšå®¢</a></p><p><a href="https://blog.csdn.net/wyj7260/category_1301132.html">gem5_wyj7260çš„åšå®¢-CSDNåšå®¢</a></p><p>æ”¶é›†ä¸€ä¸‹å‰è¾ˆä»¬çš„è¸©å‘è®°å½•</p><p><a href="https://zhuanlan.zhihu.com/p/412917633">gem5å®‰è£…è¸©å‘æŒ‡å— - çŸ¥ä¹ (zhihu.com)</a></p><ul><li><p>æŠ¥é”™ <strong>ImportError: No module named six</strong></p><p>  é€šè¿‡pip å®‰è£…sixæ¨¡å—å³å¯ <code>pip install six</code></p></li><li><p>æŠ¥é”™<strong>util&#x2F;cpt_upgrader.py: Permission denied</strong></p><p>  æ‰§è¡Œ<code>sudo chmod 777 ./util/cpt_upgrader.py</code>ç»™æƒé™ï¼Œ</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> Gem5æ¨¡æ‹Ÿå™¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Gem5 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Markdownå¸¸ç”¨è¯­æ³•</title>
      <link href="/2023/10/07/Markdown%E5%B8%B8%E7%94%A8%E8%AF%AD%E6%B3%95/"/>
      <url>/2023/10/07/Markdown%E5%B8%B8%E7%94%A8%E8%AF%AD%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>markdownæ˜¯ä¸€ç§è¢«å¹¿æ³›ä½¿ç”¨çš„è½»é‡çº§æ ‡è®°è¯­è¨€ï¼Œå®ƒå…è®¸äººä»¬ä½¿ç”¨æ˜“è¯»æ˜“å†™çš„çº¯æ–‡æœ¬æ ¼å¼ç¼–å†™æ–‡æ¡£ï¼ŒMarkdownæ–‡ä»¶çš„åç¼€åæ˜¯â€œ.mdâ€ã€‚</p><h1 id="ä¿®æ”¹æ–‡å­—é¢œè‰²"><a href="#ä¿®æ”¹æ–‡å­—é¢œè‰²" class="headerlink" title="ä¿®æ”¹æ–‡å­—é¢œè‰²"></a>ä¿®æ”¹æ–‡å­—é¢œè‰²</h1><p>é»˜è®¤å­—ä½“é¢œè‰²è‡ªç„¶æ˜¯é»‘è‰²å•¦ï¼Œæƒ³è¦ä¿®æ”¹å­—ä½“é¢œè‰²æœ‰ä¸¤ç§æ–¹æ³•</p><span id="more"></span><h2 id="1-htmlæ ¼å¼"><a href="#1-htmlæ ¼å¼" class="headerlink" title="1. htmlæ ¼å¼"></a>1. htmlæ ¼å¼</h2><h3 id="ï¼ˆ1ï¼‰è‹±æ–‡å•è¯æŒ‡ç¤ºé¢œè‰²"><a href="#ï¼ˆ1ï¼‰è‹±æ–‡å•è¯æŒ‡ç¤ºé¢œè‰²" class="headerlink" title="ï¼ˆ1ï¼‰è‹±æ–‡å•è¯æŒ‡ç¤ºé¢œè‰²"></a>ï¼ˆ1ï¼‰è‹±æ–‡å•è¯æŒ‡ç¤ºé¢œè‰²</h3><p>å¯ä»¥é€šè¿‡htmlçš„å„ç§è‹±æ–‡é¢œè‰²åæ¥ä½¿ç”¨é¢œè‰²</p><p><a href="https://www.runoob.com/html/html-colornames.html">HTML é¢œè‰²å</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;font color=&#x27;red&#x27;&gt;æ–‡æœ¬&lt;/font&gt;</span><br></pre></td></tr></table></figure><h3 id="ï¼ˆ2ï¼‰RGBæŒ‡ç¤ºé¢œè‰²"><a href="#ï¼ˆ2ï¼‰RGBæŒ‡ç¤ºé¢œè‰²" class="headerlink" title="ï¼ˆ2ï¼‰RGBæŒ‡ç¤ºé¢œè‰²"></a>ï¼ˆ2ï¼‰RGBæŒ‡ç¤ºé¢œè‰²</h3><p>RGBé¢œè‰²æ ¼å¼ï¼š$#RRGGBB$ï¼ŒRGBå‡ç”¨16è¿›åˆ¶æ•°å­—è¡¨ç¤º</p><p>å…¶ä¸­ä¸¤ä¸ªRä»£è¡¨äº†çº¢è‰²å…‰ï¼Œä¸¤ä¸ªGä»£è¡¨äº†ç»¿è‰²å…‰ï¼Œä¸¤ä¸ªBä»£è¡¨äº†è“è‰²å…‰</p><p>å¦‚$#FF0000$ä»£è¡¨äº†255ä»½çº¢è‰²å…‰ï¼Œ0ä»½ç»¿è‰²å…‰å’Œ0ä»½è“è‰²å…‰ã€‚</p><p><a href="http://www.yini.org/liuyan/rgbcolor.htm">RGBé¢œè‰²è¡¨</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;font color=#FF0000&gt;æ–‡æœ¬&lt;/font&gt;</span><br></pre></td></tr></table></figure><h3 id="æ•ˆæœï¼š"><a href="#æ•ˆæœï¼š" class="headerlink" title="æ•ˆæœï¼š"></a>æ•ˆæœï¼š</h3><p><font color='red'>æˆ‘æ˜¯çº¢è‰²</font></p><p><font color=#119966>æˆ‘æ˜¯#119966</font></p><h2 id="2-é€šè¿‡LaTeXå†…è”å…¬å¼"><a href="#2-é€šè¿‡LaTeXå†…è”å…¬å¼" class="headerlink" title="2. é€šè¿‡LaTeXå†…è”å…¬å¼"></a>2. é€šè¿‡LaTeXå†…è”å…¬å¼</h2><h3 id="ï¼ˆ1ï¼‰è‹±æ–‡å•è¯æŒ‡ç¤ºé¢œè‰²-1"><a href="#ï¼ˆ1ï¼‰è‹±æ–‡å•è¯æŒ‡ç¤ºé¢œè‰²-1" class="headerlink" title="ï¼ˆ1ï¼‰è‹±æ–‡å•è¯æŒ‡ç¤ºé¢œè‰²"></a>ï¼ˆ1ï¼‰è‹±æ–‡å•è¯æŒ‡ç¤ºé¢œè‰²</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$\textcolor&#123;Blue&#125;&#123;æ–‡æœ¬&#125;$</span><br><span class="line">æˆ–è€…ç®€å†™ä¸º</span><br><span class="line">$\color&#123;Blue&#125;&#123;æ–‡æœ¬&#125;$</span><br></pre></td></tr></table></figure><p>$ \color{Blue}{æ–‡æœ¬} \mu $</p><h3 id="ï¼ˆ2ï¼‰RGBæŒ‡ç¤ºé¢œè‰²-1"><a href="#ï¼ˆ2ï¼‰RGBæŒ‡ç¤ºé¢œè‰²-1" class="headerlink" title="ï¼ˆ2ï¼‰RGBæŒ‡ç¤ºé¢œè‰²"></a>ï¼ˆ2ï¼‰RGBæŒ‡ç¤ºé¢œè‰²</h3><p>æœ‰ä¸¤ç§é€šè¿‡RGBæŒ‡ç¤ºé¢œè‰²çš„è¯­æ³•ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$\textcolor[rgb]&#123;r,g,b&#125;&#123;æ–‡æœ¬&#125;$</span><br><span class="line">å…¶ä¸­&#123;r,g,b&#125;ä»£è¡¨redã€greenå’Œblueä¸‰ç§é¢œè‰²çš„ç»„åˆï¼Œå–å€¼èŒƒå›´ä¸º[0-1]</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$\textcolor[RGB]&#123;R,G,B&#125;&#123;æ–‡æœ¬&#125;$</span><br><span class="line">å…¶ä¸­&#123;R,G,B&#125;ä»£è¡¨redã€greenå’Œblueä¸‰ç§é¢œè‰²çš„ç»„åˆï¼Œå–å€¼èŒƒå›´ä¸º[0-255]</span><br></pre></td></tr></table></figure><p>$$<br>\textcolor[RGB]{0,0,255}{æ–‡æœ¬}<br>$$</p><p>$\textcolor[RGB]{0,0,255}{æ–‡æœ¬}$</p>]]></content>
      
      
      
        <tags>
            
            <tag> Markdown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexoä¸Šä¼ å›¾ç‰‡</title>
      <link href="/2023/10/07/Hexo%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87/"/>
      <url>/2023/10/07/Hexo%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87/</url>
      
        <content type="html"><![CDATA[<p>Hexoç½‘ç«™å·²ç»æ­å»ºå¥½äº†ï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹æ„‰å¿«åœ°å†™åšå®¢äº†ï¼</p><h2 id="1-Typoraç¼–è¾‘å™¨"><a href="#1-Typoraç¼–è¾‘å™¨" class="headerlink" title="1. Typoraç¼–è¾‘å™¨"></a>1. Typoraç¼–è¾‘å™¨</h2><p>Typoraæ˜¯ä¸€ç§markdownè¯­è¨€çš„å¸¸ç”¨ç¼–è¾‘å™¨ï¼Œè¿™ä¸ªè½¯ä»¶çš„æ–¹ä¾¿ä¹‹å¤„åœ¨äºå¯ä»¥ç›´æ¥å°†markdownè¯­æ³•å‘ˆç°å‡ºå…¶æ•ˆæœï¼Œå¹¶ä¸”é›†æˆäº†è®¸å¤šæœ‰ç”¨çš„å·¥å…·ï¼Œæ˜¯ç¼–è¾‘markdownçš„ä¸äºŒä¹‹é€‰ã€‚</p><p><a href="https://typora.io/">Typoraå®˜ç½‘</a></p><hr><h2 id="2-Hexoæ’å…¥æœ¬åœ°å›¾ç‰‡é‡åˆ°çš„é—®é¢˜"><a href="#2-Hexoæ’å…¥æœ¬åœ°å›¾ç‰‡é‡åˆ°çš„é—®é¢˜" class="headerlink" title="2. Hexoæ’å…¥æœ¬åœ°å›¾ç‰‡é‡åˆ°çš„é—®é¢˜"></a>2. Hexoæ’å…¥æœ¬åœ°å›¾ç‰‡é‡åˆ°çš„é—®é¢˜</h2><p>markdownçš„å›¾ç‰‡æ’å…¥è¯­æ³•ä¸º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![å›¾ç‰‡æè¿°](å›¾ç‰‡è·¯å¾„)</span><br></pre></td></tr></table></figure><p>å¦‚æœä½¿ç”¨Typoraï¼Œå¯ä»¥ç›´æ¥å°†å›¾ç‰‡å¤åˆ¶ç²˜è´´åœ¨æƒ³è¦æ”¾ç½®çš„ä½ç½®ï¼Œååˆ†æ–¹ä¾¿</p><p>å½“æˆ‘ä»¬å°†å›¾ç‰‡ç›´æ¥å¤åˆ¶åˆ°Typoraä¸­æ—¶ï¼Œä¼šå‡ºç°å›¾ç‰‡å¯ä»¥åœ¨markdownä¸­æ˜¾ç¤ºï¼Œä½†å´æ— æ³•åœ¨ç½‘é¡µä¸­æ˜¾ç¤ºçš„é—®é¢˜ã€‚</p><span id="more"></span><p><img src="/Hexo%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87/image-20231007210728956.png" alt="å›¾ä¸€ï¼šTyporaè§†è§’"></p><p><img src="/Hexo%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87/image-20231007210809543.png" alt="å›¾äºŒï¼šç½‘é¡µè§†è§’"></p><hr><h2 id="3-å°†æœ¬åœ°å›¾ç‰‡ä¸Šä¼ è‡³Github"><a href="#3-å°†æœ¬åœ°å›¾ç‰‡ä¸Šä¼ è‡³Github" class="headerlink" title="3. å°†æœ¬åœ°å›¾ç‰‡ä¸Šä¼ è‡³Github"></a>3. å°†æœ¬åœ°å›¾ç‰‡ä¸Šä¼ è‡³Github</h2><p>è¿™å…¶å®å¾ˆå¥½ç†è§£ï¼Œå› ä¸ºä½¿ç”¨çš„å›¾ç‰‡è¿˜åœ¨ä½ çš„æœ¬åœ°ï¼Œmarkdownè¯­æ³•ä¹Ÿä½¿ç”¨çš„æ˜¯æœ¬åœ°è·¯å¾„ï¼ˆå¦‚å›¾ä¸‰ï¼‰ï¼Œè€Œé™æ€ç½‘é¡µä¸å¯èƒ½åœ¨ä½ ç”µè„‘æœ¬åœ°æ‰¾å›¾ç‰‡ï¼Œæ‰€ä»¥éœ€è¦æˆ‘ä»¬å°†å›¾ç‰‡ä¹Ÿä¸€èµ·ä¸Šä¼ ã€‚</p><p><img src="/Hexo%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87/image-20231007205825905.png" alt="å›¾ä¸‰ï¼šæˆ‘ä»å¾®ä¿¡ç›´æ¥å¤åˆ¶ç²˜è´´åˆ°Typoraçš„ä¸€å¼ å›¾ç‰‡"></p><p>ä¸Šä¼ å›¾ç‰‡ç­‰èµ„æºååˆ†ç®€å•ï¼Œåªéœ€è¦åœ¨Hexoçš„é…ç½®æ–‡ä»¶_config.ymlé‡Œå°†post_asset_folderè¿™ä¸€ä¸ªé€‰é¡¹é…ç½®ä»falseæ›´æ”¹ä¸ºtrue</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">post_asset_folder: true</span><br></pre></td></tr></table></figure><p>äºæ˜¯æ¯å½“ä½ æ–°å»ºä¸€ä¸ªåšå®¢æ—¶ï¼ŒHexoä¼šè‡ªåŠ¨åœ¨ç›¸åŒç›®å½•å»ºç«‹ä¸€ä¸ªåŒåçš„èµ„æºæ–‡ä»¶å¤¹ï¼Œåªéœ€è¦å°†å›¾ç‰‡æ”¾åˆ°èµ„æºæ–‡ä»¶å¤¹ä¸­ï¼Œç„¶ä¼šåœ¨markdownä¸­é€šè¿‡ç›¸å¯¹è·¯å¾„æ‰¾åˆ°å›¾ç‰‡å°±å¯ä»¥å•¦ï¼</p><p>ç„¶è€Œï¼Œæ¯æ¬¡åœ¨åšå®¢ä¸­æ·»åŠ å›¾ç‰‡è¿˜è¦æ‰‹åŠ¨æ”¾åˆ°èµ„æºæ–‡ä»¶å¤¹ä¸­ï¼Œç„¶åå†ç”¨è¯­æ³•![]()å»æè¿°å›¾ç‰‡ï¼Œå®åœ¨æ˜¯éº»çƒ¦ï¼</p><p>å¥½åœ¨æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Typoraä¸­çš„å·¥å…·ï¼Œä¾æ¬¡åœ¨Typoraä¸­è¿›å…¥æ–‡ä»¶-&gt;åå¥½è®¾ç½®-&gt;å›¾åƒï¼Œç„¶ååœ¨æ’å…¥å›¾ç‰‡æ—¶é€‰æ‹©å¤åˆ¶åˆ°æŒ‡å®šè·¯å¾„ï¼Œä¹Ÿå°±æ˜¯é‚£ä¸ªåœ¨åŒç›®å½•ä¸‹åŒåçš„èµ„æºæ–‡ä»¶å¤¹.&#x2F;&amp;{filename}ï¼Œå¹¶å‹¾é€‰</p><ul><li><p>å¯¹æœ¬åœ°ä½ç½®çš„å›¾ç‰‡åº”ç”¨ä¸Šè¿°è§„åˆ™</p></li><li><p>å¯¹ç½‘ç»œä½ç½®çš„å›¾ç‰‡åº”ç”¨ä¸Šè¿°è§„åˆ™</p></li><li><p>ä¼˜å…ˆä½¿ç”¨ç›¸å¯¹è·¯å¾„</p></li></ul><p>å»ºè®®éƒ½å‹¾é€‰ä¸Šï¼Œè‡³å°‘è¦å‹¾é€‰ä¸Šç¬¬ä¸€é¡¹</p><p><img src="/Hexo%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87/image-20231007211935125.png" alt="å›¾å››"></p><img src="/2023/10/07/Hexo%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87/image-20231007212121607.png" class="" title="å›¾äº”"><p>äºæ˜¯ï¼Œå¤åˆ¶ç²˜è´´è¿‡æ¥çš„å›¾ç‰‡å°±å¯ä»¥è‡ªåŠ¨ä¿å­˜åœ¨èµ„æºæ–‡ä»¶å¤¹ä¸­ï¼Œå¹¶ä¸”ä¹Ÿè‡ªåŠ¨å°†å›¾ç‰‡è·¯å¾„æŒ‡å‘äº†èµ„æºæ–‡ä»¶å¤¹ä¸­çš„è¿™å¼ å›¾ç‰‡ï¼ŒçœŸæ–¹ä¾¿ï¼</p><img src="/2023/10/07/Hexo%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87/image-20231007212607249.png" class="" title="å›¾å…­"><img src="/2023/10/07/Hexo%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87/image-20231007212643086.png" class="" title="å›¾ä¸ƒ"><p>å½“æˆ‘æ»¡å¿ƒæ¬¢å–œåœ°å°†åšå®¢éƒ¨ç½²åˆ°Githubä¸Šæ—¶ï¼Œå´å‘ç°è¿˜æ˜¯å’Œå›¾äºŒä¸€æ ·æ²¡æ³•æ˜¾ç¤º</p><p>è¿™æ˜¯é—®ä»€ä¹ˆå‘¢ï¼Ÿï¼</p><hr><h2 id="4-Hexoæ˜¾ç¤ºå›¾åƒè¯­æ³•"><a href="#4-Hexoæ˜¾ç¤ºå›¾åƒè¯­æ³•" class="headerlink" title="4. Hexoæ˜¾ç¤ºå›¾åƒè¯­æ³•"></a>4. Hexoæ˜¾ç¤ºå›¾åƒè¯­æ³•</h2><p>ç¿»é˜…Hexo<a href="https://hexo.io/zh-cn/docs/asset-folders#%E7%9B%B8%E5%AF%B9%E8%B7%AF%E5%BE%84%E5%BC%95%E7%94%A8%E7%9A%84%E6%A0%87%E7%AD%BE%E6%8F%92%E4%BB%B6">å®˜æ–¹æ•™ç¨‹ä¹‹å</a>ï¼Œæ‰å‘ç°Hexoå¹¶ä¸å¯ä»¥ç›´æ¥å°†markdownæ˜¾ç¤ºå›¾ç‰‡çš„![]()è¯­æ³•åœ¨ç½‘é¡µä¸­æ˜¾ç¤ºå›¾ç‰‡ï¼Œè€Œå¿…é¡»ä½¿ç”¨ä»¥ä¸‹å›¾åƒæ ‡ç­¾æ’ä»¶æ¥æ’å…¥å›¾ç‰‡ï¼Œå¦åˆ™å›¾ç‰‡ä¼šè·¯å¾„é”™è¯¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% asset_path slug %&#125;</span><br><span class="line">&#123;% asset_img slug [title] %&#125;</span><br><span class="line">&#123;% asset_link slug [title] %&#125;</span><br></pre></td></tr></table></figure><p>åœ¨markdownä¸­ç¼–è¾‘å¦‚ä¸‹ä»£ç ä¹‹åï¼Œå¡æ¯”ç»ˆäºèƒ½åœ¨ç½‘é¡µä¸Šå‡ºç°äº†ï¼</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% asset_img c0229a294ce2c67e2ba3d44298fcb98.jpg [æˆ‘æ­£åœ¨å­¦ä¹ ï¼Œè¯·ä¸è¦æ‰“æ‰°] %&#125;</span><br></pre></td></tr></table></figure><img src="/2023/10/07/Hexo%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87/image-20231008110447546.png" class="" title="å›¾å…«ï¼šä½¿ç”¨Hexoæ’å…¥å›¾ç‰‡è¯­æ³•â€”â€”åœ¨é¡µé¢ä¸­çš„è§†è§’"><p>ç„¶è€Œï¼Œè¿™ç§æ’å…¥å›¾ç‰‡çš„Hexoè¯­æ³•ä¸ä»…è¾ƒä¸ºç¹çï¼Œè€Œä¸”åœ¨ç¼–è¾‘çš„æ—¶å€™è¿˜ä¸å¯ä»¥åœ¨ç¼–è¾‘å™¨é‡Œå³æ—¶æŸ¥çœ‹å›¾ç‰‡ï¼Œè¿™ååˆ†ä¸æ–¹ä¾¿ã€‚ã€‚</p><img src="/2023/10/07/Hexo%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87/image-20231008110647937.png" class="" title="å›¾ä¹ï¼šä½¿ç”¨Hexoæ’å…¥å›¾ç‰‡è¯­æ³•â€”â€”åœ¨ç¼–è¾‘å™¨ä¸­çš„è§†è§’"><p>è‡³æ­¤ï¼Œæˆ‘ä»¬ç°åœ¨æœ‰äº†ä¸¤ç§éƒ½ä¸å®Œç¾çš„æ’å…¥å›¾ç‰‡çš„æ–¹æ³•</p><ol><li>ä½¿ç”¨markdownè¯­æ³•ï¼Œå¥½å¤„æ˜¯å¯ä»¥å¾ˆæ–¹ä¾¿åœ°æ’å…¥å›¾ç‰‡ï¼Œè€Œä¸”å¯ä»¥äº«å—å®æ—¶é¢„è§ˆå›¾ç‰‡ï¼Œä½†åå¤„æ˜¯æ ¹æœ¬å› ä¸ºè·¯å¾„é—®é¢˜æ— æ³•åœ¨ç½‘é¡µæ˜¾ç¤ºå›¾ç‰‡ã€‚</li><li>ä½¿ç”¨Hexoè¯­æ³•ï¼Œå¯ä»¥åœ¨ç½‘é¡µæ˜¾ç¤ºå›¾ç‰‡ï¼Œä½†æ¯æ’å…¥ä¸€å¼ å›¾ç‰‡éœ€è¦æ‰‹åŠ¨ç¼–è¾‘å›¾ç‰‡ä»£ç ï¼Œè¿˜è¦æ‰‹åŠ¨æŠŠå›¾ç‰‡æ”¾è¿›èµ„æºæ–‡ä»¶å¤¹ï¼Œè¿˜ä¸èƒ½å®æ—¶é¢„è§ˆã€‚</li></ol><p>æ—¢ç„¶å¦‚æ­¤ï¼Œæˆ‘ä»¬å¯ä¸å¯ä»¥å°†ä¸¤ç§æ–¹æ³•ç»“åˆèµ·æ¥ï¼Œå®ç°æ— ç—›æ’å…¥å›¾ç‰‡çš„æ¢¦æƒ³ï¼Ÿ</p><p>ä½¿ç”¨Hexoçš„æ’ä»¶å°±å¯ä»¥å®ç°ï¼</p><hr><h2 id="5-Hexoæ’ä»¶å®ç°æ— ç—›æ’å…¥å›¾ç‰‡"><a href="#5-Hexoæ’ä»¶å®ç°æ— ç—›æ’å…¥å›¾ç‰‡" class="headerlink" title="5. Hexoæ’ä»¶å®ç°æ— ç—›æ’å…¥å›¾ç‰‡"></a>5. Hexoæ’ä»¶å®ç°æ— ç—›æ’å…¥å›¾ç‰‡</h2><p><a href="https://github.com/xcodebuild/hexo-asset-image">hexo-asset-img</a>æ’ä»¶å¯ä»¥åœ¨æ–‡ç« ç¼–è¯‘ä¸ºhtmlä¹‹å‰ï¼Œè‡ªåŠ¨åœ°å°†markdownçš„å›¾ç‰‡è¯­æ³•è‡ªåŠ¨è½¬æ¢æˆHexoçš„å›¾ç‰‡è¯­æ³•ï¼Œå³</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![example](blogname/example.jpg) --&gt; &#123;% asset_img example.jpg example %&#125;</span><br></pre></td></tr></table></figure><p>hexo-asset-imgçš„å®‰è£…å‘½ä»¤å¦‚ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install https://github.com/CodeFalling/hexo-asset-image --save</span><br></pre></td></tr></table></figure><p>ps.æˆ–è€…å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼Œå®‰è£…ååˆ é™¤node_modulesæ–‡ä»¶å¤¹ä¸­çš„hexo-asset-imageæ–‡ä»¶å¤¹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-asset-img --save</span><br></pre></td></tr></table></figure><p>pps.æœ‰ä¸å°‘æ•™ç¨‹å®‰è£…äº† hexo-asset-image åŒ…ï¼Œä½†æˆ‘ç”µè„‘ä¸Šä¸è¡Œï¼Œè¸©äº†ä¸€å¤©å‘</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-asset-image --save</span><br></pre></td></tr></table></figure><p>å®‰è£…å¥½æ’ä»¶åï¼Œè¿˜éœ€è¦åœ¨Hexoçš„é…ç½®æ–‡ä»¶_config.ymlé‡ŒåŠ å…¥ä¸¤ä¸ªé…ç½®é¡¹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">marked:</span><br><span class="line">  prependRoot: true</span><br><span class="line">  postAsset: true</span><br></pre></td></tr></table></figure><p>å¦‚æ­¤ï¼Œå°±å¯ä»¥åœ¨ç½‘é¡µä¸Šçœ‹åˆ°æ’å…¥çš„å›¾ç‰‡äº†ï¼</p><img src="/2023/10/07/Hexo%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87/image-20231008123837571.png" class="" title="å›¾åï¼šåšå®¢ä¸­æ’å…¥æœ¬åœ°å›¾ç‰‡æ•ˆæœå›¾"><hr><h2 id="6-å…¨éƒ¨æ­¥éª¤"><a href="#6-å…¨éƒ¨æ­¥éª¤" class="headerlink" title="6. å…¨éƒ¨æ­¥éª¤"></a>6. å…¨éƒ¨æ­¥éª¤</h2><ol><li><p>å®‰è£…Typoraç¼–è¾‘å™¨</p></li><li><p>åœ¨Typoraä¸­è¿›å…¥æ–‡ä»¶-&gt;åå¥½è®¾ç½®-&gt;å›¾åƒï¼Œåœ¨æ’å…¥å›¾ç‰‡æ—¶é€‰æ‹©å¤åˆ¶åˆ°æŒ‡å®šè·¯å¾„ï¼Œä¹Ÿå°±æ˜¯é‚£ä¸ªåœ¨åŒç›®å½•ä¸‹åŒåçš„èµ„æºæ–‡ä»¶å¤¹.&#x2F;&amp;{filename}ï¼Œå¹¶å‹¾é€‰</p><ul><li><p>å¯¹æœ¬åœ°ä½ç½®çš„å›¾ç‰‡åº”ç”¨ä¸Šè¿°è§„åˆ™</p></li><li><p>å¯¹ç½‘ç»œä½ç½®çš„å›¾ç‰‡åº”ç”¨ä¸Šè¿°è§„åˆ™</p></li><li><p>ä¼˜å…ˆä½¿ç”¨ç›¸å¯¹è·¯å¾„</p></li></ul></li><li><p>é€šè¿‡ä»¥ä¸‹å‘½ä»¤å®‰è£…æ’ä»¶hexo-asset-img</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install https://github.com/CodeFalling/hexo-asset-image --save</span><br></pre></td></tr></table></figure></li><li><p>åœ¨Hexoçš„é…ç½®æ–‡ä»¶_config.ymlé‡Œå°†</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">post_asset_folder: true</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªé…ç½®é¡¹ç”±falseæ”¹ä¸ºture</p><p>å¹¶åŠ å…¥ä»¥ä¸‹ä¸¤ä¸ªé…ç½®é¡¹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">marked:</span><br><span class="line">  prependRoot: true</span><br><span class="line">  postAsset: true</span><br></pre></td></tr></table></figure></li></ol><hr><h2 id="7-æœ€ç»ˆæ•ˆæœ"><a href="#7-æœ€ç»ˆæ•ˆæœ" class="headerlink" title="7. æœ€ç»ˆæ•ˆæœ"></a>7. æœ€ç»ˆæ•ˆæœ</h2><p>ç»è¿‡ä»¥ä¸Šæ“ä½œï¼Œæˆ‘ä»¬ä»¥åå°±åœ¨Hexoåšå®¢ä¸­å¾ˆæ–¹ä¾¿åœ°æ’å…¥æœ¬åœ°å›¾ç‰‡å•¦ã€‚</p><p>åªéœ€è¦å°†å›¾ç‰‡ç›´æ¥å¤åˆ¶ç²˜è´´åˆ°Typoraç¼–è¾‘å™¨ä¸­ï¼Œå›¾ç‰‡å°±ä¼šè‡ªåŠ¨ä¿å­˜åœ¨èµ„æºæ–‡ä»¶å¤¹ä¸­ï¼Œå¹¶é€šè¿‡æ­£ç¡®çš„è·¯å¾„ä¿å­˜ï¼ŒåŒæ—¶è¿˜å¯ä»¥æ”¯æŒç¼–è¾‘è¿‡ç¨‹ä¸­çš„å®æ—¶é¢„è§ˆï¼</p><p>psï¼šæœ‰å¯¹äºå›¾ç‰‡å¦‚ä½•æ·»åŠ é¢˜æ³¨æ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥çœ‹è¿™ç¯‡åšå®¢</p><p><a href="https://blog.csdn.net/Lincain/article/details/89892249">Markdown å›¾ç‰‡å±…ä¸­å¹¶æ·»åŠ æ ‡é¢˜_markdownå›¾ç‰‡æ ‡é¢˜-CSDNåšå®¢</a></p><p>å‚è€ƒé“¾æ¥ğŸ”—ï¼š</p><ul><li><p><a href="https://moeci.com/posts/hexo-typora/">Hexo + Typora + å¼€å‘Hexoæ’ä»¶ è§£å†³å›¾ç‰‡è·¯å¾„ä¸ä¸€è‡´ | yiyunâ€™s Blog (moeci.com)</a></p></li><li><p><a href="http://etrd.org/2017/01/23/hexo%E4%B8%AD%E5%AE%8C%E7%BE%8E%E6%8F%92%E5%85%A5%E6%9C%AC%E5%9C%B0%E5%9B%BE%E7%89%87/">hexoä¸­å®Œç¾æ’å…¥æœ¬åœ°å›¾ç‰‡ | ETRD</a></p></li><li><p><a href="https://hexo.io/zh-cn/docs/asset-folders">èµ„æºæ–‡ä»¶å¤¹ | Hexo</a></p></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> æ’å…¥å›¾ç‰‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç½‘ç»œé…ç½®</title>
      <link href="/2023/10/05/%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE/"/>
      <url>/2023/10/05/%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<h2 id="1-ifconfigï¼ˆLinuxï¼‰-ipconfigï¼ˆwindowsï¼‰"><a href="#1-ifconfigï¼ˆLinuxï¼‰-ipconfigï¼ˆwindowsï¼‰" class="headerlink" title="1. ifconfigï¼ˆLinuxï¼‰ &#x2F; ipconfigï¼ˆwindowsï¼‰"></a>1. ifconfigï¼ˆLinuxï¼‰ &#x2F; ipconfigï¼ˆwindowsï¼‰</h2><p>ä½œç”¨ï¼šç”¨äºæŸ¥çœ‹ç½‘å¡é…ç½®ä¿¡æ¯</p><p>å¦‚IPV4åœ°å€ã€IPV6åœ°å€ã€å·¥ä½œçŠ¶æ€ã€ç½‘ç»œç±»å‹</p><p>å‚è€ƒåšå®¢ï¼š<a href="https://blog.csdn.net/l_liangkk/article/details/114959914">æŸ¥çœ‹ç½‘å¡ä¿¡æ¯ï¼šifconfigå‘½ä»¤åŠè¯¦ç»†ä»‹ç»_ifconfig ether_-çº¸çŸ­æƒ…é•¿çš„åšå®¢-CSDNåšå®¢</a> </p><p><img src="/%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE/image-20231007104602303.png" alt="image-20231007104602303"></p><h2 id="Ubuntuç½‘ç»œå›¾æ ‡æ¶ˆå¤±"><a href="#Ubuntuç½‘ç»œå›¾æ ‡æ¶ˆå¤±" class="headerlink" title="Ubuntuç½‘ç»œå›¾æ ‡æ¶ˆå¤±"></a>Ubuntuç½‘ç»œå›¾æ ‡æ¶ˆå¤±</h2><p>[Ubuntu è™šæ‹Ÿæœºæ²¡æœ‰ç½‘ç»œå›¾æ ‡ï¼ˆè¿æ¥ä¸ä¸Šç½‘ç»œï¼‰_ubuntuæ²¡æœ‰ç½‘ç»œå›¾æ ‡_å¿«ä¹ç§‘ç ”å–µçš„åšå®¢-CSDNåšå®¢](<a href="https://blog.csdn.net/qq_53089817/article/details/119490128#:~:text=%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95%EF%BC%9A">https://blog.csdn.net/qq_53089817/article/details/119490128#:~:text=è§£å†³æ–¹æ³•ï¼š</a> 1ã€å…ˆå…³é—­å½“å‰çš„è™šæ‹Ÿæœºã€‚ 2ã€é€‰æ‹©è™šæ‹Ÿæœºè®¾ç½®æŸ¥çœ‹ç½‘ç»œé…ç½®æ˜¯å¦æ­£ç¡®ï¼ˆé€‰æ‹©NATè¿æ¥ï¼‰ã€‚ ç‚¹å‡»ç¡®å®šã€‚,3ã€é€‰æ‹©èœå•ç¼–è¾‘çš„è™šæ‹Ÿç½‘ç»œç¼–è¾‘å™¨ã€‚ é€‰æ‹©NATæ¨¡å¼å ç‚¹å‡»æ›´æ”¹è®¾ç½®ã€‚ 4ã€æœ€åé‡å¯Ubuntuç³»ç»Ÿå°±æœ‰ç½‘ç»œå›¾æ ‡äº†ã€‚)</p><p><a href="https://blog.csdn.net/aggie4628/article/details/125765055">ubuntu-22.04æ— æ³•è¿æ¥ç½‘ç»œ-sudo service network-manager stopè¯´ä¸è¡Œ-CSDNåšå®¢</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo service NetworkManager stop</span><br><span class="line"> </span><br><span class="line">sudo rm /var/lib/NetworkManager/NetworkManager.state</span><br><span class="line"> </span><br><span class="line">sudo service NetworkManager start</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Hexoç½‘ç«™æ­å»ºæ•™ç¨‹</title>
      <link href="/2023/09/26/Hexo%E7%BD%91%E7%AB%99%E6%90%AD%E5%BB%BA%E6%95%99%E7%A8%8B/"/>
      <url>/2023/09/26/Hexo%E7%BD%91%E7%AB%99%E6%90%AD%E5%BB%BA%E6%95%99%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å¦‚æœ</p><p>ä½ ä¹Ÿå¯ä»¥åƒæˆ‘ä¸€æ ·</p><p>æ‹¥æœ‰ä¸€ç¯‡å±äºä½ è‡ªå·±çš„Hexoæ¡†æ¶åšå®¢ç½‘ç«™</p><p>é‚£æˆ‘è§‰å¾—</p><p>è¿™ä»¶äº‹æƒ…</p><p>æ³°é…·è¾£ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼</p><p><img src="/Hexo%E7%BD%91%E7%AB%99%E6%90%AD%E5%BB%BA%E6%95%99%E7%A8%8B/1684920495319.png" alt="æ³°è£¤è¾£"></p></blockquote><hr><p>è¿™æ˜¯ä¸€ä¸ªæ‰‹æŠŠæ‰‹æ•™ä½ å¦‚ä½•æ­å»ºä¸€ä¸ªå±äºä½ è‡ªå·±çš„Hexoæ¡†æ¶åšå®¢ç½‘ç«™çš„æ•™ç¨‹</p><hr><h2 id="ç¬¬ä¸€èŠ‚-Hexoç®€ä»‹"><a href="#ç¬¬ä¸€èŠ‚-Hexoç®€ä»‹" class="headerlink" title="ç¬¬ä¸€èŠ‚  Hexoç®€ä»‹"></a>ç¬¬ä¸€èŠ‚  Hexoç®€ä»‹</h2><p>Hexoæ˜¯ä¸€æ¬¾åŸºäºNode.jsçš„é™æ€åšå®¢æ¡†æ¶ï¼ŒHexo ä½¿ç”¨ <a href="https://link.zhihu.com/?target=http://daringfireball.net/projects/markdown/">Markdown</a>ï¼ˆæˆ–å…¶ä»–æ¸²æŸ“å¼•æ“ï¼‰è§£ææ–‡ç« ï¼Œå¯ä»¥æ–¹ä¾¿åœ°ç”Ÿæˆé™æ€ç½‘é¡µï¼Œå¹¶æ‰˜ç®¡åœ¨GitHubå’ŒGiteeä¸Šï¼Œæ˜¯æ­å»ºåšå®¢çš„é¦–é€‰æ¡†æ¶ï¼Œè®©ä½ å®ç°åœ¨ä¸ç”¨è´­ä¹°äº‘æœåŠ¡å™¨çš„æƒ…å†µä¸‹æ‹¥æœ‰ä¸€ä¸ªå±äºè‡ªå·±çš„åšå®¢ç½‘ç«™çš„æ¢¦æƒ³ã€‚</p><span id="more"></span><hr><h2 id="ç¬¬äºŒèŠ‚-å‰æœŸå‡†å¤‡"><a href="#ç¬¬äºŒèŠ‚-å‰æœŸå‡†å¤‡" class="headerlink" title="ç¬¬äºŒèŠ‚ å‰æœŸå‡†å¤‡"></a>ç¬¬äºŒèŠ‚ å‰æœŸå‡†å¤‡</h2><p>åœ¨å®‰è£…Hexoä¹‹å‰ï¼Œéœ€è¦å®‰è£…Node.js</p><p>è¿›ä¸€æ­¥æƒ³è¦å°†Hexoéƒ¨ç½²åˆ°Githubæˆ–Giteeä¸Šï¼Œè¿˜å¿…é¡»é€šè¿‡Git</p><h3 id="2-1-å®‰è£…Node-js"><a href="#2-1-å®‰è£…Node-js" class="headerlink" title="2.1 å®‰è£…Node.js"></a>2.1 å®‰è£…Node.js</h3><ul><li>Windowsï¼š</li></ul><p>åœ¨å®˜ç½‘ä¸‹è½½LTSç‰ˆæœ¬ï¼ˆä¸‹è½½nodejsè‡ªå¸¦npmï¼‰</p><p><img src="/Hexo%E7%BD%91%E7%AB%99%E6%90%AD%E5%BB%BA%E6%95%99%E7%A8%8B/image-20231003193554011.png" alt="image-20231003193554011"></p><p>å®˜ç½‘ä¸‹è½½åœ°å€ï¼š<a href="https://nodejs.org/en">Node.js (nodejs.org)</a></p><ul><li>Linux</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install nodejs</span><br><span class="line">sudo apt-get install npm</span><br></pre></td></tr></table></figure><p>å®‰è£…æˆåŠŸéªŒè¯ï¼š</p><p>åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">node -v</span><br><span class="line">npm -v</span><br></pre></td></tr></table></figure><p>èƒ½å¤Ÿé¡ºåˆ©è¾“å‡ºnodeå’Œnpmçš„ç‰ˆæœ¬å·å³å¯</p><h3 id="2-2-å®‰è£…git"><a href="#2-2-å®‰è£…git" class="headerlink" title="2.2 å®‰è£…git"></a>2.2 å®‰è£…git</h3><ul><li><p>Windows</p><p>ç‚¹å‡»Gitå®˜ç½‘ä¸‹è½½å®‰è£…åŒ…ï¼Œç„¶åæŒ‰Wizardå®‰è£…å³å¯</p></li></ul><ul><li><p>Linux (Ubuntu, Debian)ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install git-core</span><br></pre></td></tr></table></figure></li><li><p>Linux (Fedora, Red Hat, CentOS)ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install git-core</span><br></pre></td></tr></table></figure></li></ul><p>git -væŸ¥çœ‹ç‰ˆæœ¬ï¼ŒéªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ</p><h3 id="2-3-å®‰è£…Hexo"><a href="#2-3-å®‰è£…Hexo" class="headerlink" title="2.3 å®‰è£…Hexo"></a>2.3 å®‰è£…Hexo</h3><p>é€šè¿‡npmå¯ä»¥ç›´æ¥å®‰è£…</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-cli -g</span><br></pre></td></tr></table></figure><p>hexo -væŸ¥çœ‹ç‰ˆæœ¬ï¼ŒéªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ</p><hr><h2 id="ç¬¬ä¸‰èŠ‚-æ­å»ºæœ¬åœ°é™æ€åšå®¢"><a href="#ç¬¬ä¸‰èŠ‚-æ­å»ºæœ¬åœ°é™æ€åšå®¢" class="headerlink" title="ç¬¬ä¸‰èŠ‚ æ­å»ºæœ¬åœ°é™æ€åšå®¢"></a>ç¬¬ä¸‰èŠ‚ æ­å»ºæœ¬åœ°é™æ€åšå®¢</h2><h3 id="3-1-åˆå§‹åŒ–Hexoåšå®¢æ¡†æ¶"><a href="#3-1-åˆå§‹åŒ–Hexoåšå®¢æ¡†æ¶" class="headerlink" title="3.1  åˆå§‹åŒ–Hexoåšå®¢æ¡†æ¶"></a>3.1  åˆå§‹åŒ–Hexoåšå®¢æ¡†æ¶</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init &lt;folder&gt;</span><br></pre></td></tr></table></figure><h3 id="3-2-è¿›å…¥æ–°å»ºçš„æ–‡ä»¶å¤¹ï¼Œå®‰è£…ä¸€ä¸‹npm"><a href="#3-2-è¿›å…¥æ–°å»ºçš„æ–‡ä»¶å¤¹ï¼Œå®‰è£…ä¸€ä¸‹npm" class="headerlink" title="3.2  è¿›å…¥æ–°å»ºçš„æ–‡ä»¶å¤¹ï¼Œå®‰è£…ä¸€ä¸‹npm"></a>3.2  è¿›å…¥æ–°å»ºçš„æ–‡ä»¶å¤¹ï¼Œå®‰è£…ä¸€ä¸‹npm</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd &lt;folder&gt;</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure><ul><li><p>npm install æ›´æ–°å¯èƒ½ä¼šè¾ƒæ…¢ï¼Œå¦‚æœå¤±è´¥ï¼Œå¯ä»¥å°è¯•é…ç½®npmä»£ç†</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//  é…ç½®nmpä»£ç†æ¥æé«˜é€Ÿåº¦ï¼Œå¦‚è®¾ç½®æ·˜å®é•œåƒ</span><br><span class="line">npm config set registry https://registry.npm.taobao.org </span><br><span class="line"></span><br><span class="line">// æŸ¥çœ‹é…ç½®æ˜¯å¦æˆåŠŸ</span><br><span class="line">npm config get registry </span><br><span class="line"></span><br><span class="line">// æˆåŠŸåé‡æ–°npm installå®‰è£…</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure></li></ul><p>è¿›å…¥æ–‡ä»¶å¤¹åï¼Œç›®å½•å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ _config.yml</span><br><span class="line">â”œâ”€â”€ package.json</span><br><span class="line">â”œâ”€â”€ scaffolds</span><br><span class="line">â”œâ”€â”€ source</span><br><span class="line">|   â”œâ”€â”€ _drafts</span><br><span class="line">|   â””â”€â”€ _posts</span><br><span class="line">â””â”€â”€ themes</span><br></pre></td></tr></table></figure><p><strong>_config.yml</strong></p><p>ç½‘ç«™çš„ <a href="https://hexo.io/zh-cn/docs/configuration">é…ç½®</a> ä¿¡æ¯ï¼Œæ‚¨å¯ä»¥åœ¨æ­¤é…ç½®å¤§éƒ¨åˆ†çš„å‚æ•°ã€‚</p><p><strong>package.json</strong></p><p>åº”ç”¨ç¨‹åºçš„ä¿¡æ¯ã€‚<a href="https://ejs.co/">EJS</a>, <a href="http://learnboost.github.io/stylus/">Stylus</a> å’Œ <a href="http://daringfireball.net/projects/markdown/">Markdown</a> æ¸²æŸ“å¼•æ“ å·²é»˜è®¤å®‰è£…ï¼Œæ‚¨å¯ä»¥è‡ªç”±ç§»é™¤ã€‚</p><p><strong>scaffolds</strong></p><p><a href="https://hexo.io/zh-cn/docs/writing#%E6%A8%A1%E7%89%88%EF%BC%88Scaffold%EF%BC%89">æ¨¡ç‰ˆ</a> æ–‡ä»¶å¤¹ã€‚å½“æ‚¨æ–°å»ºæ–‡ç« æ—¶ï¼ŒHexo ä¼šæ ¹æ® scaffold æ¥åˆ›å»ºæ–‡ä»¶ã€‚</p><p>Hexo çš„æ¨¡æ¿æ˜¯æŒ‡åœ¨æ–°å»ºçš„æ–‡ç« æ–‡ä»¶ä¸­é»˜è®¤å¡«å……çš„å†…å®¹ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨ä¿®æ”¹ <code>scaffold/post.md</code> ä¸­çš„ Front-matter å†…å®¹ï¼Œé‚£ä¹ˆæ¯æ¬¡æ–°å»ºä¸€ç¯‡æ–‡ç« æ—¶éƒ½ä¼šåŒ…å«è¿™ä¸ªä¿®æ”¹ã€‚</p><p><strong>source</strong></p><p>èµ„æºæ–‡ä»¶å¤¹æ˜¯å­˜æ”¾ç”¨æˆ·èµ„æºçš„åœ°æ–¹ã€‚é™¤ <code>_posts</code> æ–‡ä»¶å¤¹ä¹‹å¤–ï¼Œå¼€å¤´å‘½åä¸º <code>_</code> (ä¸‹åˆ’çº¿)çš„æ–‡ä»¶ &#x2F; æ–‡ä»¶å¤¹å’Œéšè—çš„æ–‡ä»¶å°†ä¼šè¢«å¿½ç•¥ã€‚Markdown å’Œ HTML æ–‡ä»¶ä¼šè¢«è§£æå¹¶æ”¾åˆ° <code>public</code> æ–‡ä»¶å¤¹ï¼Œè€Œå…¶ä»–æ–‡ä»¶ä¼šè¢«æ‹·è´è¿‡å»ã€‚</p><p><strong>themes</strong></p><p><a href="https://hexo.io/zh-cn/docs/themes">ä¸»é¢˜</a> æ–‡ä»¶å¤¹ã€‚Hexo ä¼šæ ¹æ®ä¸»é¢˜æ¥ç”Ÿæˆé™æ€é¡µé¢ã€‚</p><h3 id="3-3-ç”Ÿæˆé™æ€åšå®¢ç½‘ç«™"><a href="#3-3-ç”Ÿæˆé™æ€åšå®¢ç½‘ç«™" class="headerlink" title="3.3  ç”Ÿæˆé™æ€åšå®¢ç½‘ç«™"></a>3.3  ç”Ÿæˆé™æ€åšå®¢ç½‘ç«™</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo generate</span><br></pre></td></tr></table></figure><h3 id="3-4-å¯åŠ¨æœåŠ¡å™¨"><a href="#3-4-å¯åŠ¨æœåŠ¡å™¨" class="headerlink" title="3.4  å¯åŠ¨æœåŠ¡å™¨"></a>3.4  å¯åŠ¨æœåŠ¡å™¨</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo server</span><br></pre></td></tr></table></figure><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œè®¿é—®ç½‘å€ä¸ºï¼š<a href="http://localhost:4000/%EF%BC%8C%E8%AE%BF%E9%97%AE%E8%BF%99%E4%B8%AA%E6%9C%AC%E5%9C%B0%E7%BD%91%E5%9D%80%E5%B0%B1%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%88%B0%E8%87%AA%E5%B7%B1%E7%94%9F%E6%88%90%E7%9A%84%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99">http://localhost:4000/ï¼Œè®¿é—®è¿™ä¸ªæœ¬åœ°ç½‘å€å°±å¯ä»¥çœ‹åˆ°è‡ªå·±ç”Ÿæˆçš„åšå®¢ç½‘ç«™</a></p><hr><h2 id="ç¬¬å››èŠ‚-å°†åšå®¢éƒ¨ç½²åˆ°Github"><a href="#ç¬¬å››èŠ‚-å°†åšå®¢éƒ¨ç½²åˆ°Github" class="headerlink" title="ç¬¬å››èŠ‚ å°†åšå®¢éƒ¨ç½²åˆ°Github"></a>ç¬¬å››èŠ‚ å°†åšå®¢éƒ¨ç½²åˆ°Github</h2><p>ç”Ÿæˆçš„åšå®¢ç½‘ç«™åªèƒ½åœ¨è‡ªå·±ç”µè„‘æœ¬åœ°è®¿é—®å½“ç„¶æ²¡æ„æ€ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥çœ‹çœ‹å¦‚ä½•æŠŠå†™å¥½çš„åšå®¢éƒ¨ç½²åˆ°Github Pagesä¸Šã€‚</p><h5 id="GitHub-Pages-æ˜¯ä»€ä¹ˆ"><a href="#GitHub-Pages-æ˜¯ä»€ä¹ˆ" class="headerlink" title="GitHub Pages æ˜¯ä»€ä¹ˆ?"></a>GitHub Pages æ˜¯ä»€ä¹ˆ?</h5><ul><li><a href="https://link.zhihu.com/?target=https://help.github.com/en/articles/what-is-github-pages">What is GitHub Pages? - GitHub Help</a></li></ul><p>GitHub Pages æ˜¯ç”± GitHub å®˜æ–¹æä¾›çš„ä¸€ç§å…è´¹çš„é™æ€ç«™ç‚¹æ‰˜ç®¡æœåŠ¡ï¼Œè®©æˆ‘ä»¬å¯ä»¥åœ¨ GitHub ä»“åº“é‡Œæ‰˜ç®¡å’Œå‘å¸ƒè‡ªå·±çš„é™æ€ç½‘ç«™é¡µé¢ã€‚</p><h5 id="Hexo-Github-Pages-å‘å¸ƒåšå®¢åŸç†"><a href="#Hexo-Github-Pages-å‘å¸ƒåšå®¢åŸç†" class="headerlink" title="Hexo + Github Pages å‘å¸ƒåšå®¢åŸç†"></a>Hexo + Github Pages å‘å¸ƒåšå®¢åŸç†</h5><p>åœ¨æœ¬åœ°æ’°å†™ Markdown æ ¼å¼æ–‡ç« åï¼Œé€šè¿‡ Hexo è§£ææ–‡æ¡£ï¼Œæ¸²æŸ“ç”Ÿæˆå…·æœ‰ä¸»é¢˜æ ·å¼çš„ HTML é™æ€ç½‘é¡µï¼Œå†æ¨é€åˆ° GitHub ä¸Šå®Œæˆåšæ–‡çš„å‘å¸ƒã€‚</p><p>ä¸‹é¢çœ‹çœ‹æ€ä¹ˆå®ç°</p><h3 id="4-1-Githubåˆ›å»ºä¸ªäººä»“åº“"><a href="#4-1-Githubåˆ›å»ºä¸ªäººä»“åº“" class="headerlink" title="4.1 Githubåˆ›å»ºä¸ªäººä»“åº“"></a>4.1 Githubåˆ›å»ºä¸ªäººä»“åº“</h3><p>ç‚¹å‡»New repositoryï¼Œå¼€å§‹æ–°å»ºä»“åº“</p><p>æ–°ä»“åº“çš„åå­—æœ‰å›ºå®šæ ¼å¼è¦æ±‚ï¼Œå¦ç»„æ— æ³•å»ºç«™</p><p>æ ¼å¼ä¸ºï¼šç”¨æˆ·å + .github.oi</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">repository name eg.     yourusername.github.oi</span><br></pre></td></tr></table></figure><h3 id="4-2-å®‰è£…hexoä¸Šä¼ æ’ä»¶"><a href="#4-2-å®‰è£…hexoä¸Šä¼ æ’ä»¶" class="headerlink" title="4.2 å®‰è£…hexoä¸Šä¼ æ’ä»¶"></a>4.2 å®‰è£…hexoä¸Šä¼ æ’ä»¶</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><h3 id="4-3-ä¿®æ”¹hexoé…ç½®æ–‡ä»¶æŒ‡å®šä»“åº“è·¯å¾„"><a href="#4-3-ä¿®æ”¹hexoé…ç½®æ–‡ä»¶æŒ‡å®šä»“åº“è·¯å¾„" class="headerlink" title="4.3 ä¿®æ”¹hexoé…ç½®æ–‡ä»¶æŒ‡å®šä»“åº“è·¯å¾„"></a>4.3 ä¿®æ”¹hexoé…ç½®æ–‡ä»¶æŒ‡å®šä»“åº“è·¯å¾„</h3><p>æ‰“å¼€æ–‡ä»¶å¤¹ä¸­çš„_config.ymlæ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶æœ€ä¸‹é¢çš„Deploymentéƒ¨åˆ†ä¿®æ”¹é…ç½®</p><ol><li>typeé¡¹å¡«å…¥â€gitâ€</li><li>repoé¡¹å¡«å…¥ä½ çš„ä»“åº“çš„httpsæˆ–è€…sshåœ°å€ï¼ˆç‚¹å¼€ä»“åº“ä¸»é¡µé‚£ä¸ªç»¿è‰²çš„Codeå°±èƒ½çœ‹åˆ°ï¼‰</li><li>branché¡¹å¡«å…¥ä½ çš„ä»“åº“çš„åˆ†æ”¯å</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># Deployment</span><br><span class="line">## Docs: https://hexo.io/docs/one-command-deployment</span><br><span class="line">deploy:</span><br><span class="line"> type: git</span><br><span class="line"> repo: ä½ çš„ä»“åº“çš„httpsæˆ–è€…sshåœ°å€</span><br><span class="line"> branch: &lt;ä½ çš„ä»“åº“çš„åˆ†æ”¯å&gt;</span><br></pre></td></tr></table></figure><h3 id="4-4-éƒ¨ç½²åšå®¢åˆ°Github"><a href="#4-4-éƒ¨ç½²åšå®¢åˆ°Github" class="headerlink" title="4.4 éƒ¨ç½²åšå®¢åˆ°Github"></a>4.4 éƒ¨ç½²åšå®¢åˆ°Github</h3><p>éƒ¨ç½²å‘½ä»¤</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo deploy</span><br></pre></td></tr></table></figure><p>éƒ¨ç½²å®Œæˆåï¼Œå¯ä»¥åœ¨ä»“åº“ä¸»é¡µçš„Deployment</p><hr><h2 id="ç¬¬äº”èŠ‚-å¸¸ç”¨å‘½ä»¤"><a href="#ç¬¬äº”èŠ‚-å¸¸ç”¨å‘½ä»¤" class="headerlink" title="ç¬¬äº”èŠ‚ å¸¸ç”¨å‘½ä»¤"></a>ç¬¬äº”èŠ‚ å¸¸ç”¨å‘½ä»¤</h2><h3 id="new"><a href="#new" class="headerlink" title="new"></a><font color=#0080ff>new</font></h3><p>æ–°å»ºä¸€ä¸ªåšå®¢ã€‚æ‰§è¡Œä»¥ä¸‹å‘½ä»¤åï¼Œä¼šåœ¨blog&#x2F;source&#x2F;_posts&#x2F;æ–‡ä»¶å¤¹ä¸­æ–°å»ºä¸€ä¸ªåŒåçš„åšå®¢æ–‡ä»¶ï¼ˆ.mdæ ¼å¼ï¼‰ã€‚é€šè¿‡è®¾ç½®tagså­—æ®µè¿˜å¯ä»¥ç»™è¿™ä¸ªæ–‡ç« æ·»åŠ æ ‡ç­¾ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new &quot;åšå®¢åç§°&quot;</span><br></pre></td></tr></table></figure><h3 id="clean"><a href="#clean" class="headerlink" title="clean"></a><font color=#0080ff>clean</font></h3><p>æ¸…é™¤ç¼“å­˜æ–‡ä»¶ï¼ˆdb.jsonï¼‰å’Œå·²ç»ç”Ÿæˆçš„é™æ€åšå®¢æ–‡ä»¶ï¼ˆpublicæ–‡ä»¶å¤¹ä¸‹çš„å†…å®¹ï¼‰.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br></pre></td></tr></table></figure><h3 id="generate"><a href="#generate" class="headerlink" title="generate"></a><font color=#0080ff>generate</font></h3><p>ç”Ÿæˆé™æ€åšå®¢</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo generate</span><br><span class="line">ç®€å†™ä¸º:hexo g</span><br></pre></td></tr></table></figure><p><font color=#0080ff>server</font></p><p>å¯åŠ¨æœ¬åœ°çš„åšå®¢æœåŠ¡å™¨ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè®¿é—®ç½‘å€ä¸ºï¼š<code>http://localhost:4000/</code>ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo server</span><br><span class="line">ç®€å†™ä¸º:hexo s</span><br></pre></td></tr></table></figure><p><font color=#0080ff>deploy</font></p><p>åœ¨ç›¸åº”çš„ç½‘ç«™æœåŠ¡å™¨ï¼ˆä¸€èˆ¬æ˜¯Githubæˆ–Giteeï¼‰ä¸­éƒ¨ç½²åšå®¢</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo deploy</span><br><span class="line">ç®€å†™ä¸º:hexo d</span><br></pre></td></tr></table></figure><hr><h2 id="ç¬¬å…­èŠ‚-è®¿é—®ç½‘ç«™"><a href="#ç¬¬å…­èŠ‚-è®¿é—®ç½‘ç«™" class="headerlink" title="ç¬¬å…­èŠ‚ è®¿é—®ç½‘ç«™"></a>ç¬¬å…­èŠ‚ è®¿é—®ç½‘ç«™</h2><p>éƒ¨ç½²åœ¨Githubåçš„é»˜è®¤ç½‘ç«™urlä¸º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://ä½ çš„ç”¨æˆ·å.github.io/</span><br></pre></td></tr></table></figure><p>å¦‚æœèƒ½æˆåŠŸè®¿é—®ï¼Œé‚£ä¹ˆæ­å–œï¼ä½ å·²ç»æˆåŠŸéƒ¨ç½²äº†ä¸€ä¸ªå±äºè‡ªå·±çš„åšå®¢ç½‘ç«™ï¼</p>]]></content>
      
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
